const _0x1f998f=_0xf022;(function(_0x28f934,_0x258385){const _0x24e9c1=_0xf022,_0x31e512=_0x28f934();while(!![]){try{const _0x27bfd6=-parseInt(_0x24e9c1(0x14f))/0x1*(parseInt(_0x24e9c1(0x1b1))/0x2)+-parseInt(_0x24e9c1(0x166))/0x3*(-parseInt(_0x24e9c1(0x1dd))/0x4)+parseInt(_0x24e9c1(0x17d))/0x5*(-parseInt(_0x24e9c1(0x1de))/0x6)+-parseInt(_0x24e9c1(0x1ba))/0x7+-parseInt(_0x24e9c1(0x18e))/0x8*(-parseInt(_0x24e9c1(0x155))/0x9)+-parseInt(_0x24e9c1(0x13f))/0xa*(parseInt(_0x24e9c1(0x1ce))/0xb)+parseInt(_0x24e9c1(0x158))/0xc*(parseInt(_0x24e9c1(0x191))/0xd);if(_0x27bfd6===_0x258385)break;else _0x31e512['push'](_0x31e512['shift']());}catch(_0x277e62){_0x31e512['push'](_0x31e512['shift']());}}}(_0x1bfa,0xcae5c));const system=require('./lib/system'),thiIsADemo=![],{app,BrowserWindow,dialog,ipcMain}=require(_0x1f998f(0x199)),express=require(_0x1f998f(0x172)),morgan=require(_0x1f998f(0x17c)),{engine}=require('express-handlebars'),multer=require(_0x1f998f(0x1bf)),flash=require(_0x1f998f(0x13a)),session=require(_0x1f998f(0x20a)),passport=require('passport'),{database}=require(_0x1f998f(0x18b)),{v4:uuid}=require(_0x1f998f(0x149)),path=require(_0x1f998f(0x130)),{RecaptchaV2}=require(_0x1f998f(0x1c4)),nodePersist=require('node-persist');nodePersist[_0x1f998f(0x176)]({'dir':path[_0x1f998f(0x132)](__dirname,_0x1f998f(0x195))});async function initialize_software(){const _0x16413d=_0x1f998f,_0x1814ce=await nodePersist['get'](_0x16413d(0x142));!_0x1814ce&&await nodePersist['set']('installToken',_0x16413d(0x136));}async function the_software_have_a_token(){const _0x4af955=_0x1f998f,_0x40275e=await nodePersist['get'](_0x4af955(0x142));if(!_0x40275e)return![];return _0x40275e!='false';}async function create_expiration_date_of_the_token(_0x4c3ffb){const _0x537b34=_0x1f998f,_0x10d1ce=await nodePersist[_0x537b34(0x208)](_0x537b34(0x205));!_0x10d1ce&&await nodePersist[_0x537b34(0x1bc)](_0x537b34(0x205),_0x4c3ffb);}async function token_expired(){const _0x1f68e8=_0x1f998f,_0x4c7f87=await nodePersist[_0x1f68e8(0x208)](_0x1f68e8(0x205)),_0x3408b1=new Date(_0x4c7f87),_0x46b935=new Date();return _0x46b935<_0x3408b1;}async function remove_install_token(){const _0xe8b88=_0x1f998f;await nodePersist['removeItem'](_0xe8b88(0x142)),await nodePersist[_0xe8b88(0x15c)](_0xe8b88(0x205)),console[_0xe8b88(0x1e4)](_0xe8b88(0x190));}async function initialize_token(_0x31323d){const _0x5b5c0c=_0x1f998f,_0x516113=await nodePersist[_0x5b5c0c(0x208)](_0x5b5c0c(0x142));await nodePersist['set'](_0x5b5c0c(0x142),_0x31323d);}async function initialize_demo(){const _0x4ff00f=_0x1f998f,_0xbf7ec8=await nodePersist['get'](_0x4ff00f(0x1d4));if(!_0xbf7ec8){const _0x3c427d=new Date()[_0x4ff00f(0x144)]();await nodePersist['set']('installDate',_0x3c427d),console[_0x4ff00f(0x1e4)](_0x4ff00f(0x203),_0x3c427d);}else console[_0x4ff00f(0x1e4)](_0x4ff00f(0x157),_0xbf7ec8);}async function is_demo_expired(){const _0x1c6751=_0x1f998f,_0x413362=await nodePersist[_0x1c6751(0x208)](_0x1c6751(0x1d4));if(!_0x413362)return console[_0x1c6751(0x1e4)]('No\x20se\x20encontr贸\x20la\x20fecha\x20de\x20instalaci贸n'),![];const _0x3f3691=new Date(_0x413362),_0x591416=new Date(),_0x5e2be4=_0x591416-_0x3f3691,_0x503b3f=_0x5e2be4/(0x3e8*0x3c*0x3c*0x18);return _0x503b3f>0x1e?(console['log'](_0x1c6751(0x153)),!![]):(console['log'](_0x1c6751(0x182)),![]);}async function this_software_count_have_a_count(){}async function the_user_have_a_token_active_in_the_database(){}async function verify_membership_of_user(){initialize_software();if(await the_software_have_a_token())return await token_expired();return![];}const simpleGit=require('simple-git'),fs=require('fs'),repoPath=path[_0x1f998f(0x132)](__dirname),git=simpleGit(repoPath),repoURL=_0x1f998f(0x16f),remote=_0x1f998f(0x188);git[_0x1f998f(0x19d)](remote,repoURL)[_0x1f998f(0x1c6)](()=>{const _0x1ad4ee=_0x1f998f;console['log'](_0x1ad4ee(0x1c1));})[_0x1f998f(0x19a)](_0xfce90f=>{const _0x4a9cd5=_0x1f998f;console['error'](_0x4a9cd5(0x156),_0xfce90f);});async function check_if_exist_updates(){const _0x5f265f=_0x1f998f;try{await git[_0x5f265f(0x1ed)](remote);const _0x1ca349=await git['log']([remote+_0x5f265f(0x1d5),'-1']),_0x44e365=await git[_0x5f265f(0x1e4)]([_0x5f265f(0x1f7),'-1']);_0x1ca349[_0x5f265f(0x1fa)][_0x5f265f(0x1a3)]!==_0x44e365['latest'][_0x5f265f(0x1a3)]?(console[_0x5f265f(0x1e4)](_0x5f265f(0x194)),await git[_0x5f265f(0x17b)]([_0x5f265f(0x1a8),'--hard',remote+_0x5f265f(0x1d5)]),await git[_0x5f265f(0x152)]('origin',_0x5f265f(0x183),{'--rebase':null}),dialog['showMessageBoxSync']({'type':_0x5f265f(0x164),'title':'Actualizaci贸n','message':_0x5f265f(0x163),'buttons':[_0x5f265f(0x185)]}),app[_0x5f265f(0x200)](),app[_0x5f265f(0x15d)]()):console[_0x5f265f(0x1e4)](_0x5f265f(0x146));}catch(_0x48f46f){const _0x44c47e=path[_0x5f265f(0x132)](__dirname,'logfile.txt');fs[_0x5f265f(0x159)](_0x44c47e,_0x5f265f(0x140)+_0x48f46f[_0x5f265f(0x139)]+'\x0a'+_0x48f46f[_0x5f265f(0x187)]+'\x0a\x0a','utf8'),console[_0x5f265f(0x204)](_0x5f265f(0x16e),_0x48f46f),dialog['showMessageBoxSync']({'type':_0x5f265f(0x20c),'title':_0x5f265f(0x14a),'message':_0x5f265f(0x140)+_0x48f46f['message']+'\x0a'+_0x48f46f[_0x5f265f(0x187)]+'\x0a\x0a'});}}const serverExpress=express();require('./lib/passport'),require(_0x1f998f(0x162)),serverExpress[_0x1f998f(0x1bc)](_0x1f998f(0x12d),process['env'][_0x1f998f(0x20b)]||0xfa0),serverExpress['set'](_0x1f998f(0x184),path[_0x1f998f(0x132)](__dirname,_0x1f998f(0x184))),serverExpress[_0x1f998f(0x17a)](_0x1f998f(0x1bd),engine({'defaultLayout':_0x1f998f(0x183),'layoutsDir':path[_0x1f998f(0x132)](serverExpress['get']('views'),'layouts'),'partialsDir':path[_0x1f998f(0x132)](serverExpress[_0x1f998f(0x208)](_0x1f998f(0x184)),_0x1f998f(0x137)),'extname':_0x1f998f(0x1bd),'helpers':require('./lib/handlebars')})),serverExpress[_0x1f998f(0x1bc)](_0x1f998f(0x14b),_0x1f998f(0x1bd)),require(_0x1f998f(0x1a1))[_0x1f998f(0x1bb)]();const {APP_PG_USER,APP_PG_HOST,APP_PG_DATABASE,APP_PG_PASSWORD,APP_PG_PORT,TOKEN}=process[_0x1f998f(0x1ec)],pg=require('pg'),adminPool=new pg[(_0x1f998f(0x15a))]({'user':APP_PG_USER,'host':APP_PG_HOST,'password':APP_PG_PASSWORD,'port':APP_PG_PORT,'database':_0x1f998f(0x198)}),importSQLFile=async _0x536a2b=>{const _0x3bcb31=_0x1f998f,_0x5477ba=path['join'](__dirname,_0x3bcb31(0x1aa),'edplus.sql'),_0x3e1cc1=fs[_0x3bcb31(0x1b0)](_0x5477ba,'utf8'),_0x4f59d9=_0x3e1cc1[_0x3bcb31(0x1fb)](/;\s*$/m)[_0x3bcb31(0x16d)](_0x23ecb3=>_0x23ecb3['trim']())[_0x3bcb31(0x20e)](_0x16c6a6=>_0x16c6a6[_0x3bcb31(0x1d1)]>0x0),_0x24ecf3=await _0x536a2b['connect']();try{for(const _0x25c9ee of _0x4f59d9){await _0x24ecf3[_0x3bcb31(0x1e7)](_0x25c9ee);}console['log'](_0x3bcb31(0x1ea));}catch(_0x3c72da){console[_0x3bcb31(0x204)](_0x3bcb31(0x1f6),_0x3c72da[_0x3bcb31(0x139)]);}finally{_0x24ecf3[_0x3bcb31(0x1a6)]();}};async function create_update_of_the_database(){const _0x5dcf1d=_0x1f998f;var _0x2eaba1=_0x5dcf1d(0x1c9);await adminPool[_0x5dcf1d(0x1e7)](_0x2eaba1),console[_0x5dcf1d(0x1e4)](_0x5dcf1d(0x1c3));}const createDatabase=async()=>{const _0x131e02=_0x1f998f,_0x38d3ae=await adminPool['query'](_0x131e02(0x145));_0x38d3ae[_0x131e02(0x1db)]===0x0?(await adminPool[_0x131e02(0x1e7)](_0x131e02(0x1f3)),importSQLFile(adminPool),console['log']('\x20Base\x20de\x20datos\x20EDPLUS\x20creada')):(console[_0x131e02(0x1e4)](_0x131e02(0x12f)),await create_update_of_the_database());};createDatabase();const pgPool=new pg[(_0x1f998f(0x15a))]({'user':APP_PG_USER,'host':APP_PG_HOST,'database':APP_PG_DATABASE,'password':APP_PG_PASSWORD,'port':APP_PG_PORT});serverExpress['use'](session({'secret':_0x1f998f(0x1d8),'resave':![],'saveUninitialized':![],'store':new(require('connect-pg-simple')(session))({'pool':pgPool,'tableName':'session'})})),serverExpress[_0x1f998f(0x14c)](flash()),serverExpress[_0x1f998f(0x14c)](morgan(_0x1f998f(0x1b8))),serverExpress['use'](express[_0x1f998f(0x180)]({'extended':![]})),serverExpress[_0x1f998f(0x14c)](express[_0x1f998f(0x207)]()),serverExpress[_0x1f998f(0x14c)](passport[_0x1f998f(0x1fe)]()),serverExpress[_0x1f998f(0x14c)](passport[_0x1f998f(0x1f8)]());const storage=multer[_0x1f998f(0x1f0)]({'destination':path['join'](__dirname,_0x1f998f(0x1e5)),'filename':(_0x2ea114,_0x360305,_0xfb0769,_0x4022cc)=>{const _0x326ae1=_0x1f998f;_0xfb0769(null,uuid()+path[_0x326ae1(0x17f)](_0x360305['originalname']));}});serverExpress[_0x1f998f(0x14c)](multer({'storage':storage})[_0x1f998f(0x161)](_0x1f998f(0x197))),serverExpress[_0x1f998f(0x14c)]((_0x1f9802,_0x1b880c,_0xd859ac)=>{const _0x3f28ea=_0x1f998f;serverExpress[_0x3f28ea(0x1cc)]['success']=_0x1f9802[_0x3f28ea(0x18d)](_0x3f28ea(0x1e0)),serverExpress[_0x3f28ea(0x1cc)][_0x3f28ea(0x139)]=_0x1f9802[_0x3f28ea(0x18d)](_0x3f28ea(0x139)),serverExpress[_0x3f28ea(0x1cc)]['user']=_0x1f9802[_0x3f28ea(0x1d0)],serverExpress[_0x3f28ea(0x1cc)]['company']=_0x1f9802['company'],serverExpress[_0x3f28ea(0x1cc)][_0x3f28ea(0x1a0)]=0x0,serverExpress[_0x3f28ea(0x1cc)][_0x3f28ea(0x141)]=0x0,_0xd859ac();});const http=require(_0x1f998f(0x1c7)),server=http['createServer'](serverExpress),{Server}=require(_0x1f998f(0x165)),io=new Server(server),users={},connectedEmployees={},companyLimitsCache={},chat=require(_0x1f998f(0x160));io['on'](_0x1f998f(0x1c5),async _0x5bedf1=>{const _0x533f6a=_0x1f998f;_0x5bedf1['on'](_0x533f6a(0x1ca),async(_0x2db618,_0x47a883)=>{const _0x309cb6=_0x533f6a,_0x262d3f=connectedEmployees[_0x47a883]||[],_0x2fa9b0=_0x262d3f[_0x309cb6(0x18c)](_0x50b5d5=>_0x50b5d5['userId']===_0x2db618);if(_0x2fa9b0){_0x5bedf1[_0x309cb6(0x16b)](_0x309cb6(0x131),_0x309cb6(0x201));return;}if(system!=_0x309cb6(0x179)){!companyLimitsCache[_0x47a883]&&(companyLimitsCache[_0x47a883]=await chat['get_max_employee_of_this_company'](_0x47a883));const _0x55d1eb=companyLimitsCache[_0x47a883];if(_0x262d3f[_0x309cb6(0x1d1)]>=_0x55d1eb){_0x5bedf1[_0x309cb6(0x16b)](_0x309cb6(0x131),'Ups,\x20parece\x20que\x20alcanzaste\x20tu\x20l铆mite\x20de\x20dispositivos\x20conectados.\x20Por\x20favor,\x20actualiza\x20tu\x20membres铆a.');return;}}_0x5bedf1['companyId']=_0x47a883,_0x262d3f[_0x309cb6(0x18f)]({'userId':_0x2db618,'socketId':_0x5bedf1['id']}),connectedEmployees[_0x47a883]=_0x262d3f;const _0x25f3d3=await chat[_0x309cb6(0x168)](_0x2db618,0xa);io['to'](_0x2db618)[_0x309cb6(0x16b)]('privateNotifications',{'notifications':_0x25f3d3});});async function _0xdeb8b8(_0x8dd765){const _0x8b8b35=_0x533f6a,_0x4cc03d=users[_0x8dd765];let _0xe91244=_0x4cc03d;!_0x4cc03d&&(_0xe91244=await chat[_0x8b8b35(0x1ae)](toUserId));const _0xa99c20={'canSend':_0xe91244,'theUserIsConnect':_0x4cc03d};return _0xa99c20;}_0x5bedf1['on'](_0x533f6a(0x1e6),async({userEmail:_0x475cc0,toUserEmail:_0x2a7e2a,message:_0x275ea0})=>{const _0xaac570=_0x533f6a,_0x1ecb5a=await _0xdeb8b8(_0x2a7e2a);_0x1ecb5a[_0xaac570(0x1ad)]?await chat[_0xaac570(0x1d9)](_0x475cc0,_0x2a7e2a,_0x275ea0)?(_0x1ecb5a['theUserIsConnect']&&io['to'](recipientSocketId)[_0xaac570(0x16b)](_0xaac570(0x169),{'userId':userId,'message':_0x275ea0}),_0x5bedf1[_0xaac570(0x16b)](_0xaac570(0x192),{'success':!![],'message':_0xaac570(0x1ff)})):_0x5bedf1[_0xaac570(0x16b)](_0xaac570(0x192),{'success':![],'message':_0xaac570(0x1e3)+_0x2a7e2a+_0xaac570(0x19c)}):_0x5bedf1[_0xaac570(0x16b)](_0xaac570(0x192),{'success':![],'message':_0xaac570(0x150)+_0x2a7e2a+_0xaac570(0x1af)});}),_0x5bedf1['on'](_0x533f6a(0x167),async({userEmail:_0xfcf6ae})=>{const _0x44458e=_0x533f6a,_0x5a83fb=await chat[_0x44458e(0x168)](_0xfcf6ae,0xa);io['to'](recipientSocketId)[_0x44458e(0x16b)]('privateNotifications',{'notifications':_0x5a83fb});}),_0x5bedf1['on'](_0x533f6a(0x1ee),async({userId:_0x4cbbd7,toUserId:_0x5a32c9,message:_0x2db7ce})=>{const _0x16744e=_0x533f6a,_0x3ecd0c=users[_0x5a32c9];let _0x12a3d5=_0x3ecd0c;!_0x3ecd0c&&(_0x12a3d5=await chat[_0x16744e(0x1ae)](_0x5a32c9));if(_0x12a3d5){const _0x2c4b80=await chat['create_new_chat'](_0x4cbbd7,_0x5a32c9);await chat[_0x16744e(0x1d7)](_0x2c4b80,_0x4cbbd7,_0x2db7ce)&&(_0x3ecd0c&&io['to'](_0x3ecd0c)[_0x16744e(0x16b)](_0x16744e(0x169),{'userId':_0x4cbbd7,'message':_0x2db7ce})),_0x5bedf1[_0x16744e(0x16b)](_0x16744e(0x192),{'success':!![],'message':_0x16744e(0x143)});}else _0x5bedf1['emit']('messageStatus',{'success':![],'message':_0x16744e(0x148)+_0x5a32c9+_0x16744e(0x18a)});}),_0x5bedf1['on'](_0x533f6a(0x13d),()=>{const _0x4c0d34=_0x533f6a,{companyId:_0x566b69}=_0x5bedf1;_0x566b69&&connectedEmployees[_0x566b69]?(connectedEmployees[_0x566b69]=connectedEmployees[_0x566b69][_0x4c0d34(0x20e)](_0x5800b6=>_0x5800b6[_0x4c0d34(0x1b2)]!==_0x5bedf1['id']),connectedEmployees[_0x566b69]['length']===0x0&&delete connectedEmployees[_0x566b69]):console[_0x4c0d34(0x1e4)](_0x4c0d34(0x1da)+_0x5bedf1['id']+_0x4c0d34(0x1cb));}),_0x5bedf1['on'](_0x533f6a(0x1b6),_0x56cfb2=>{const _0x36da9b=_0x533f6a;console[_0x36da9b(0x1e4)]('Nueva\x20notificaci贸n:',_0x56cfb2),_0x5bedf1[_0x36da9b(0x12c)][_0x36da9b(0x16b)](_0x36da9b(0x181),_0x56cfb2);});});const companyName=_0x1f998f(0x196);serverExpress[_0x1f998f(0x14c)](require(_0x1f998f(0x1a5))),serverExpress[_0x1f998f(0x14c)](require(_0x1f998f(0x20f))),serverExpress[_0x1f998f(0x14c)](companyName,require(_0x1f998f(0x17e)));function _0xf022(_0x1195cc,_0x586d38){const _0x1bfa8d=_0x1bfa();return _0xf022=function(_0xf02290,_0x4eebb1){_0xf02290=_0xf02290-0x12c;let _0x33d5c4=_0x1bfa8d[_0xf02290];return _0x33d5c4;},_0xf022(_0x1195cc,_0x586d38);}const routesPath=path[_0x1f998f(0x132)](__dirname,'router/links');fs[_0x1f998f(0x16a)](routesPath)[_0x1f998f(0x193)](_0x24cf0a=>{const _0x1f054f=_0x1f998f,_0x3685d9=path[_0x1f054f(0x132)](routesPath,_0x24cf0a);fs['statSync'](_0x3685d9)['isFile']()&&_0x24cf0a['endsWith']('.js')&&serverExpress[_0x1f054f(0x14c)](companyName,require(_0x3685d9));}),serverExpress[_0x1f998f(0x14c)](require(_0x1f998f(0x151))),serverExpress[_0x1f998f(0x14c)](require(_0x1f998f(0x151))),serverExpress[_0x1f998f(0x14c)](express[_0x1f998f(0x19f)](path[_0x1f998f(0x132)](__dirname,_0x1f998f(0x19b))));const os=require('os');function getLocalIP(){const _0x59bf04=_0x1f998f,_0x4cd2c0=os[_0x59bf04(0x15e)]();for(let _0x52b271 in _0x4cd2c0){for(let _0x343f97=0x0;_0x343f97<_0x4cd2c0[_0x52b271][_0x59bf04(0x1d1)];_0x343f97++){const _0x72de91=_0x4cd2c0[_0x52b271][_0x343f97];if(_0x72de91['family']==='IPv4'&&!_0x72de91[_0x59bf04(0x206)])return _0x72de91[_0x59bf04(0x1b9)];}}return'127.0.0.1';}const axios=require(_0x1f998f(0x147));async function get_answer_of_my_api(_0x392284,_0x27fe09){const _0x4ad30d=_0x1f998f,_0x40566f=path[_0x4ad30d(0x132)](__dirname,_0x4ad30d(0x1ab));fs[_0x4ad30d(0x159)](_0x40566f,_0x4ad30d(0x1a9),_0x4ad30d(0x15f));try{const _0x5b359b=await axios[_0x4ad30d(0x1f4)](_0x4ad30d(0x1fc)+_0x392284,_0x27fe09,{'headers':{'Content-Type':_0x4ad30d(0x186)}});return fs[_0x4ad30d(0x159)](_0x40566f,'Error\x20verificando\x20actualizaciones:\x20'+_0x5b359b[_0x4ad30d(0x195)]+'\x0a\x0a\x0a',_0x4ad30d(0x15f)),_0x5b359b;}catch(_0xf11c01){return fs[_0x4ad30d(0x159)](_0x40566f,_0x4ad30d(0x140)+_0xf11c01[_0x4ad30d(0x139)]+'\x0a'+_0xf11c01[_0x4ad30d(0x187)]+'\x0a\x0a',_0x4ad30d(0x15f)),{'success':![],'message':_0x4ad30d(0x1c2)};}}let mainWindow,activationWindow,loginWindow;const createMainWindow=()=>{const _0x2e6026=_0x1f998f;mainWindow=new BrowserWindow({'width':0x320,'height':0x258}),mainWindow[_0x2e6026(0x1be)](),mainWindow[_0x2e6026(0x133)]('http://localhost:'+serverExpress['get'](_0x2e6026(0x12d)));},createMainWindowRegister=()=>{const _0x46cea5=_0x1f998f;loginWindow=new BrowserWindow({'width':0x320,'height':0x258,'parent':mainWindow,'webPreferences':{'preload':path[_0x46cea5(0x132)](__dirname,_0x46cea5(0x1e9)),'nodeIntegration':!![],'contextIsolation':![]}}),loginWindow[_0x46cea5(0x1be)](),loginWindow[_0x46cea5(0x14e)](path['join'](__dirname,'activation.html'));},{machineIdSync}=require(_0x1f998f(0x1f1)),deviceId=machineIdSync();ipcMain['on'](_0x1f998f(0x1d3),async _0x324946=>{const _0x2a7413=_0x1f998f;console[_0x2a7413(0x1e4)](_0x2a7413(0x1a7)),_0x324946[_0x2a7413(0x202)](_0x2a7413(0x15b),deviceId);}),ipcMain['on'](_0x1f998f(0x1cf),async(_0x40f12a,_0x4690a0)=>{const _0x29e1d6=_0x1f998f,_0x51ef20=_0x4690a0[_0x29e1d6(0x1d2)];await initialize_token(_0x51ef20['token']),await create_expiration_date_of_the_token(_0x51ef20[_0x29e1d6(0x13b)]);const _0x115f10=_0x29e1d6(0x209);_0x40f12a[_0x29e1d6(0x202)](_0x29e1d6(0x1cf),_0x115f10);}),ipcMain['on'](_0x1f998f(0x178),async(_0x5c5f1d,_0x18e5a8)=>{const _0x61e9=_0x1f998f,_0x1d56d1=_0x18e5a8['token'],_0x55c4c1=await see_if_exist_this_token_in_the_database_of_the_web(_0x1d56d1);if(_0x55c4c1[_0x61e9(0x1b4)]){let _0x4a432a=!![];_0x55c4c1[_0x61e9(0x149)]&&(_0x55c4c1[_0x61e9(0x149)]!==deviceId&&(_0x55c4c1['message']='Este\x20usuario\x20ya\x20tiene\x20un\x20TOKEN\x20registrado\x20en\x20un\x20equipo.',_0x4a432a=![])),_0x4a432a&&(await save_the_uui_of_the_user_in_the_database(_0x1d56d1,deviceId)&&(await initialize_token(_0x1d56d1),await create_expiration_date_of_the_token(_0x55c4c1['activation_date']),_0x55c4c1[_0x61e9(0x139)]=_0x61e9(0x209)));}_0x5c5f1d[_0x61e9(0x202)](_0x61e9(0x1f9),_0x55c4c1[_0x61e9(0x139)]);}),ipcMain['on'](_0x1f998f(0x175),async(_0x3e7781,_0x188614)=>{const _0x137f1a=_0x1f998f,_0x54d4c5=_0x188614[_0x137f1a(0x12e)],_0x27bda1=_0x188614[_0x137f1a(0x170)],_0x5b0e2b=await see_if_exist_this_user_in_the_database_of_the_web(_0x54d4c5,_0x27bda1);if(_0x5b0e2b['token']){if(_0x5b0e2b[_0x137f1a(0x149)]&&_0x5b0e2b['uuid']!==deviceId)_0x5b0e2b[_0x137f1a(0x139)]='Este\x20usuario\x20ya\x20tiene\x20un\x20TOKEN\x20registrado\x20en\x20un\x20equipo.';else{if(await save_the_uui_of_the_user_in_the_database(_0x54d4c5,deviceId)){}}}_0x3e7781[_0x137f1a(0x202)](_0x137f1a(0x1e2),_0x5b0e2b[_0x137f1a(0x139)]);});const bcrypt=require(_0x1f998f(0x1fd));async function see_if_exist_this_user_in_the_database_of_the_web(_0x4d8b8b,_0x224e1c){const _0x1f58a7=_0x1f998f;try{const _0x9cd025=await get_answer_of_my_api('get_information_of_the_user.php',{'email':_0x4d8b8b});if(!_0x9cd025['data'][_0x1f58a7(0x1e0)])return{'token':null,'message':_0x1f58a7(0x1f5)};const _0x52d722=_0x9cd025[_0x1f58a7(0x195)],_0x4b2cd0=await bcrypt[_0x1f58a7(0x20d)](_0x224e1c,_0x52d722[_0x1f58a7(0x1c8)]);if(!_0x4b2cd0)return{'token':null,'message':_0x1f58a7(0x177)};const _0x31bf6a=await get_answer_of_my_api(_0x1f58a7(0x173),{'userId':_0x52d722['id']});if(_0x31bf6a[_0x1f58a7(0x195)][_0x1f58a7(0x1e0)])return{'token':null,'message':'Este\x20usuario\x20no\x20tiene\x20ningun\x20Token\x20activo.'};const _0x173ca3=_0x31bf6a['data'],_0x524704=new Date();_0x524704[_0x1f58a7(0x1dc)](_0x524704['getFullYear']()-0x1);if(new Date(_0x52d722['activation_date'])<_0x524704)return{'token':null,'message':_0x1f58a7(0x135)};return console['log'](_0x1f58a7(0x1a2)),{'token':_0x173ca3['token'],'type_membresy':_0x173ca3[_0x1f58a7(0x1cd)],'message':_0x1f58a7(0x1a2)};}catch(_0x12498b){return console[_0x1f58a7(0x204)]('Error\x20al\x20verificar\x20usuario:',_0x12498b),{'token':null};}}async function see_if_exist_this_token_in_the_database_of_the_web(_0xf17d81){const _0x3a752f=_0x1f998f;try{const _0xdf3956=await get_answer_of_my_api('see_if_exist_this_token_in_the_database_of_the_web.php',{'token':_0xf17d81});if(!_0xdf3956['data'][_0x3a752f(0x1e0)])return{'token':null,'message':_0x3a752f(0x1e1)};const _0x322d91=_0xdf3956[_0x3a752f(0x195)],_0x3de1aa=new Date();_0x322d91[_0x3a752f(0x1cd)]==0x0?_0x3de1aa[_0x3a752f(0x1ef)](_0x3de1aa[_0x3a752f(0x1f2)]()-0x1e):_0x3de1aa[_0x3a752f(0x1dc)](_0x3de1aa['getFullYear']()-0x1);if(_0x322d91[_0x3a752f(0x1b5)]!=_0x3a752f(0x1ac)&&new Date(_0x322d91[_0x3a752f(0x1b5)])<_0x3de1aa)return{'token':null,'message':'Suscripci贸n\x20expirada.\x20Por\x20favor,\x20vuelve\x20a\x20activar\x20tu\x20membres铆a.'};if(_0x322d91[_0x3a752f(0x1b5)]===_0x3a752f(0x1ac)){const _0x3805c8=new Date();_0x322d91[_0x3a752f(0x1cd)]==0x0?_0x3805c8[_0x3a752f(0x1ef)](_0x3de1aa[_0x3a752f(0x1f2)]()+0x1e):_0x3805c8[_0x3a752f(0x1dc)](_0x3805c8[_0x3a752f(0x171)]()+0x1);const _0x3e831c=await get_answer_of_my_api(_0x3a752f(0x174),{'suscripcion':_0x3805c8['toISOString']()['split']('T')[0x0],'token':_0xf17d81});return _0x3e831c[_0x3a752f(0x195)][_0x3a752f(0x1e0)]?(_0x322d91['activation_date']=_0x3805c8,console['log'](_0x3a752f(0x1a2)),{'token':!![],'type_membresy':_0x322d91[_0x3a752f(0x1cd)],'uuid':_0x322d91[_0x3a752f(0x1a4)],'activation_date':_0x322d91[_0x3a752f(0x1b5)],'message':'Usuario\x20autenticado\x20con\x20茅xito.'}):{'token':null,'message':_0x3a752f(0x134)};}}catch(_0x3574c5){return console[_0x3a752f(0x204)]('Error\x20al\x20verificar\x20usuario:',_0x3574c5),{'token':null,'message':_0x3574c5};}}async function save_the_uui_of_the_user_in_the_database(_0x68c170,_0x194500){const _0x48c549=_0x1f998f;try{const _0x3b45c1=await get_answer_of_my_api(_0x48c549(0x1b3),{'token':_0x68c170,'deviceId':_0x194500});return _0x3b45c1[_0x48c549(0x195)][_0x48c549(0x1e0)];}catch(_0x29998b){return console[_0x48c549(0x204)]('Error\x20al\x20actualizar\x20el\x20UUID\x20del\x20dispositivo:',_0x29998b),![];}}async function verificarTokenActivo(){const _0x35e549=_0x1f998f,_0xbf2417=_0x35e549(0x19e);try{const _0x563b20=await pool[_0x35e549(0x1e7)](_0xbf2417,[TOKEN]);return console['log'](_0x563b20[0x0]),_0x563b20[0x0][_0x35e549(0x1e8)]===0x1?(console[_0x35e549(0x1e4)](_0x35e549(0x154)),!![]):(console[_0x35e549(0x1e4)](_0x35e549(0x1c0)),![]);}catch(_0x145600){return console[_0x35e549(0x204)](_0x35e549(0x13e),_0x145600),![];}}function _0x1bfa(){const _0x39b1c2=['1331156AFoOxF','66rWlnwP','listen','success','Token\x20no\x20encontrado.','answer-from-login-render','No\x20pudimos\x20enviar\x20el\x20mensaje\x20al\x20usuario\x20\x27','log','public/img/uploads','sendNotificationToUser','query','active','preload.js','\x20SQL\x20ejecutado\x20correctamente','darwin','env','fetch','sendMessageToUser','setDate','diskStorage','node-machine-id','getDate','CREATE\x20DATABASE\x20edplus','post','Usuario\x20no\x20encontrado.','\x20Error\x20ejecutando\x20SQL:','HEAD','session','answer-from-login-render-token','latest','split','https://www.pluspuntodeventa.com/api/','bcrypt','initialize','Mensaje\x20enviado\x20con\x20茅xito.\x20','relaunch','Ups,\x20parece\x20que\x20ya\x20est谩s\x20conectado\x20en\x20otro\x20dispositivo.','reply','Fecha\x20de\x20instalaci贸n\x20guardada:','error','expirationDateOFTheToken','internal','json','get','Datos\x20actualizados\x20con\x20茅xito.\x20Cierra\x20y\x20vuelve\x20a\x20abrir\x20el\x20programa\x20','express-session','PORT','warning','compare','filter','./router/authentication','broadcast','port','username','\x20La\x20base\x20de\x20datos\x20EDPLUS\x20ya\x20existe,\x20no\x20se\x20cre贸\x20nuevamente.','path','connectionRejected','join','loadURL','Ocurrio\x20un\x20error\x20al\x20verificar\x20tu\x20Token\x20en\x20el\x20ultimo\x20paso,\x20intentalo\x20otra\x20vez.','Suscripci贸n\x20expirada.\x20Por\x20favor,\x20vuelve\x20a\x20activar\x20tu\x20membres铆a.','false','partials','0.0.0.0','message','connect-flash','expiration_date','window-all-closed','disconnect','Error\x20al\x20verificar\x20el\x20token:','10zDcsRf','Error\x20verificando\x20actualizaciones:\x20','pack_branch','installToken','Mensaje\x20enviado\x20con\x20茅xito','toISOString','SELECT\x201\x20FROM\x20pg_database\x20WHERE\x20datname\x20=\x20\x27edplus\x27','\x20La\x20aplicaci贸n\x20ya\x20est谩\x20actualizada.','axios','Este\x20email\x20\x27','uuid','Error\x20verificando\x20actualizaciones!','view\x20engine','use','platform','loadFile','43nZyiLy','El\x20usuario\x20\x27','./lib/addFrom','pull','La\x20demo\x20ha\x20expirado.','Token\x20encontrado\x20y\x20activo.','5449473Nythqv','Error\x20al\x20agregar\x20el\x20repositorio\x20remoto','Fecha\x20de\x20instalaci贸n\x20existente:','60XASzdw','appendFileSync','Pool','answer_get_my_deviceId','removeItem','quit','networkInterfaces','utf8','./services/chat.js','single','./lib/editFrom','Se\x20ha\x20descargado\x20una\x20nueva\x20versi贸n.\x20Reinicia\x20la\x20aplicaci贸n\x20para\x20aplicar\x20los\x20cambios.','info','socket.io','9PWVDcl','getTheFirstTenNotifications','get_the_first_notification','privateMessage','readdirSync','emit','Demo\x20Expirada','map','\x20Error\x20verificando\x20actualizaciones:','https://github.com/EduardoMartinez68/VERSIONES_PLUS','password','getFullYear','express','get_data_of_the_token_with_the_user_id.php','update_activation_date.php','login-from-render','init','Contrase帽a\x20incorrecta.','login-from-render-token','desktop','engine','raw','morgan','150835YWfKZP','./router/links','extname','urlencoded','newNotification','La\x20demo\x20a煤n\x20est谩\x20activa.','main','views','Reiniciar\x20ahora','application/json','stack','origin','Server\x20running\x20on\x20http://','\x27\x20no\x20existe\x20','./keys','some','flash','8blUjum','push','installToken\x20eliminado','4695613rISeWH','messageStatus','forEach','\x20Nueva\x20versi贸n\x20encontrada,\x20actualizando...','data','/links','image','postgres','electron','catch','public','\x27.\x20Int茅ntalo\x20de\x20nuevo.\x20','addRemote','\x0a\x20\x20\x20\x20\x20\x20\x20\x20SELECT\x20*\x20FROM\x20pagos\x20\x0a\x20\x20\x20\x20\x20\x20\x20\x20WHERE\x20token\x20=\x20?\x0a\x20\x20\x20\x20','static','pack_company','dotenv','Usuario\x20autenticado\x20con\x20茅xito.','hash','device_id','./router','release','\x20Petici贸n\x20recibida\x20para\x20obtener\x20el\x20deviceId','reset','ENTRE','database','logfile.txt','0000-00-00','canSend','this_email_exist','\x27\x20no\x20existe.\x20','readFileSync','64886HPeQNx','socketId','see_if_exist_this_token_in_the_database_of_the_web.php','token','activation_date','sendNotification','ready','dev','address','1638532zdrFxr','config','set','.hbs','maximize','multer','El\x20token\x20no\x20est谩\x20activo\x20o\x20no\x20existe.','Repositorio\x20remoto\x20configurado\x20correctamente','Hubo\x20un\x20error\x20al\x20hacer\x20la\x20solicitud.','\x20La\x20base\x20de\x20datos\x20EDPLUS\x20fue\x20actualizada.','express-recaptcha','connection','then','http','hashedPassword','\x0a\x20\x20\x20\x20\x20\x20\x20\x20--\x20Crear\x20tabla\x20solo\x20si\x20no\x20existe\x0a\x20\x20\x20\x20\x20\x20\x20\x20CREATE\x20TABLE\x20IF\x20NOT\x20EXISTS\x20\x22Box\x22.reachange_services\x20(\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20id\x20bigserial\x20NOT\x20NULL,\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20id_companies\x20bigint,\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20id_branches\x20bigint,\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20id_employees\x20bigint,\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20id_customers\x20bigint,\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20service_name\x20varchar(500)\x20NOT\x20NULL,\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20key_services\x20text,\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20service_money\x20double\x20precision\x20NOT\x20NULL,\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20money_received\x20double\x20precision\x20NOT\x20NULL,\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20change\x20double\x20precision\x20NOT\x20NULL,\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20CONSTRAINT\x20id_key_reachange_services\x20PRIMARY\x20KEY\x20(id)\x0a\x20\x20\x20\x20\x20\x20\x20\x20);\x0a\x0a\x20\x20\x20\x20\x20\x20\x20\x20--\x20Comentarios\x20descriptivos\x0a\x20\x20\x20\x20\x20\x20\x20\x20COMMENT\x20ON\x20COLUMN\x20\x22Box\x22.reachange_services.key_services\x20IS\x20\x27this\x20is\x20the\x20key\x20that\x20the\x20customer\x20show\x20to\x20the\x20employee\x20for\x20buy\x20his\x20service\x27;\x0a\x20\x20\x20\x20\x20\x20\x20\x20COMMENT\x20ON\x20COLUMN\x20\x22Box\x22.reachange_services.service_money\x20IS\x20\x27this\x20is\x20the\x20money\x20that\x20the\x20customer\x20would\x20like\x20buy\x27;\x0a\x0a\x20\x20\x20\x20\x20\x20\x20\x20--\x20Agregar\x20claves\x20for谩neas\x20(si\x20no\x20existen\x20ya)\x0a\x20\x20\x20\x20\x20\x20\x20\x20DO\x20$$\x0a\x20\x20\x20\x20\x20\x20\x20\x20BEGIN\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20IF\x20NOT\x20EXISTS\x20(\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20SELECT\x201\x20FROM\x20pg_constraint\x20WHERE\x20conname\x20=\x20\x27employees_fk\x27\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20)\x20THEN\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20ALTER\x20TABLE\x20\x22Box\x22.reachange_services\x20ADD\x20CONSTRAINT\x20employees_fk\x20FOREIGN\x20KEY\x20(id_employees)\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20REFERENCES\x20\x22Company\x22.employees\x20(id)\x20MATCH\x20FULL\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20ON\x20DELETE\x20SET\x20NULL\x20ON\x20UPDATE\x20CASCADE;\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20END\x20IF;\x0a\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20IF\x20NOT\x20EXISTS\x20(\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20SELECT\x201\x20FROM\x20pg_constraint\x20WHERE\x20conname\x20=\x20\x27customers_fk\x27\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20)\x20THEN\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20ALTER\x20TABLE\x20\x22Box\x22.reachange_services\x20ADD\x20CONSTRAINT\x20customers_fk\x20FOREIGN\x20KEY\x20(id_customers)\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20REFERENCES\x20\x22Company\x22.customers\x20(id)\x20MATCH\x20FULL\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20ON\x20DELETE\x20SET\x20NULL\x20ON\x20UPDATE\x20CASCADE;\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20END\x20IF;\x0a\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20IF\x20NOT\x20EXISTS\x20(\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20SELECT\x201\x20FROM\x20pg_constraint\x20WHERE\x20conname\x20=\x20\x27companies_fk\x27\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20)\x20THEN\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20ALTER\x20TABLE\x20\x22Box\x22.reachange_services\x20ADD\x20CONSTRAINT\x20companies_fk\x20FOREIGN\x20KEY\x20(id_companies)\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20REFERENCES\x20\x22User\x22.companies\x20(id)\x20MATCH\x20FULL\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20ON\x20DELETE\x20SET\x20NULL\x20ON\x20UPDATE\x20CASCADE;\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20END\x20IF;\x0a\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20IF\x20NOT\x20EXISTS\x20(\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20SELECT\x201\x20FROM\x20pg_constraint\x20WHERE\x20conname\x20=\x20\x27branches_fk\x27\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20)\x20THEN\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20ALTER\x20TABLE\x20\x22Box\x22.reachange_services\x20ADD\x20CONSTRAINT\x20branches_fk\x20FOREIGN\x20KEY\x20(id_branches)\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20REFERENCES\x20\x22Company\x22.branches\x20(id)\x20MATCH\x20FULL\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20ON\x20DELETE\x20SET\x20NULL\x20ON\x20UPDATE\x20CASCADE;\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20END\x20IF;\x0a\x20\x20\x20\x20\x20\x20\x20\x20END\x0a\x20\x20\x20\x20\x20\x20\x20\x20$$;\x0a\x0a\x20\x20\x20\x20','registerUser','\x20desconectado,\x20pero\x20no\x20estaba\x20asociado\x20a\x20ninguna\x20empresa.','locals','type_membresy','6796229cGmmLE','update_data_of_the_token_in_this_drive','user','length','dataToken','get_my_deviceId','installDemo','/main','showMessageBoxSync','send_new_message','FudSession','create_notification','Socket\x20','rowCount','setFullYear'];_0x1bfa=function(){return _0x39b1c2;};return _0x1bfa();}async function actualizarToken(){const _0x48207a=_0x1f998f,_0x247294='\x0a\x20\x20\x20\x20\x20\x20\x20\x20UPDATE\x20pagos\x20\x0a\x20\x20\x20\x20\x20\x20\x20\x20SET\x20active\x20=\x20false\x0a\x20\x20\x20\x20\x20\x20\x20\x20WHERE\x20token\x20=\x20?\x0a\x20\x20\x20\x20';await pool[_0x48207a(0x1e7)](_0x247294,[TOKEN]);}app['on'](_0x1f998f(0x1b7),async()=>{const _0x26135c=_0x1f998f;await check_if_exist_updates();if(thiIsADemo){await initialize_demo();if(await is_demo_expired()){dialog[_0x26135c(0x1d6)]({'type':_0x26135c(0x20c),'title':_0x26135c(0x16c),'message':'Tu\x20demo\x20de\x2030\x20d铆as\x20ha\x20expirado.\x20Por\x20favor,\x20compra\x20la\x20versi贸n\x20completa\x20y\x20sigue\x20creciendo\x20con\x20ED\x20PLUS\x20.'}),app[_0x26135c(0x15d)]();return;}}else await verify_membership_of_user()?(serverExpress[_0x26135c(0x1df)](serverExpress[_0x26135c(0x208)](_0x26135c(0x12d)),_0x26135c(0x138),()=>{const _0x28fb8e=_0x26135c;console[_0x28fb8e(0x1e4)](_0x28fb8e(0x189)+getLocalIP()+':'+serverExpress['get'](_0x28fb8e(0x12d)));}),createMainWindow()):createMainWindowRegister();}),app['on'](_0x1f998f(0x13c),()=>{const _0x3c8649=_0x1f998f;process[_0x3c8649(0x14d)]!==_0x3c8649(0x1eb)&&app[_0x3c8649(0x15d)]();});