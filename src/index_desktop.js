const _0x1432aa=_0x4640;(function(_0x518e34,_0x2e809b){const _0x1bea90=_0x4640,_0x10b5d4=_0x518e34();while(!![]){try{const _0x3e4499=parseInt(_0x1bea90(0x11f))/0x1+parseInt(_0x1bea90(0xd5))/0x2+-parseInt(_0x1bea90(0xd7))/0x3*(parseInt(_0x1bea90(0x106))/0x4)+parseInt(_0x1bea90(0xa4))/0x5*(parseInt(_0x1bea90(0xeb))/0x6)+parseInt(_0x1bea90(0x168))/0x7*(parseInt(_0x1bea90(0x16d))/0x8)+parseInt(_0x1bea90(0xdf))/0x9+-parseInt(_0x1bea90(0x149))/0xa;if(_0x3e4499===_0x2e809b)break;else _0x10b5d4['push'](_0x10b5d4['shift']());}catch(_0x77b699){_0x10b5d4['push'](_0x10b5d4['shift']());}}}(_0x303b,0x68f37));const system=require(_0x1432aa(0xb4)),thiIsADemo=!![],{app,BrowserWindow,dialog,ipcMain}=require(_0x1432aa(0x142)),express=require(_0x1432aa(0xcc)),morgan=require(_0x1432aa(0x118)),{engine}=require(_0x1432aa(0x14c)),multer=require(_0x1432aa(0x13a)),flash=require('connect-flash'),session=require('express-session'),passport=require(_0x1432aa(0x120)),{database}=require(_0x1432aa(0xf7)),{v4:uuid}=require(_0x1432aa(0x97)),path=require(_0x1432aa(0x108)),{RecaptchaV2}=require('express-recaptcha'),nodePersist=require(_0x1432aa(0x111));nodePersist[_0x1432aa(0xbb)]({'dir':path['join'](__dirname,'data')});async function initialize_software(){const _0x499a11=_0x1432aa,_0x3b056f=await nodePersist[_0x499a11(0xbd)]('installToken');!_0x3b056f&&await nodePersist['set'](_0x499a11(0x9b),_0x499a11(0xd4));}async function the_software_have_a_token(){const _0x2066e9=_0x1432aa,_0x3d0fb0=await nodePersist[_0x2066e9(0xbd)](_0x2066e9(0x9b));if(!_0x3d0fb0)return![];return _0x3d0fb0!=_0x2066e9(0xd4);}async function create_expiration_date_of_the_token(_0x27c715){const _0x202f0c=_0x1432aa,_0x221449=await nodePersist[_0x202f0c(0xbd)](_0x202f0c(0xc3));!_0x221449&&await nodePersist[_0x202f0c(0xe0)]('expirationDateOFTheToken',_0x27c715);}async function token_expired(){const _0x2049c1=_0x1432aa,_0x2d3405=await nodePersist[_0x2049c1(0xbd)](_0x2049c1(0xc3)),_0x1c368c=new Date(_0x2d3405),_0x1aa114=new Date();return _0x1aa114<_0x1c368c;}async function remove_install_token(){const _0x32961e=_0x1432aa;await nodePersist['removeItem'](_0x32961e(0x9b)),await nodePersist['removeItem']('expirationDateOFTheToken'),console[_0x32961e(0xab)](_0x32961e(0xc9));}async function initialize_token(_0x3338ad){const _0x3b9a27=_0x1432aa,_0x3f13bd=await nodePersist[_0x3b9a27(0xbd)]('installToken');await nodePersist['set'](_0x3b9a27(0x9b),_0x3338ad);}async function initialize_demo(){const _0x1d217f=_0x1432aa,_0x4c7dec=await nodePersist[_0x1d217f(0xbd)](_0x1d217f(0x16e));if(!_0x4c7dec){const _0x30cd89=new Date()['toISOString']();await nodePersist[_0x1d217f(0xe0)](_0x1d217f(0x130),_0x30cd89),console[_0x1d217f(0xab)](_0x1d217f(0x9e),_0x30cd89);}else console[_0x1d217f(0xab)](_0x1d217f(0x13b),_0x4c7dec);}async function is_demo_expired(){const _0x45c96f=_0x1432aa,_0x23edb4=await nodePersist[_0x45c96f(0xbd)](_0x45c96f(0x16e));if(!_0x23edb4)return console[_0x45c96f(0xab)]('No\x20se\x20encontr贸\x20la\x20fecha\x20de\x20instalaci贸n'),![];const _0x2df048=new Date(_0x23edb4),_0x53972b=new Date(),_0x3532c0=_0x53972b-_0x2df048,_0x36e144=_0x3532c0/(0x3e8*0x3c*0x3c*0x18);return _0x36e144>0x1e?(console[_0x45c96f(0xab)]('La\x20demo\x20ha\x20expirado.'),!![]):(console[_0x45c96f(0xab)](_0x45c96f(0xc7)),![]);}async function this_software_count_have_a_count(){}async function the_user_have_a_token_active_in_the_database(){}async function verify_membership_of_user(){initialize_software();if(await the_software_have_a_token())return await token_expired();return![];}const simpleGit=require(_0x1432aa(0xe6)),fs=require('fs'),repoPath=path['join'](__dirname),git=simpleGit(repoPath),repoURL=_0x1432aa(0x15d),remote=_0x1432aa(0x98);git[_0x1432aa(0xf0)](remote,repoURL)[_0x1432aa(0x10e)](()=>{const _0x13d8f5=_0x1432aa;console[_0x13d8f5(0xab)](_0x13d8f5(0x126));})[_0x1432aa(0xd1)](_0x3a519c=>{const _0x5ddbfe=_0x1432aa;console[_0x5ddbfe(0x13d)](_0x5ddbfe(0x112),_0x3a519c);});async function check_if_exist_updates(){const _0x4f9b9d=_0x1432aa;try{await git[_0x4f9b9d(0x117)](remote);const _0x57a5fb=await git[_0x4f9b9d(0xab)]([remote+_0x4f9b9d(0x113),'-1']),_0x3513fa=await git['log']([_0x4f9b9d(0xb3),'-1']);_0x57a5fb['latest'][_0x4f9b9d(0x14a)]!==_0x3513fa[_0x4f9b9d(0x103)][_0x4f9b9d(0x14a)]?(console[_0x4f9b9d(0xab)](_0x4f9b9d(0x11b)),await git['raw']([_0x4f9b9d(0x135),_0x4f9b9d(0xac),remote+_0x4f9b9d(0x113)]),await git[_0x4f9b9d(0x148)](_0x4f9b9d(0x98),_0x4f9b9d(0x101),{'--rebase':null}),dialog[_0x4f9b9d(0x128)]({'type':_0x4f9b9d(0xb6),'title':'Actualizaci贸n','message':_0x4f9b9d(0x123),'buttons':['Reiniciar\x20ahora']}),app[_0x4f9b9d(0x15c)](),app[_0x4f9b9d(0xdc)]()):console['log']('\x20La\x20aplicaci贸n\x20ya\x20est谩\x20actualizada.');}catch(_0x49dfb8){const _0x48a0bb=path['join'](__dirname,'logfile.txt');fs[_0x4f9b9d(0x15a)](_0x48a0bb,_0x4f9b9d(0x11e)+_0x49dfb8['message']+'\x0a'+_0x49dfb8[_0x4f9b9d(0xf6)]+'\x0a\x0a',_0x4f9b9d(0xd6)),console[_0x4f9b9d(0x13d)](_0x4f9b9d(0xf5),_0x49dfb8),dialog['showMessageBoxSync']({'type':_0x4f9b9d(0x159),'title':'Error\x20verificando\x20actualizaciones!','message':_0x4f9b9d(0x11e)+_0x49dfb8[_0x4f9b9d(0xc4)]+'\x0a'+_0x49dfb8[_0x4f9b9d(0xf6)]+'\x0a\x0a'});}}const serverExpress=express();require(_0x1432aa(0xec)),require(_0x1432aa(0x102)),serverExpress[_0x1432aa(0xe0)](_0x1432aa(0x166),process['env'][_0x1432aa(0x138)]||0xfa0),serverExpress[_0x1432aa(0xe0)](_0x1432aa(0x104),path[_0x1432aa(0xbf)](__dirname,_0x1432aa(0x104))),serverExpress[_0x1432aa(0xdd)](_0x1432aa(0x12b),engine({'defaultLayout':_0x1432aa(0x101),'layoutsDir':path[_0x1432aa(0xbf)](serverExpress['get'](_0x1432aa(0x104)),_0x1432aa(0x131)),'partialsDir':path[_0x1432aa(0xbf)](serverExpress[_0x1432aa(0xbd)]('views'),_0x1432aa(0xcb)),'extname':_0x1432aa(0x12b),'helpers':require('./lib/handlebars')})),serverExpress[_0x1432aa(0xe0)]('view\x20engine',_0x1432aa(0x12b)),require('dotenv')['config']();const {APP_PG_USER,APP_PG_HOST,APP_PG_DATABASE,APP_PG_PASSWORD,APP_PG_PORT,TOKEN}=process[_0x1432aa(0x165)],pg=require('pg'),adminPool=new pg['Pool']({'user':APP_PG_USER,'host':APP_PG_HOST,'password':APP_PG_PASSWORD,'port':APP_PG_PORT,'database':_0x1432aa(0x153)}),importSQLFile=async _0x56c669=>{const _0x5c3f62=_0x1432aa,_0x4bf0a7=path[_0x5c3f62(0xbf)](__dirname,_0x5c3f62(0xf8),_0x5c3f62(0x110)),_0x4a655f=fs[_0x5c3f62(0xe3)](_0x4bf0a7,_0x5c3f62(0xd6)),_0x17ddf2=_0x4a655f[_0x5c3f62(0xd9)](/;\s*$/m)[_0x5c3f62(0xb1)](_0x388b57=>_0x388b57[_0x5c3f62(0xc0)]())[_0x5c3f62(0x14d)](_0x47d7f1=>_0x47d7f1['length']>0x0),_0xd931a8=await _0x56c669['connect']();try{for(const _0x1e9a72 of _0x17ddf2){await _0xd931a8['query'](_0x1e9a72);}console['log'](_0x5c3f62(0xad));}catch(_0x5b267c){console[_0x5c3f62(0x13d)](_0x5c3f62(0xa1),_0x5b267c['message']);}finally{_0xd931a8['release']();}},createDatabase=async()=>{const _0x5af4fd=_0x1432aa,_0x45cb8f=await adminPool[_0x5af4fd(0x12e)](_0x5af4fd(0x13c));_0x45cb8f['rowCount']===0x0?(await adminPool[_0x5af4fd(0x12e)](_0x5af4fd(0x160)),importSQLFile(adminPool),console['log']('\x20Base\x20de\x20datos\x20EDPLUS\x20creada')):console[_0x5af4fd(0xab)](_0x5af4fd(0x14e));};createDatabase();const pgPool=new pg[(_0x1432aa(0x146))]({'user':APP_PG_USER,'host':APP_PG_HOST,'database':APP_PG_DATABASE,'password':APP_PG_PASSWORD,'port':APP_PG_PORT});serverExpress[_0x1432aa(0x175)](session({'secret':'FudSession','resave':![],'saveUninitialized':![],'store':new(require(_0x1432aa(0x136))(session))({'pool':pgPool,'tableName':_0x1432aa(0x15b)})})),serverExpress[_0x1432aa(0x175)](flash()),serverExpress[_0x1432aa(0x175)](morgan(_0x1432aa(0xfa))),serverExpress[_0x1432aa(0x175)](express[_0x1432aa(0x158)]({'extended':![]})),serverExpress[_0x1432aa(0x175)](express[_0x1432aa(0xa9)]()),serverExpress[_0x1432aa(0x175)](passport[_0x1432aa(0x16a)]()),serverExpress[_0x1432aa(0x175)](passport[_0x1432aa(0x15b)]());const storage=multer['diskStorage']({'destination':path[_0x1432aa(0xbf)](__dirname,'public/img/uploads'),'filename':(_0x43c325,_0x4b07b2,_0x39b50a,_0x177e77)=>{const _0x58a39b=_0x1432aa;_0x39b50a(null,uuid()+path['extname'](_0x4b07b2[_0x58a39b(0xed)]));}});serverExpress[_0x1432aa(0x175)](multer({'storage':storage})[_0x1432aa(0x121)]('image')),serverExpress[_0x1432aa(0x175)]((_0x5f1897,_0x533410,_0x373e98)=>{const _0x211257=_0x1432aa;serverExpress[_0x211257(0xd3)][_0x211257(0xb7)]=_0x5f1897[_0x211257(0xda)](_0x211257(0xb7)),serverExpress[_0x211257(0xd3)][_0x211257(0xc4)]=_0x5f1897[_0x211257(0xda)](_0x211257(0xc4)),serverExpress['locals'][_0x211257(0x9d)]=_0x5f1897[_0x211257(0x9d)],serverExpress[_0x211257(0xd3)][_0x211257(0x12f)]=_0x5f1897['company'],serverExpress[_0x211257(0xd3)][_0x211257(0x10d)]=0x0,serverExpress['locals'][_0x211257(0x170)]=0x0,_0x373e98();});const http=require(_0x1432aa(0xe9)),server=http['createServer'](serverExpress),{Server}=require('socket.io'),io=new Server(server),users={},connectedEmployees={},companyLimitsCache={},chat=require(_0x1432aa(0xa7));io['on'](_0x1432aa(0xaf),async _0x200e18=>{const _0xa1fd51=_0x1432aa;_0x200e18['on'](_0xa1fd51(0xdb),async(_0x10e31e,_0x1e8503)=>{const _0x5e9152=_0xa1fd51,_0x5c2aa7=connectedEmployees[_0x1e8503]||[],_0x4a26e9=_0x5c2aa7[_0x5e9152(0xfc)](_0x2594e5=>_0x2594e5['userId']===_0x10e31e);if(_0x4a26e9){_0x200e18[_0x5e9152(0x10f)]('connectionRejected',_0x5e9152(0x147));return;}if(system!=_0x5e9152(0xfb)){!companyLimitsCache[_0x1e8503]&&(companyLimitsCache[_0x1e8503]=await chat['get_max_employee_of_this_company'](_0x1e8503));const _0x5c2021=companyLimitsCache[_0x1e8503];if(_0x5c2aa7['length']>=_0x5c2021){_0x200e18[_0x5e9152(0x10f)](_0x5e9152(0xf1),_0x5e9152(0xb9));return;}}_0x200e18[_0x5e9152(0x119)]=_0x1e8503,_0x5c2aa7[_0x5e9152(0xea)]({'userId':_0x10e31e,'socketId':_0x200e18['id']}),connectedEmployees[_0x1e8503]=_0x5c2aa7;const _0x219c95=await chat[_0x5e9152(0xcd)](_0x10e31e,0xa);io['to'](_0x10e31e)[_0x5e9152(0x10f)](_0x5e9152(0xfd),{'notifications':_0x219c95});});async function _0x1cd61e(_0x3c908c){const _0x52735f=_0xa1fd51,_0x2d4d61=users[_0x3c908c];let _0x3e4bcc=_0x2d4d61;!_0x2d4d61&&(_0x3e4bcc=await chat[_0x52735f(0x9f)](toUserId));const _0x5bd1c1={'canSend':_0x3e4bcc,'theUserIsConnect':_0x2d4d61};return _0x5bd1c1;}_0x200e18['on']('sendNotificationToUser',async({userEmail:_0x261a4f,toUserEmail:_0x1a5716,message:_0x3899a4})=>{const _0x53bef9=_0xa1fd51,_0x1a9f86=await _0x1cd61e(_0x1a5716);_0x1a9f86['canSend']?await chat[_0x53bef9(0xfe)](_0x261a4f,_0x1a5716,_0x3899a4)?(_0x1a9f86[_0x53bef9(0xa0)]&&io['to'](recipientSocketId)[_0x53bef9(0x10f)](_0x53bef9(0xff),{'userId':userId,'message':_0x3899a4}),_0x200e18[_0x53bef9(0x10f)](_0x53bef9(0x16f),{'success':!![],'message':'Mensaje\x20enviado\x20con\x20茅xito.\x20'})):_0x200e18['emit'](_0x53bef9(0x16f),{'success':![],'message':'No\x20pudimos\x20enviar\x20el\x20mensaje\x20al\x20usuario\x20\x27'+_0x1a5716+_0x53bef9(0xa3)}):_0x200e18['emit'](_0x53bef9(0x16f),{'success':![],'message':'El\x20usuario\x20\x27'+_0x1a5716+'\x27\x20no\x20existe.\x20'});}),_0x200e18['on'](_0xa1fd51(0x109),async({userEmail:_0x47833f})=>{const _0x53a3f9=_0xa1fd51,_0x2d0a71=await chat[_0x53a3f9(0xcd)](_0x47833f,0xa);io['to'](recipientSocketId)[_0x53a3f9(0x10f)](_0x53a3f9(0xfd),{'notifications':_0x2d0a71});}),_0x200e18['on'](_0xa1fd51(0x155),async({userId:_0x5a2051,toUserId:_0x5594e3,message:_0x3ccefc})=>{const _0x36b6eb=_0xa1fd51,_0x5b7963=users[_0x5594e3];let _0x1245a8=_0x5b7963;!_0x5b7963&&(_0x1245a8=await chat[_0x36b6eb(0x9f)](_0x5594e3));if(_0x1245a8){const _0x5666e5=await chat['create_new_chat'](_0x5a2051,_0x5594e3);await chat[_0x36b6eb(0x15e)](_0x5666e5,_0x5a2051,_0x3ccefc)&&(_0x5b7963&&io['to'](_0x5b7963)[_0x36b6eb(0x10f)](_0x36b6eb(0xff),{'userId':_0x5a2051,'message':_0x3ccefc})),_0x200e18['emit'](_0x36b6eb(0x16f),{'success':!![],'message':_0x36b6eb(0x133)});}else _0x200e18[_0x36b6eb(0x10f)](_0x36b6eb(0x16f),{'success':![],'message':_0x36b6eb(0xde)+_0x5594e3+_0x36b6eb(0xd2)});}),_0x200e18['on'](_0xa1fd51(0x144),()=>{const _0x26e0f5=_0xa1fd51,{companyId:_0x31755e}=_0x200e18;_0x31755e&&connectedEmployees[_0x31755e]?(connectedEmployees[_0x31755e]=connectedEmployees[_0x31755e][_0x26e0f5(0x14d)](_0x11127f=>_0x11127f[_0x26e0f5(0xe1)]!==_0x200e18['id']),connectedEmployees[_0x31755e]['length']===0x0&&delete connectedEmployees[_0x31755e]):console[_0x26e0f5(0xab)]('Socket\x20'+_0x200e18['id']+_0x26e0f5(0xba));}),_0x200e18['on']('sendNotification',_0x184cb3=>{const _0x103bef=_0xa1fd51;console['log'](_0x103bef(0x116),_0x184cb3),_0x200e18[_0x103bef(0x100)][_0x103bef(0x10f)](_0x103bef(0x141),_0x184cb3);});});const companyName=_0x1432aa(0x15f);serverExpress[_0x1432aa(0x175)](require(_0x1432aa(0x154))),serverExpress['use'](require(_0x1432aa(0xf2))),serverExpress[_0x1432aa(0x175)](companyName,require(_0x1432aa(0x173))),serverExpress[_0x1432aa(0x175)](companyName,require(_0x1432aa(0xb5))),serverExpress['use'](companyName,require(_0x1432aa(0x13e))),serverExpress[_0x1432aa(0x175)](companyName,require(_0x1432aa(0xd8))),serverExpress['use'](companyName,require('./router/links/subscription')),serverExpress['use'](companyName,require(_0x1432aa(0x134))),serverExpress['use'](companyName,require(_0x1432aa(0xca))),serverExpress['use'](companyName,require(_0x1432aa(0x12d))),serverExpress[_0x1432aa(0x175)](companyName,require(_0x1432aa(0xa2))),serverExpress['use'](companyName,require('./router/links/desktop')),serverExpress[_0x1432aa(0x175)](companyName,require(_0x1432aa(0xb0))),serverExpress[_0x1432aa(0x175)](companyName,require('./router/links/cashCut')),serverExpress['use'](companyName,require(_0x1432aa(0x137))),serverExpress['use'](require(_0x1432aa(0xbe))),serverExpress[_0x1432aa(0x175)](express[_0x1432aa(0x151)](path[_0x1432aa(0xbf)](__dirname,_0x1432aa(0x11c))));function _0x303b(){const _0x142c25=['flash','registerUser','quit','engine','Este\x20email\x20\x27','6174054FFFtuH','set','socketId','length','readFileSync','active','127.0.0.1','simple-git','mysql','reply','http','push','6LXXskO','./lib/passport','originalname','Usuario\x20no\x20encontrado.','La\x20conexi贸n\x20a\x20la\x20base\x20de\x20datos\x20fue\x20rechazada.','addRemote','connectionRejected','./router/authentication','Error\x20al\x20verificar\x20usuario:','login-from-render','\x20Error\x20verificando\x20actualizaciones:','stack','./keys','database','PROTOCOL_CONNECTION_LOST','dev','desktop','some','privateNotifications','create_notification','privateMessage','broadcast','main','./lib/editFrom','latest','views','Usuario\x20autenticado\x20con\x20茅xito.','478652lXdKLb','type_membresy','path','getTheFirstTenNotifications','answer-from-login-render','activation.html','node-machine-id','pack_company','then','emit','edplus.sql','node-persist','Error\x20al\x20agregar\x20el\x20repositorio\x20remoto','/main','Error\x20al\x20actualizar\x20el\x20UUID\x20del\x20dispositivo:','Token\x20encontrado\x20y\x20activo.','Nueva\x20notificaci贸n:','fetch','morgan','companyId','ER_CON_COUNT_ERROR','\x20Nueva\x20versi贸n\x20encontrada,\x20actualizando...','public','La\x20conexi贸n\x20a\x20la\x20base\x20de\x20datos\x20fue\x20cerrada.','Error\x20verificando\x20actualizaciones:\x20','70991lJtArl','passport','single','ready','Se\x20ha\x20descargado\x20una\x20nueva\x20versi贸n.\x20Reinicia\x20la\x20aplicaci贸n\x20para\x20aplicar\x20los\x20cambios.','maximize','bcrypt','Repositorio\x20remoto\x20configurado\x20correctamente','getFullYear','showMessageBoxSync','El\x20token\x20no\x20est谩\x20activo\x20o\x20no\x20existe.','\x0a\x20\x20\x20\x20\x20\x20\x20\x20UPDATE\x20pagos\x20\x0a\x20\x20\x20\x20\x20\x20\x20\x20SET\x20device_id\x20=\x20?\x20,\x20active\x20=\x20false\x0a\x20\x20\x20\x20\x20\x20\x20\x20WHERE\x20token\x20=\x20?\x0a\x20\x20\x20\x20','.hbs','Conexi贸n\x20a\x20la\x20base\x20de\x20datos\x20exitosa\x20MYSQL.','./router/links/app','query','company','installDate','layouts','Contrase帽a\x20incorrecta.','Mensaje\x20enviado\x20con\x20茅xito','./router/links/store','reset','connect-pg-simple','./router/links/prescription','PORT','code','multer','Fecha\x20de\x20instalaci贸n\x20existente:','SELECT\x201\x20FROM\x20pg_database\x20WHERE\x20datname\x20=\x20\x27edplus\x27','error','./router/links/ceo','window-all-closed','device_id','newNotification','electron','Este\x20usuario\x20ya\x20tiene\x20un\x20TOKEN\x20registrado\x20en\x20un\x20equipo.','disconnect','activation_date','Pool','Ups,\x20parece\x20que\x20ya\x20est谩s\x20conectado\x20en\x20otro\x20dispositivo.','pull','7784400ZZxoaj','hash','util','express-handlebars','filter','\x20La\x20base\x20de\x20datos\x20EDPLUS\x20ya\x20existe,\x20no\x20se\x20cre贸\x20nuevamente.','loadFile','0000-00-00','static','release','postgres','./router','sendMessageToUser','\x0a\x20\x20\x20\x20\x20\x20\x20\x20SELECT\x20token,\x20type_membresy,\x20activation_date\x20,\x20device_id\x0a\x20\x20\x20\x20\x20\x20\x20\x20FROM\x20pagos\x20\x0a\x20\x20\x20\x20\x20\x20\x20\x20WHERE\x20token\x20=\x20?\x0a\x20\x20\x20\x20','\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20UPDATE\x20users\x20\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20SET\x20activation_date\x20=\x20?\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20WHERE\x20token\x20=\x20?\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20','urlencoded','warning','appendFileSync','session','relaunch','https://github.com/EduardoMartinez68/VERSIONES_PLUS','send_new_message','/links','CREATE\x20DATABASE\x20edplus','token','193.203.166.165','Error\x20al\x20verificar\x20el\x20token:','answer-from-login-render-token','env','port','http://localhost:','1281294tePsMi','Bobesponja48*','initialize','\x0a\x20\x20\x20\x20\x20\x20\x20\x20SELECT\x20token,\x20type_membresy,\x20password\x20AS\x20hashedPassword,\x20activation_date\x20\x0a\x20\x20\x20\x20\x20\x20\x20\x20FROM\x20users\x20\x0a\x20\x20\x20\x20\x20\x20\x20\x20WHERE\x20email\x20=\x20?\x0a\x20\x20\x20\x20','Tu\x20demo\x20de\x2030\x20d铆as\x20ha\x20expirado.\x20Por\x20favor,\x20compra\x20la\x20versi贸n\x20completa\x20y\x20sigue\x20creciendo\x20con\x20ED\x20PLUS\x20.','8ckeyXT','installDemo','messageStatus','pack_branch','family','\x0a\x20\x20\x20\x20\x20\x20\x20\x20SELECT\x20*\x20FROM\x20pagos\x20\x0a\x20\x20\x20\x20\x20\x20\x20\x20WHERE\x20token\x20=\x20?\x0a\x20\x20\x20\x20','./router/links','compare','use','toISOString','uuid','origin','ECONNREFUSED','hashedPassword','installToken','loadURL','user','Fecha\x20de\x20instalaci贸n\x20guardada:','this_email_exist','theUserIsConnect','\x20Error\x20ejecutando\x20SQL:','./router/links/CRM','\x27.\x20Int茅ntalo\x20de\x20nuevo.\x20','1280285RqcnwC','setFullYear','u995592926_bestpoint','./services/chat.js','IPv4','json','createPool','log','--hard','\x20SQL\x20ejecutado\x20correctamente','Datos\x20actualizados\x20con\x20茅xito.\x20Cierra\x20y\x20vuelve\x20a\x20abrir\x20el\x20programa\x20','connection','./router/links/boutique','map','Demo\x20Expirada','HEAD','./lib/system','./router/links/fudone','info','success','address','Ups,\x20parece\x20que\x20alcanzaste\x20tu\x20l铆mite\x20de\x20dispositivos\x20conectados.\x20Por\x20favor,\x20actualiza\x20tu\x20membres铆a.','\x20desconectado,\x20pero\x20no\x20estaba\x20asociado\x20a\x20ninguna\x20empresa.','init','La\x20base\x20de\x20datos\x20tiene\x20muchas\x20conexiones.','get','./lib/addFrom','join','trim','getConnection','Suscripci贸n\x20expirada.\x20Por\x20favor,\x20vuelve\x20a\x20activar\x20tu\x20membres铆a.','expirationDateOFTheToken','message','password','platform','La\x20demo\x20a煤n\x20est谩\x20activa.','username','installToken\x20eliminado','./router/links/delivery','partials','express','get_the_first_notification','preload.js','login-from-render-token','0.0.0.0','catch','\x27\x20no\x20existe\x20','locals','false','263772mAcVHT','utf8','3ukNbNi','./router/links/branch','split'];_0x303b=function(){return _0x142c25;};return _0x303b();}const os=require('os');function getLocalIP(){const _0xe1b0b1=_0x1432aa,_0x3bb396=os['networkInterfaces']();for(let _0x55abd8 in _0x3bb396){for(let _0x41b8ab=0x0;_0x41b8ab<_0x3bb396[_0x55abd8][_0xe1b0b1(0xe2)];_0x41b8ab++){const _0x1fe261=_0x3bb396[_0x55abd8][_0x41b8ab];if(_0x1fe261[_0xe1b0b1(0x171)]===_0xe1b0b1(0xa8)&&!_0x1fe261['internal'])return _0x1fe261[_0xe1b0b1(0xb8)];}}return _0xe1b0b1(0xe5);}const mysql=require(_0x1432aa(0xe7)),{promisify}=require(_0x1432aa(0x14b)),pool=mysql[_0x1432aa(0xaa)]({'host':_0x1432aa(0x162),'user':_0x1432aa(0xa6),'password':_0x1432aa(0x169),'database':_0x1432aa(0xa6),'waitForConnections':!![],'connectionLimit':0xa,'queueLimit':0x0});pool[_0x1432aa(0xc1)]((_0x2c8882,_0x224e2e)=>{const _0x5d1e8e=_0x1432aa;_0x2c8882&&(_0x2c8882['code']===_0x5d1e8e(0xf9)&&console[_0x5d1e8e(0x13d)](_0x5d1e8e(0x11d)),_0x2c8882[_0x5d1e8e(0x139)]===_0x5d1e8e(0x11a)&&console[_0x5d1e8e(0x13d)](_0x5d1e8e(0xbc)),_0x2c8882[_0x5d1e8e(0x139)]===_0x5d1e8e(0x99)&&console[_0x5d1e8e(0x13d)](_0x5d1e8e(0xef)));_0x224e2e&&(_0x224e2e[_0x5d1e8e(0x152)](),console[_0x5d1e8e(0xab)](_0x5d1e8e(0x12c)));return;}),pool[_0x1432aa(0x12e)]=promisify(pool[_0x1432aa(0x12e)]);let mainWindow,activationWindow,loginWindow;const createMainWindow=()=>{const _0x57bcbd=_0x1432aa;mainWindow=new BrowserWindow({'width':0x320,'height':0x258}),mainWindow[_0x57bcbd(0x124)](),mainWindow[_0x57bcbd(0x9c)](_0x57bcbd(0x167)+serverExpress[_0x57bcbd(0xbd)](_0x57bcbd(0x166)));},createMainWindowRegister=()=>{const _0x47f8ec=_0x1432aa;loginWindow=new BrowserWindow({'width':0x320,'height':0x258,'parent':mainWindow,'webPreferences':{'preload':path[_0x47f8ec(0xbf)](__dirname,_0x47f8ec(0xce)),'nodeIntegration':!![],'contextIsolation':![]}}),loginWindow[_0x47f8ec(0x124)](),loginWindow[_0x47f8ec(0x14f)](path[_0x47f8ec(0xbf)](__dirname,_0x47f8ec(0x10b)));},{machineIdSync}=require(_0x1432aa(0x10c)),deviceId=machineIdSync();ipcMain['on'](_0x1432aa(0xcf),async(_0x42b49c,_0x2029eb)=>{const _0x9d2e8e=_0x1432aa,_0x1816b4=_0x2029eb['token'],_0xfba582=await see_if_exist_this_token_in_the_database_of_the_web(_0x1816b4);if(_0xfba582['token']){let _0x1cfb45=!![];_0xfba582['uuid']&&(_0xfba582[_0x9d2e8e(0x97)]!==deviceId&&(_0xfba582[_0x9d2e8e(0xc4)]=_0x9d2e8e(0x143),_0x1cfb45=![])),_0x1cfb45&&(await save_the_uui_of_the_user_in_the_database(_0x1816b4,deviceId)&&(await initialize_token(_0x1816b4),await create_expiration_date_of_the_token(_0xfba582[_0x9d2e8e(0x145)]),_0xfba582[_0x9d2e8e(0xc4)]=_0x9d2e8e(0xae)));}_0x42b49c['reply'](_0x9d2e8e(0x164),_0xfba582[_0x9d2e8e(0xc4)]);}),ipcMain['on'](_0x1432aa(0xf4),async(_0x23b099,_0x2ec59d)=>{const _0x209c83=_0x1432aa,_0x499f51=_0x2ec59d[_0x209c83(0xc8)],_0x1b424f=_0x2ec59d[_0x209c83(0xc5)],_0x575384=await see_if_exist_this_user_in_the_database_of_the_web(_0x499f51,_0x1b424f);if(_0x575384[_0x209c83(0x161)]){if(_0x575384[_0x209c83(0x97)]&&_0x575384[_0x209c83(0x97)]!==deviceId)_0x575384['message']='Este\x20usuario\x20ya\x20tiene\x20un\x20TOKEN\x20registrado\x20en\x20un\x20equipo.';else{if(await save_the_uui_of_the_user_in_the_database(_0x499f51,deviceId)){}}}_0x23b099[_0x209c83(0xe8)](_0x209c83(0x10a),_0x575384[_0x209c83(0xc4)]);});const bcrypt=require(_0x1432aa(0x125));async function see_if_exist_this_user_in_the_database_of_the_web(_0x29f3dd,_0x582ef0){const _0x5d8406=_0x1432aa,_0x23743d=_0x5d8406(0x16b);try{const _0x136302=await pool[_0x5d8406(0x12e)](_0x23743d,[_0x29f3dd]);if(_0x136302[_0x5d8406(0xe2)]===0x0)return{'token':null,'message':_0x5d8406(0xee)};const _0x85507a=_0x136302[0x0],_0x2c9d4d=await bcrypt[_0x5d8406(0x174)](_0x582ef0,_0x85507a[_0x5d8406(0x9a)]);if(!_0x2c9d4d)return{'token':null,'message':_0x5d8406(0x132)};const _0xdfe370=new Date();_0xdfe370[_0x5d8406(0xa5)](_0xdfe370[_0x5d8406(0x127)]()-0x1);if(new Date(_0x85507a['activation_date'])<_0xdfe370)return{'token':null,'message':_0x5d8406(0xc2)};return console[_0x5d8406(0xab)](_0x5d8406(0x105)),{'token':_0x85507a[_0x5d8406(0x161)],'type_membresy':_0x85507a[_0x5d8406(0x107)],'message':_0x5d8406(0x105)};}catch(_0x307f9a){return console[_0x5d8406(0x13d)](_0x5d8406(0xf3),_0x307f9a),{'token':null};}}async function see_if_exist_this_token_in_the_database_of_the_web(_0x4863cb){const _0x3c069b=_0x1432aa,_0x240a4a=_0x3c069b(0x156);try{const _0x525b4e=await pool[_0x3c069b(0x12e)](_0x240a4a,[_0x4863cb]);if(_0x525b4e[_0x3c069b(0xe2)]===0x0)return{'token':null,'message':'Token\x20no\x20encontrado.'};const _0x4681b3=_0x525b4e[0x0],_0x565a96=new Date();_0x565a96[_0x3c069b(0xa5)](_0x565a96[_0x3c069b(0x127)]()-0x1);if(_0x4681b3[_0x3c069b(0x145)]!='0000-00-00'&&new Date(_0x4681b3[_0x3c069b(0x145)])<_0x565a96)return{'token':null,'message':_0x3c069b(0xc2)};if(_0x4681b3[_0x3c069b(0x145)]===_0x3c069b(0x150)){const _0xeac4f6=new Date();_0xeac4f6['setFullYear'](_0xeac4f6[_0x3c069b(0x127)]()+0x1);const _0x58e161=_0x3c069b(0x157);await pool[_0x3c069b(0x12e)](_0x58e161,[_0xeac4f6[_0x3c069b(0x96)]()['split']('T')[0x0],_0x4681b3[_0x3c069b(0x161)]]),_0x4681b3[_0x3c069b(0x145)]=_0xeac4f6;}return console[_0x3c069b(0xab)]('Usuario\x20autenticado\x20con\x20茅xito.'),{'token':!![],'type_membresy':_0x4681b3[_0x3c069b(0x107)],'uuid':_0x4681b3[_0x3c069b(0x140)],'activation_date':_0x4681b3['activation_date'],'message':_0x3c069b(0x105)};}catch(_0x10fd1e){return console['error'](_0x3c069b(0xf3),_0x10fd1e),{'token':null};}}async function save_the_uui_of_the_user_in_the_database(_0x590199,_0x5dddcd){const _0x1016ca=_0x1432aa,_0x83e473=_0x1016ca(0x12a);try{const _0x25eae0=await pool[_0x1016ca(0x12e)](_0x83e473,[_0x5dddcd,_0x590199]);return!![];}catch(_0x1f8650){return console[_0x1016ca(0x13d)](_0x1016ca(0x114),_0x1f8650),![];}}function _0x4640(_0x115c17,_0x2f3de0){const _0x303b58=_0x303b();return _0x4640=function(_0x464074,_0x36f34e){_0x464074=_0x464074-0x96;let _0x20c130=_0x303b58[_0x464074];return _0x20c130;},_0x4640(_0x115c17,_0x2f3de0);}async function verificarTokenActivo(){const _0xa8dd9=_0x1432aa,_0x5cfed5=_0xa8dd9(0x172);try{const _0x10c40f=await pool[_0xa8dd9(0x12e)](_0x5cfed5,[TOKEN]);return console[_0xa8dd9(0xab)](_0x10c40f[0x0]),_0x10c40f[0x0][_0xa8dd9(0xe4)]===0x1?(console['log'](_0xa8dd9(0x115)),!![]):(console[_0xa8dd9(0xab)](_0xa8dd9(0x129)),![]);}catch(_0x51e79b){return console[_0xa8dd9(0x13d)](_0xa8dd9(0x163),_0x51e79b),![];}}async function actualizarToken(){const _0x306344=_0x1432aa,_0x13d8e9='\x0a\x20\x20\x20\x20\x20\x20\x20\x20UPDATE\x20pagos\x20\x0a\x20\x20\x20\x20\x20\x20\x20\x20SET\x20active\x20=\x20false\x0a\x20\x20\x20\x20\x20\x20\x20\x20WHERE\x20token\x20=\x20?\x0a\x20\x20\x20\x20';await pool[_0x306344(0x12e)](_0x13d8e9,[TOKEN]);}app['on'](_0x1432aa(0x122),async()=>{const _0x4eedf1=_0x1432aa;await check_if_exist_updates();if(thiIsADemo){await initialize_demo();if(await is_demo_expired()){dialog['showMessageBoxSync']({'type':_0x4eedf1(0x159),'title':_0x4eedf1(0xb2),'message':_0x4eedf1(0x16c)}),app[_0x4eedf1(0xdc)]();return;}}else await verify_membership_of_user()?(serverExpress['listen'](serverExpress[_0x4eedf1(0xbd)](_0x4eedf1(0x166)),_0x4eedf1(0xd0),()=>{const _0x2fe539=_0x4eedf1;console[_0x2fe539(0xab)]('Server\x20running\x20on\x20http://'+getLocalIP()+':'+serverExpress[_0x2fe539(0xbd)](_0x2fe539(0x166)));}),createMainWindow()):createMainWindowRegister();}),app['on'](_0x1432aa(0x13f),()=>{const _0x1a8c04=_0x1432aa;process[_0x1a8c04(0xc6)]!=='darwin'&&app[_0x1a8c04(0xdc)]();});