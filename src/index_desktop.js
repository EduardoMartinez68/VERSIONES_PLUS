const _0x206251=_0x189f;(function(_0x380b86,_0x33169f){const _0x545c05=_0x189f,_0x2bd8da=_0x380b86();while(!![]){try{const _0x3e561b=-parseInt(_0x545c05(0x11d))/0x1+parseInt(_0x545c05(0xa7))/0x2+-parseInt(_0x545c05(0x13b))/0x3+parseInt(_0x545c05(0xac))/0x4*(parseInt(_0x545c05(0x82))/0x5)+parseInt(_0x545c05(0xe7))/0x6*(-parseInt(_0x545c05(0xfa))/0x7)+-parseInt(_0x545c05(0x130))/0x8+parseInt(_0x545c05(0x9f))/0x9*(parseInt(_0x545c05(0x12a))/0xa);if(_0x3e561b===_0x33169f)break;else _0x2bd8da['push'](_0x2bd8da['shift']());}catch(_0x12c15c){_0x2bd8da['push'](_0x2bd8da['shift']());}}}(_0x1722,0xb7e40));const system=require(_0x206251(0x131)),thiIsADemo=![],{app,BrowserWindow,dialog,ipcMain}=require(_0x206251(0x99)),express=require(_0x206251(0xe2)),morgan=require('morgan'),{engine}=require(_0x206251(0xf5)),multer=require('multer'),flash=require(_0x206251(0x9d)),session=require(_0x206251(0x7e)),passport=require(_0x206251(0xbe)),{database}=require(_0x206251(0x10c)),{v4:uuid}=require(_0x206251(0xb9)),path=require(_0x206251(0x103)),{RecaptchaV2}=require(_0x206251(0x90)),nodePersist=require('node-persist');nodePersist['init']({'dir':path[_0x206251(0xab)](__dirname,_0x206251(0x84))});async function initialize_software(){const _0x431b96=_0x206251,_0x448557=await nodePersist[_0x431b96(0x146)]('installToken');!_0x448557&&await nodePersist[_0x431b96(0xed)](_0x431b96(0x9e),_0x431b96(0x92));}async function the_software_have_a_token(){const _0x66ad59=_0x206251,_0x20df18=await nodePersist[_0x66ad59(0x146)](_0x66ad59(0x9e));if(!_0x20df18)return![];return _0x20df18!=_0x66ad59(0x92);}async function create_expiration_date_of_the_token(_0x5c1b15){const _0x416c19=_0x206251,_0x3a18eb=await nodePersist[_0x416c19(0x146)](_0x416c19(0xbd));!_0x3a18eb&&await nodePersist['set']('expirationDateOFTheToken',_0x5c1b15);}async function token_expired(){const _0x53babe=_0x206251,_0x234973=await nodePersist[_0x53babe(0x146)](_0x53babe(0xbd)),_0x493721=new Date(_0x234973),_0x26ca8b=new Date();return _0x26ca8b<_0x493721;}async function remove_install_token(){const _0x1bdf77=_0x206251;await nodePersist['removeItem'](_0x1bdf77(0x9e)),await nodePersist['removeItem']('expirationDateOFTheToken'),console['log'](_0x1bdf77(0x95));}async function initialize_token(_0x1d79d1){const _0x271f18=_0x206251,_0x136957=await nodePersist[_0x271f18(0x146)](_0x271f18(0x9e));await nodePersist['set'](_0x271f18(0x9e),_0x1d79d1);}async function initialize_demo(){const _0x217dc9=_0x206251,_0x1cc810=await nodePersist[_0x217dc9(0x146)](_0x217dc9(0xd6));if(!_0x1cc810){const _0x24c110=new Date()['toISOString']();await nodePersist['set'](_0x217dc9(0x128),_0x24c110),console['log'](_0x217dc9(0xa3),_0x24c110);}else console[_0x217dc9(0x147)](_0x217dc9(0x122),_0x1cc810);}async function is_demo_expired(){const _0x7cb18d=_0x206251,_0x48f5c8=await nodePersist['get'](_0x7cb18d(0xd6));if(!_0x48f5c8)return console[_0x7cb18d(0x147)]('No\x20se\x20encontró\x20la\x20fecha\x20de\x20instalación'),![];const _0x5498a6=new Date(_0x48f5c8),_0x1e0795=new Date(),_0x7713a7=_0x1e0795-_0x5498a6,_0x238213=_0x7713a7/(0x3e8*0x3c*0x3c*0x18);return _0x238213>0x1e?(console['log']('La\x20demo\x20ha\x20expirado.'),!![]):(console['log'](_0x7cb18d(0xa1)),![]);}async function this_software_count_have_a_count(){}async function the_user_have_a_token_active_in_the_database(){}async function verify_membership_of_user(){initialize_software();if(await the_software_have_a_token())return await token_expired();return![];}const simpleGit=require('simple-git'),fs=require('fs'),repoPath=path[_0x206251(0xab)](__dirname),git=simpleGit(repoPath),repoURL=_0x206251(0xe3),remote='origin';git['addRemote'](remote,repoURL)[_0x206251(0x139)](()=>{const _0x1d0025=_0x206251;console[_0x1d0025(0x147)]('Repositorio\x20remoto\x20configurado\x20correctamente');})[_0x206251(0x97)](_0x48839f=>{const _0x1c9c1f=_0x206251;console[_0x1c9c1f(0xdc)](_0x1c9c1f(0x132),_0x48839f);});async function check_if_exist_updates(){const _0x31a045=_0x206251;try{await git[_0x31a045(0x11b)](remote),await git[_0x31a045(0xa9)]([_0x31a045(0x86),'--assume-unchanged','src/public/img/uploads/']),await git[_0x31a045(0xe1)]();const _0x128c9e=await git[_0x31a045(0x147)](['origin/main','-1']),_0x3afbeb=await git[_0x31a045(0x147)]([_0x31a045(0x8d),'-1']);_0x128c9e[_0x31a045(0x111)][_0x31a045(0x9a)]!==_0x3afbeb[_0x31a045(0x111)]['hash']?(console[_0x31a045(0x147)](_0x31a045(0xe5)),await git['pull'](_0x31a045(0xdf),_0x31a045(0xd2),{'--rebase':null}),dialog[_0x31a045(0x11f)]({'type':'info','title':_0x31a045(0x144),'message':_0x31a045(0xb7),'buttons':[_0x31a045(0x142)]}),app[_0x31a045(0x110)](),app[_0x31a045(0x98)]()):console[_0x31a045(0x147)]('✅\x20La\x20aplicación\x20ya\x20está\x20actualizada.'),await git[_0x31a045(0xe1)]([_0x31a045(0xbf)]);}catch(_0x11d777){console[_0x31a045(0xdc)](_0x31a045(0x83),_0x11d777);}}function _0x1722(){const _0x2a8667=['Bobesponja48*','use','push','./router/links/desktop','express-handlebars','Demo\x20Expirada','La\x20conexión\x20a\x20la\x20base\x20de\x20datos\x20fue\x20rechazada.','registerUser','env','1189531olJiqN','127.0.0.1','session','token','PORT','./router/links/subscription','initialize','./router/links/cashCut','pack_company','path','success','Socket\x20','address','No\x20pudimos\x20enviar\x20el\x20mensaje\x20al\x20usuario\x20\x27','originalname','Contraseña\x20incorrecta.','views','desktop','./keys','loadURL','message','length','relaunch','latest','\x27.\x20Inténtalo\x20de\x20nuevo.\x20😳','family','filter','connection','public/img/uploads','activation.html','sendNotification','get_max_employee_of_this_company','ECONNREFUSED','fetch','type_membresy','786319iDjSDe','Error\x20al\x20verificar\x20el\x20token:','showMessageBoxSync','this_email_exist','Mensaje\x20enviado\x20con\x20éxito.\x20👌','Fecha\x20de\x20instalación\x20existente:','\x27\x20no\x20existe\x20🤔','device_id','Mensaje\x20enviado\x20con\x20éxito','companyId','FudSession','installDate','El\x20usuario\x20\x27','24945890TeRvVT','Suscripción\x20expirada.\x20Por\x20favor,\x20vuelve\x20a\x20activar\x20tu\x20membresía.','connect-pg-simple','./router/links/CRM','./router/links/branch','./router/links/orders','10704512VtjKmm','./lib/system','Error\x20al\x20agregar\x20el\x20repositorio\x20remoto','Token\x20no\x20encontrado.','Usuario\x20autenticado\x20con\x20éxito.','engine','active','.hbs','./router/links/ceo','then','toISOString','3993234nrEiRr','Ups,\x20parece\x20que\x20alcanzaste\x20tu\x20límite\x20de\x20dispositivos\x20conectados.\x20Por\x20favor,\x20actualiza\x20tu\x20membresía.','privateMessage','window-all-closed','warning','\x20desconectado,\x20pero\x20no\x20estaba\x20asociado\x20a\x20ninguna\x20empresa.','\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20UPDATE\x20users\x20\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20SET\x20activation_date\x20=\x20?\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20WHERE\x20token\x20=\x20?\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20','Reiniciar\x20ahora','Error\x20al\x20actualizar\x20el\x20UUID\x20del\x20dispositivo:','Actualización','mysql','get','log','reply','express-session','0.0.0.0','activation_date','public','7285GBhFSq','❌\x20Error\x20verificando\x20actualizaciones:','data','some','update-index','\x0a\x20\x20\x20\x20\x20\x20\x20\x20SELECT\x20token,\x20type_membresy,\x20password\x20AS\x20hashedPassword,\x20activation_date\x20\x0a\x20\x20\x20\x20\x20\x20\x20\x20FROM\x20users\x20\x0a\x20\x20\x20\x20\x20\x20\x20\x20WHERE\x20email\x20=\x20?\x0a\x20\x20\x20\x20','partials','./services/chat.js','./lib/passport','IPv4','./lib/editFrom','HEAD','port','sendNotificationToUser','express-recaptcha','Pool','false','login-from-render-token','Este\x20usuario\x20ya\x20tiene\x20un\x20TOKEN\x20registrado\x20en\x20un\x20equipo.','installToken\x20eliminado','password','catch','quit','electron','hash','Error\x20al\x20verificar\x20usuario:','PROTOCOL_CONNECTION_LOST','connect-flash','installToken','9Fhmahq','ER_CON_COUNT_ERROR','La\x20demo\x20aún\x20está\x20activa.','/links','Fecha\x20de\x20instalación\x20guardada:','getFullYear','./router/links/boutique','theUserIsConnect','2775138oyuQGN','privateNotifications','raw','config','join','2296CpLKXi','./router/links/app','Datos\x20actualizados\x20con\x20éxito.\x20Cierra\x20y\x20vuelve\x20a\x20abrir\x20el\x20programa\x20😄','\x0a\x20\x20\x20\x20\x20\x20\x20\x20SELECT\x20*\x20FROM\x20pagos\x20\x0a\x20\x20\x20\x20\x20\x20\x20\x20WHERE\x20token\x20=\x20?\x0a\x20\x20\x20\x20','http','Nueva\x20notificación:','Token\x20encontrado\x20y\x20activo.','login-from-render','./lib/handlebars','Ups,\x20parece\x20que\x20ya\x20estás\x20conectado\x20en\x20otro\x20dispositivo.','connectionRejected','Se\x20ha\x20descargado\x20una\x20nueva\x20versión.\x20Reinicia\x20la\x20aplicación\x20para\x20aplicar\x20los\x20cambios.','create_notification','uuid','createServer','./router/links','query','expirationDateOFTheToken','passport','pop','./router/links/fudone','dev','\x0a\x20\x20\x20\x20\x20\x20\x20\x20UPDATE\x20pagos\x20\x0a\x20\x20\x20\x20\x20\x20\x20\x20SET\x20device_id\x20=\x20?\x20,\x20active\x20=\x20false\x0a\x20\x20\x20\x20\x20\x20\x20\x20WHERE\x20token\x20=\x20?\x0a\x20\x20\x20\x20','emit','messageStatus','0000-00-00','\x0a\x20\x20\x20\x20\x20\x20\x20\x20SELECT\x20token,\x20type_membresy,\x20activation_date\x20,\x20device_id\x0a\x20\x20\x20\x20\x20\x20\x20\x20FROM\x20pagos\x20\x0a\x20\x20\x20\x20\x20\x20\x20\x20WHERE\x20token\x20=\x20?\x0a\x20\x20\x20\x20','loadFile','get_the_first_notification','image','view\x20engine','platform','preload.js','newNotification','maximize','broadcast','u995592926_bestpoint','send_new_message','main','\x27\x20no\x20existe.\x20🤔','darwin','static','installDemo','release','bcrypt','company','networkInterfaces','Este\x20email\x20\x27','error','userId','setFullYear','origin','locals','stash','express','https://github.com/EduardoMartinez68/VERSIONES_PLUS','answer-from-login-render-token','🔄\x20Nueva\x20versión\x20encontrada,\x20actualizando...','user','18oOCKTs','node-machine-id','http://localhost:','La\x20conexión\x20a\x20la\x20base\x20de\x20datos\x20fue\x20cerrada.','canSend','\x0a\x20\x20\x20\x20\x20\x20\x20\x20UPDATE\x20pagos\x20\x0a\x20\x20\x20\x20\x20\x20\x20\x20SET\x20active\x20=\x20false\x0a\x20\x20\x20\x20\x20\x20\x20\x20WHERE\x20token\x20=\x20?\x0a\x20\x20\x20\x20','set','compare','./router','code'];_0x1722=function(){return _0x2a8667;};return _0x1722();}const serverExpress=express();require(_0x206251(0x8a)),require(_0x206251(0x8c)),serverExpress[_0x206251(0xed)](_0x206251(0x8e),process[_0x206251(0xf9)][_0x206251(0xfe)]||0xfa0),serverExpress[_0x206251(0xed)](_0x206251(0x10a),path[_0x206251(0xab)](__dirname,_0x206251(0x10a))),serverExpress[_0x206251(0x135)]('.hbs',engine({'defaultLayout':_0x206251(0xd2),'layoutsDir':path[_0x206251(0xab)](serverExpress[_0x206251(0x146)](_0x206251(0x10a)),'layouts'),'partialsDir':path['join'](serverExpress[_0x206251(0x146)]('views'),_0x206251(0x88)),'extname':_0x206251(0x137),'helpers':require(_0x206251(0xb4))})),serverExpress[_0x206251(0xed)](_0x206251(0xca),'.hbs'),require('dotenv')[_0x206251(0xaa)]();const {APP_PG_USER,APP_PG_HOST,APP_PG_DATABASE,APP_PG_PASSWORD,APP_PG_PORT,TOKEN}=process[_0x206251(0xf9)],pg=require('pg'),pgPool=new pg[(_0x206251(0x91))]({'user':APP_PG_USER,'host':APP_PG_HOST,'database':APP_PG_DATABASE,'password':APP_PG_PASSWORD,'port':APP_PG_PORT});serverExpress[_0x206251(0xf2)](session({'secret':_0x206251(0x127),'resave':![],'saveUninitialized':![],'store':new(require(_0x206251(0x12c))(session))({'pool':pgPool,'tableName':_0x206251(0xfc)})})),serverExpress[_0x206251(0xf2)](flash()),serverExpress[_0x206251(0xf2)](morgan(_0x206251(0xc1))),serverExpress[_0x206251(0xf2)](express['urlencoded']({'extended':![]})),serverExpress[_0x206251(0xf2)](express['json']()),serverExpress[_0x206251(0xf2)](passport[_0x206251(0x100)]()),serverExpress[_0x206251(0xf2)](passport['session']());const storage=multer['diskStorage']({'destination':path['join'](__dirname,_0x206251(0x116)),'filename':(_0x19b95c,_0x5e449a,_0x5870e0,_0x1afac9)=>{const _0x2995d0=_0x206251;_0x5870e0(null,uuid()+path['extname'](_0x5e449a[_0x2995d0(0x108)]));}});serverExpress['use'](multer({'storage':storage})['single'](_0x206251(0xc9))),serverExpress[_0x206251(0xf2)]((_0x1fe247,_0x22bf5e,_0x3d737a)=>{const _0x13442b=_0x206251;serverExpress['locals'][_0x13442b(0x104)]=_0x1fe247['flash'](_0x13442b(0x104)),serverExpress[_0x13442b(0xe0)]['message']=_0x1fe247['flash'](_0x13442b(0x10e)),serverExpress['locals'][_0x13442b(0xe6)]=_0x1fe247[_0x13442b(0xe6)],serverExpress[_0x13442b(0xe0)][_0x13442b(0xd9)]=_0x1fe247['company'],serverExpress['locals'][_0x13442b(0x102)]=0x0,serverExpress[_0x13442b(0xe0)]['pack_branch']=0x0,_0x3d737a();});const http=require(_0x206251(0xb0)),server=http[_0x206251(0xba)](serverExpress),{Server}=require('socket.io'),io=new Server(server),users={},connectedEmployees={},companyLimitsCache={},chat=require(_0x206251(0x89));io['on'](_0x206251(0x115),async _0x42c308=>{const _0x592507=_0x206251;_0x42c308['on'](_0x592507(0xf8),async(_0x594985,_0x4d1d4a)=>{const _0x53dab7=_0x592507,_0x2b2cbe=connectedEmployees[_0x4d1d4a]||[],_0x213388=_0x2b2cbe[_0x53dab7(0x85)](_0xebc715=>_0xebc715[_0x53dab7(0xdd)]===_0x594985);if(_0x213388){_0x42c308[_0x53dab7(0xc3)]('connectionRejected',_0x53dab7(0xb5));return;}if(system!=_0x53dab7(0x10b)){!companyLimitsCache[_0x4d1d4a]&&(companyLimitsCache[_0x4d1d4a]=await chat[_0x53dab7(0x119)](_0x4d1d4a));const _0x3cf1aa=companyLimitsCache[_0x4d1d4a];if(_0x2b2cbe[_0x53dab7(0x10f)]>=_0x3cf1aa){_0x42c308['emit'](_0x53dab7(0xb6),_0x53dab7(0x13c));return;}}_0x42c308[_0x53dab7(0x126)]=_0x4d1d4a,_0x2b2cbe[_0x53dab7(0xf3)]({'userId':_0x594985,'socketId':_0x42c308['id']}),connectedEmployees[_0x4d1d4a]=_0x2b2cbe;const _0x9275c0=await chat[_0x53dab7(0xc8)](_0x594985,0xa);io['to'](_0x594985)[_0x53dab7(0xc3)](_0x53dab7(0xa8),{'notifications':_0x9275c0});});async function _0x3a4d65(_0x466b3e){const _0x337f8c=_0x592507,_0x42f986=users[_0x466b3e];let _0x3f7153=_0x42f986;!_0x42f986&&(_0x3f7153=await chat[_0x337f8c(0x120)](toUserId));const _0x26ce08={'canSend':_0x3f7153,'theUserIsConnect':_0x42f986};return _0x26ce08;}_0x42c308['on'](_0x592507(0x8f),async({userEmail:_0x2aecd2,toUserEmail:_0x1e6b5d,message:_0x22a313})=>{const _0x3f6261=_0x592507,_0x142e33=await _0x3a4d65(_0x1e6b5d);_0x142e33[_0x3f6261(0xeb)]?await chat[_0x3f6261(0xb8)](_0x2aecd2,_0x1e6b5d,_0x22a313)?(_0x142e33[_0x3f6261(0xa6)]&&io['to'](recipientSocketId)['emit'](_0x3f6261(0x13d),{'userId':userId,'message':_0x22a313}),_0x42c308[_0x3f6261(0xc3)](_0x3f6261(0xc4),{'success':!![],'message':_0x3f6261(0x121)})):_0x42c308['emit'](_0x3f6261(0xc4),{'success':![],'message':_0x3f6261(0x107)+_0x1e6b5d+_0x3f6261(0x112)}):_0x42c308[_0x3f6261(0xc3)](_0x3f6261(0xc4),{'success':![],'message':_0x3f6261(0x129)+_0x1e6b5d+_0x3f6261(0xd3)});}),_0x42c308['on']('getTheFirstTenNotifications',async({userEmail:_0x3ce348})=>{const _0x29b208=_0x592507,_0x7e6032=await chat['get_the_first_notification'](_0x3ce348,0xa);io['to'](recipientSocketId)[_0x29b208(0xc3)](_0x29b208(0xa8),{'notifications':_0x7e6032});}),_0x42c308['on']('sendMessageToUser',async({userId:_0x36fcac,toUserId:_0x1e6743,message:_0x5ed005})=>{const _0x42a4b9=_0x592507,_0x379e0a=users[_0x1e6743];let _0x672c33=_0x379e0a;!_0x379e0a&&(_0x672c33=await chat[_0x42a4b9(0x120)](_0x1e6743));if(_0x672c33){const _0x26e32e=await chat['create_new_chat'](_0x36fcac,_0x1e6743);await chat[_0x42a4b9(0xd1)](_0x26e32e,_0x36fcac,_0x5ed005)&&(_0x379e0a&&io['to'](_0x379e0a)['emit'](_0x42a4b9(0x13d),{'userId':_0x36fcac,'message':_0x5ed005})),_0x42c308[_0x42a4b9(0xc3)]('messageStatus',{'success':!![],'message':_0x42a4b9(0x125)});}else _0x42c308[_0x42a4b9(0xc3)](_0x42a4b9(0xc4),{'success':![],'message':_0x42a4b9(0xdb)+_0x1e6743+_0x42a4b9(0x123)});}),_0x42c308['on']('disconnect',()=>{const _0x5dbb15=_0x592507,{companyId:_0x592a1f}=_0x42c308;_0x592a1f&&connectedEmployees[_0x592a1f]?(connectedEmployees[_0x592a1f]=connectedEmployees[_0x592a1f][_0x5dbb15(0x114)](_0x5315b3=>_0x5315b3['socketId']!==_0x42c308['id']),connectedEmployees[_0x592a1f][_0x5dbb15(0x10f)]===0x0&&delete connectedEmployees[_0x592a1f]):console['log'](_0x5dbb15(0x105)+_0x42c308['id']+_0x5dbb15(0x140));}),_0x42c308['on'](_0x592507(0x118),_0x2f831c=>{const _0x5afd75=_0x592507;console[_0x5afd75(0x147)](_0x5afd75(0xb1),_0x2f831c),_0x42c308[_0x5afd75(0xcf)][_0x5afd75(0xc3)](_0x5afd75(0xcd),_0x2f831c);});});const companyName=_0x206251(0xa2);serverExpress[_0x206251(0xf2)](require(_0x206251(0xef))),serverExpress[_0x206251(0xf2)](require('./router/authentication')),serverExpress[_0x206251(0xf2)](companyName,require(_0x206251(0xbb))),serverExpress[_0x206251(0xf2)](companyName,require(_0x206251(0xc0))),serverExpress[_0x206251(0xf2)](companyName,require(_0x206251(0x138))),serverExpress[_0x206251(0xf2)](companyName,require(_0x206251(0x12e))),serverExpress[_0x206251(0xf2)](companyName,require(_0x206251(0xff))),serverExpress[_0x206251(0xf2)](companyName,require('./router/links/store')),serverExpress['use'](companyName,require('./router/links/delivery')),serverExpress['use'](companyName,require(_0x206251(0xad))),serverExpress[_0x206251(0xf2)](companyName,require(_0x206251(0x12d))),serverExpress[_0x206251(0xf2)](companyName,require(_0x206251(0xf4))),serverExpress[_0x206251(0xf2)](companyName,require(_0x206251(0xa5))),serverExpress[_0x206251(0xf2)](companyName,require(_0x206251(0x101))),serverExpress[_0x206251(0xf2)](companyName,require(_0x206251(0x12f))),serverExpress[_0x206251(0xf2)](require('./lib/addFrom')),serverExpress[_0x206251(0xf2)](express[_0x206251(0xd5)](path[_0x206251(0xab)](__dirname,_0x206251(0x81))));const os=require('os');function getLocalIP(){const _0x1c70f6=_0x206251,_0x15cfe8=os[_0x1c70f6(0xda)]();for(let _0x20d6fb in _0x15cfe8){for(let _0x551aff=0x0;_0x551aff<_0x15cfe8[_0x20d6fb][_0x1c70f6(0x10f)];_0x551aff++){const _0x2c1d2c=_0x15cfe8[_0x20d6fb][_0x551aff];if(_0x2c1d2c[_0x1c70f6(0x113)]===_0x1c70f6(0x8b)&&!_0x2c1d2c['internal'])return _0x2c1d2c[_0x1c70f6(0x106)];}}return _0x1c70f6(0xfb);}function _0x189f(_0x3855ca,_0x42f2a1){const _0x1722b2=_0x1722();return _0x189f=function(_0x189f62,_0x1f2d51){_0x189f62=_0x189f62-0x7e;let _0x1dbf1c=_0x1722b2[_0x189f62];return _0x1dbf1c;},_0x189f(_0x3855ca,_0x42f2a1);}const mysql=require(_0x206251(0x145)),{promisify}=require('util'),pool=mysql['createPool']({'host':'193.203.166.165','user':'u995592926_bestpoint','password':_0x206251(0xf1),'database':_0x206251(0xd0),'waitForConnections':!![],'connectionLimit':0xa,'queueLimit':0x0});pool['getConnection']((_0x14c69e,_0xf6d09c)=>{const _0x354709=_0x206251;_0x14c69e&&(_0x14c69e[_0x354709(0xf0)]===_0x354709(0x9c)&&console[_0x354709(0xdc)](_0x354709(0xea)),_0x14c69e[_0x354709(0xf0)]===_0x354709(0xa0)&&console[_0x354709(0xdc)]('La\x20base\x20de\x20datos\x20tiene\x20muchas\x20conexiones.'),_0x14c69e[_0x354709(0xf0)]===_0x354709(0x11a)&&console[_0x354709(0xdc)](_0x354709(0xf7)));_0xf6d09c&&(_0xf6d09c[_0x354709(0xd7)](),console[_0x354709(0x147)]('Conexión\x20a\x20la\x20base\x20de\x20datos\x20exitosa\x20MYSQL.'));return;}),pool[_0x206251(0xbc)]=promisify(pool[_0x206251(0xbc)]);let mainWindow,activationWindow,loginWindow;const createMainWindow=()=>{const _0x5cda91=_0x206251;mainWindow=new BrowserWindow({'width':0x320,'height':0x258}),mainWindow['maximize'](),mainWindow[_0x5cda91(0x10d)](_0x5cda91(0xe9)+serverExpress[_0x5cda91(0x146)]('port'));},createMainWindowRegister=()=>{const _0x54e1a6=_0x206251;loginWindow=new BrowserWindow({'width':0x320,'height':0x258,'parent':mainWindow,'webPreferences':{'preload':path[_0x54e1a6(0xab)](__dirname,_0x54e1a6(0xcc)),'nodeIntegration':!![],'contextIsolation':![]}}),loginWindow[_0x54e1a6(0xce)](),loginWindow[_0x54e1a6(0xc7)](path[_0x54e1a6(0xab)](__dirname,_0x54e1a6(0x117)));},{machineIdSync}=require(_0x206251(0xe8)),deviceId=machineIdSync();ipcMain['on'](_0x206251(0x93),async(_0x4a5915,_0x3102c2)=>{const _0x1e8d4c=_0x206251,_0x3adfbe=_0x3102c2[_0x1e8d4c(0xfd)],_0x1405eb=await see_if_exist_this_token_in_the_database_of_the_web(_0x3adfbe);if(_0x1405eb[_0x1e8d4c(0xfd)]){let _0xc4640d=!![];_0x1405eb[_0x1e8d4c(0xb9)]&&(_0x1405eb['uuid']!==deviceId&&(_0x1405eb[_0x1e8d4c(0x10e)]='Este\x20usuario\x20ya\x20tiene\x20un\x20TOKEN\x20registrado\x20en\x20un\x20equipo.',_0xc4640d=![])),_0xc4640d&&(await save_the_uui_of_the_user_in_the_database(_0x3adfbe,deviceId)&&(await initialize_token(_0x3adfbe),await create_expiration_date_of_the_token(_0x1405eb['activation_date']),_0x1405eb[_0x1e8d4c(0x10e)]=_0x1e8d4c(0xae)));}_0x4a5915['reply'](_0x1e8d4c(0xe4),_0x1405eb[_0x1e8d4c(0x10e)]);}),ipcMain['on'](_0x206251(0xb3),async(_0x4c078b,_0x57d16c)=>{const _0x4fe6d2=_0x206251,_0x682fda=_0x57d16c['username'],_0x424c95=_0x57d16c[_0x4fe6d2(0x96)],_0x3c5766=await see_if_exist_this_user_in_the_database_of_the_web(_0x682fda,_0x424c95);if(_0x3c5766[_0x4fe6d2(0xfd)]){if(_0x3c5766[_0x4fe6d2(0xb9)]&&_0x3c5766['uuid']!==deviceId)_0x3c5766['message']=_0x4fe6d2(0x94);else{if(await save_the_uui_of_the_user_in_the_database(_0x682fda,deviceId)){}}}_0x4c078b[_0x4fe6d2(0x148)]('answer-from-login-render',_0x3c5766[_0x4fe6d2(0x10e)]);});const bcrypt=require(_0x206251(0xd8));async function see_if_exist_this_user_in_the_database_of_the_web(_0x11f77a,_0x1ad88a){const _0x1107ce=_0x206251,_0x3ee04c=_0x1107ce(0x87);try{const _0xe9fdb5=await pool[_0x1107ce(0xbc)](_0x3ee04c,[_0x11f77a]);if(_0xe9fdb5[_0x1107ce(0x10f)]===0x0)return{'token':null,'message':'Usuario\x20no\x20encontrado.'};const _0x2aaee0=_0xe9fdb5[0x0],_0xd7c945=await bcrypt[_0x1107ce(0xee)](_0x1ad88a,_0x2aaee0['hashedPassword']);if(!_0xd7c945)return{'token':null,'message':_0x1107ce(0x109)};const _0x57d9df=new Date();_0x57d9df[_0x1107ce(0xde)](_0x57d9df['getFullYear']()-0x1);if(new Date(_0x2aaee0[_0x1107ce(0x80)])<_0x57d9df)return{'token':null,'message':_0x1107ce(0x12b)};return console['log'](_0x1107ce(0x134)),{'token':_0x2aaee0[_0x1107ce(0xfd)],'type_membresy':_0x2aaee0[_0x1107ce(0x11c)],'message':_0x1107ce(0x134)};}catch(_0x32cc4a){return console[_0x1107ce(0xdc)](_0x1107ce(0x9b),_0x32cc4a),{'token':null};}}async function see_if_exist_this_token_in_the_database_of_the_web(_0x85d54e){const _0x3ba449=_0x206251,_0x38f667=_0x3ba449(0xc6);try{const _0x55d1d4=await pool['query'](_0x38f667,[_0x85d54e]);if(_0x55d1d4[_0x3ba449(0x10f)]===0x0)return{'token':null,'message':_0x3ba449(0x133)};const _0x3191a0=_0x55d1d4[0x0],_0x198b90=new Date();_0x198b90['setFullYear'](_0x198b90[_0x3ba449(0xa4)]()-0x1);if(_0x3191a0['activation_date']!=_0x3ba449(0xc5)&&new Date(_0x3191a0['activation_date'])<_0x198b90)return{'token':null,'message':_0x3ba449(0x12b)};if(_0x3191a0['activation_date']==='0000-00-00'){const _0x28d65e=new Date();_0x28d65e[_0x3ba449(0xde)](_0x28d65e[_0x3ba449(0xa4)]()+0x1);const _0x386437=_0x3ba449(0x141);await pool[_0x3ba449(0xbc)](_0x386437,[_0x28d65e[_0x3ba449(0x13a)]()['split']('T')[0x0],_0x3191a0[_0x3ba449(0xfd)]]),_0x3191a0[_0x3ba449(0x80)]=_0x28d65e;}return console[_0x3ba449(0x147)](_0x3ba449(0x134)),{'token':!![],'type_membresy':_0x3191a0[_0x3ba449(0x11c)],'uuid':_0x3191a0[_0x3ba449(0x124)],'activation_date':_0x3191a0['activation_date'],'message':'Usuario\x20autenticado\x20con\x20éxito.'};}catch(_0x4c4ab7){return console['error'](_0x3ba449(0x9b),_0x4c4ab7),{'token':null};}}async function save_the_uui_of_the_user_in_the_database(_0xff5f7f,_0x1c583e){const _0x5b18d5=_0x206251,_0x58286f=_0x5b18d5(0xc2);try{const _0x302fae=await pool[_0x5b18d5(0xbc)](_0x58286f,[_0x1c583e,_0xff5f7f]);return!![];}catch(_0x448c8f){return console[_0x5b18d5(0xdc)](_0x5b18d5(0x143),_0x448c8f),![];}}async function verificarTokenActivo(){const _0x109b42=_0x206251,_0x3d723d=_0x109b42(0xaf);try{const _0x152afb=await pool['query'](_0x3d723d,[TOKEN]);return console[_0x109b42(0x147)](_0x152afb[0x0]),_0x152afb[0x0][_0x109b42(0x136)]===0x1?(console['log'](_0x109b42(0xb2)),!![]):(console['log']('El\x20token\x20no\x20está\x20activo\x20o\x20no\x20existe.'),![]);}catch(_0xe43e8e){return console[_0x109b42(0xdc)](_0x109b42(0x11e),_0xe43e8e),![];}}async function actualizarToken(){const _0x2cb99f=_0x206251,_0x2d673a=_0x2cb99f(0xec);await pool[_0x2cb99f(0xbc)](_0x2d673a,[TOKEN]);}app['on']('ready',async()=>{const _0x26d716=_0x206251;await check_if_exist_updates();if(thiIsADemo){await initialize_demo();if(await is_demo_expired()){dialog[_0x26d716(0x11f)]({'type':_0x26d716(0x13f),'title':_0x26d716(0xf6),'message':'Tu\x20demo\x20de\x2030\x20días\x20ha\x20expirado.\x20Por\x20favor,\x20compra\x20la\x20versión\x20completa\x20y\x20sigue\x20creciendo\x20con\x20ED\x20PLUS\x20🚀.'}),app[_0x26d716(0x98)]();return;}}else await verify_membership_of_user()?(serverExpress['listen'](serverExpress[_0x26d716(0x146)](_0x26d716(0x8e)),_0x26d716(0x7f),()=>{const _0x5d6d0f=_0x26d716;console[_0x5d6d0f(0x147)]('Server\x20running\x20on\x20http://'+getLocalIP()+':'+serverExpress[_0x5d6d0f(0x146)]('port'));}),createMainWindow()):createMainWindowRegister();}),app['on'](_0x206251(0x13e),()=>{const _0xa6bc15=_0x206251;process[_0xa6bc15(0xcb)]!==_0xa6bc15(0xd4)&&app[_0xa6bc15(0x98)]();});