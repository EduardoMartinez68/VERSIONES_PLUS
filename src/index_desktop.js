const _0x24179c=_0x34d9;(function(_0x180743,_0x24f324){const _0x292d15=_0x34d9,_0x24f314=_0x180743();while(!![]){try{const _0x597a6e=-parseInt(_0x292d15(0x17e))/0x1*(-parseInt(_0x292d15(0x155))/0x2)+parseInt(_0x292d15(0x176))/0x3*(-parseInt(_0x292d15(0x22f))/0x4)+parseInt(_0x292d15(0x230))/0x5+-parseInt(_0x292d15(0x1aa))/0x6*(parseInt(_0x292d15(0x180))/0x7)+-parseInt(_0x292d15(0x223))/0x8+-parseInt(_0x292d15(0x168))/0x9*(-parseInt(_0x292d15(0x1f6))/0xa)+parseInt(_0x292d15(0x183))/0xb*(parseInt(_0x292d15(0x1ba))/0xc);if(_0x597a6e===_0x24f324)break;else _0x24f314['push'](_0x24f314['shift']());}catch(_0x2079d8){_0x24f314['push'](_0x24f314['shift']());}}}(_0x4706,0x58845));const system=require(_0x24179c(0x229)),thiIsADemo=![],{app,BrowserWindow,dialog,ipcMain}=require('electron'),express=require(_0x24179c(0x173)),morgan=require('morgan'),{engine}=require(_0x24179c(0x1ea)),multer=require(_0x24179c(0x23a)),flash=require(_0x24179c(0x151)),session=require(_0x24179c(0x1ee)),passport=require(_0x24179c(0x166)),{database}=require(_0x24179c(0x16b)),{v4:uuid}=require(_0x24179c(0x17c)),path=require(_0x24179c(0x19b)),{RecaptchaV2}=require(_0x24179c(0x1d6)),nodePersist=require(_0x24179c(0x170));nodePersist['init']({'dir':path[_0x24179c(0x178)](__dirname,_0x24179c(0x1b8))});async function initialize_software(){const _0x394afd=_0x24179c,_0x4d6d27=await nodePersist[_0x394afd(0x219)](_0x394afd(0x22e));!_0x4d6d27&&await nodePersist[_0x394afd(0x1db)]('installToken',_0x394afd(0x179));}async function the_software_have_a_token(){const _0xbd662a=_0x24179c,_0x5a14fc=await nodePersist[_0xbd662a(0x219)]('installToken');if(!_0x5a14fc)return![];return _0x5a14fc!=_0xbd662a(0x179);}async function create_expiration_date_of_the_token(_0x6b01f){const _0x5b7918=_0x24179c,_0x31f2d8=await nodePersist['get'](_0x5b7918(0x1a5));!_0x31f2d8&&await nodePersist[_0x5b7918(0x1db)](_0x5b7918(0x1a5),_0x6b01f);}async function token_expired(){const _0x1ca1ba=_0x24179c,_0x4419f1=await nodePersist[_0x1ca1ba(0x219)](_0x1ca1ba(0x1a5)),_0x1697aa=new Date(_0x4419f1),_0x57befd=new Date();return _0x57befd<_0x1697aa;}async function remove_install_token(){const _0x50d6b0=_0x24179c;await nodePersist['removeItem']('installToken'),await nodePersist[_0x50d6b0(0x1b4)](_0x50d6b0(0x1a5)),console[_0x50d6b0(0x1a1)](_0x50d6b0(0x18c));}async function initialize_token(_0x32e490){const _0x2bb6a2=_0x24179c,_0xa04b7a=await nodePersist['get'](_0x2bb6a2(0x22e));await nodePersist[_0x2bb6a2(0x1db)](_0x2bb6a2(0x22e),_0x32e490);}async function initialize_demo(){const _0x592e75=_0x24179c,_0x5c5c1a=await nodePersist[_0x592e75(0x219)](_0x592e75(0x19c));if(!_0x5c5c1a){const _0x287f43=new Date()['toISOString']();await nodePersist['set'](_0x592e75(0x153),_0x287f43),console[_0x592e75(0x1a1)]('Fecha\x20de\x20instalación\x20guardada:',_0x287f43);}else console['log'](_0x592e75(0x185),_0x5c5c1a);}async function is_demo_expired(){const _0x304060=_0x24179c,_0x3e7384=await nodePersist[_0x304060(0x219)](_0x304060(0x19c));if(!_0x3e7384)return console[_0x304060(0x1a1)](_0x304060(0x1bd)),![];const _0x5004ed=new Date(_0x3e7384),_0x4be4f2=new Date(),_0x3b4994=_0x4be4f2-_0x5004ed,_0xe75000=_0x3b4994/(0x3e8*0x3c*0x3c*0x18);return _0xe75000>0x1e?(console[_0x304060(0x1a1)](_0x304060(0x1fa)),!![]):(console[_0x304060(0x1a1)](_0x304060(0x1d2)),![]);}async function this_software_count_have_a_count(){}async function the_user_have_a_token_active_in_the_database(){}async function verify_membership_of_user(){initialize_software();if(await the_software_have_a_token())return await token_expired();return![];}const simpleGit=require(_0x24179c(0x1f3)),fs=require('fs'),repoPath=path[_0x24179c(0x178)](__dirname),git=simpleGit(repoPath),repoURL=_0x24179c(0x1e6),remote=_0x24179c(0x1b5);git[_0x24179c(0x22b)](remote,repoURL)[_0x24179c(0x165)](()=>{const _0x324d51=_0x24179c;console[_0x324d51(0x1a1)](_0x324d51(0x1cd));})[_0x24179c(0x209)](_0x29dca2=>{const _0x234901=_0x24179c;console['error'](_0x234901(0x204),_0x29dca2);});async function check_if_exist_updates(){const _0x839b16=_0x24179c;try{await git[_0x839b16(0x216)](remote);const _0xf00d2e=await git[_0x839b16(0x1a1)]([remote+_0x839b16(0x225),'-1']),_0x6a9556=await git[_0x839b16(0x1a1)]([_0x839b16(0x19a),'-1']);_0xf00d2e[_0x839b16(0x1b0)][_0x839b16(0x214)]!==_0x6a9556[_0x839b16(0x1b0)]['hash']?(console['log']('🔄\x20Nueva\x20versión\x20encontrada,\x20actualizando...'),await git[_0x839b16(0x1d0)]([_0x839b16(0x164),_0x839b16(0x15b),remote+_0x839b16(0x225)]),await git['pull'](_0x839b16(0x1b5),_0x839b16(0x215),{'--rebase':null}),dialog[_0x839b16(0x1e4)]({'type':_0x839b16(0x18e),'title':_0x839b16(0x169),'message':_0x839b16(0x15f),'buttons':[_0x839b16(0x234)]}),app[_0x839b16(0x15d)](),app['quit']()):console['log']('✅\x20La\x20aplicación\x20ya\x20está\x20actualizada.');}catch(_0x50cdb5){const _0x547c76=path[_0x839b16(0x178)](__dirname,_0x839b16(0x21d));fs[_0x839b16(0x17a)](_0x547c76,_0x839b16(0x163)+_0x50cdb5[_0x839b16(0x1af)]+'\x0a'+_0x50cdb5[_0x839b16(0x206)]+'\x0a\x0a','utf8'),console[_0x839b16(0x211)](_0x839b16(0x21b),_0x50cdb5),dialog['showMessageBoxSync']({'type':_0x839b16(0x221),'title':_0x839b16(0x238),'message':'Error\x20verificando\x20actualizaciones:\x20'+_0x50cdb5[_0x839b16(0x1af)]+'\x0a'+_0x50cdb5['stack']+'\x0a\x0a'});}}const serverExpress=express();function _0x4706(){const _0x137cb7=['5kVqCmu','./router/links/fudone','10045MdTYsJ','push','getTheFirstTenNotifications','22mqxGaK','ready','Fecha\x20de\x20instalación\x20existente:','Mensaje\x20enviado\x20con\x20éxito.\x20👌','./router/links/subscription','env','✅\x20SQL\x20ejecutado\x20correctamente','send_new_message','Pool','installToken\x20eliminado','map','info','📦\x20Base\x20de\x20datos\x20EDPLUS\x20creada','username','Suscripción\x20expirada.\x20Por\x20favor,\x20vuelve\x20a\x20activar\x20tu\x20membresía.','locals','reply','loadFile','companyId','originalname','./lib/passport','./router/links/prescription','./router/links/desktop','HEAD','path','installDemo','update_data_of_the_token_in_this_drive','./router/links/ceo','Contraseña\x20incorrecta.','expiration_date','log','filter','diskStorage','connectionRejected','expirationDateOFTheToken','privateMessage','127.0.0.1','./services/chat.js','ENTRE','1122esHXxn','release','./router/links/CRM','this_email_exist','views','message','latest','dev','setDate','\x0a\x0a\x0a','removeItem','origin','./lib/editFrom','use','data','createServer','1166988tuhROQ','application/json','config','No\x20se\x20encontró\x20la\x20fecha\x20de\x20instalación','get_the_first_notification','engine','dotenv','port','Datos\x20actualizados\x20con\x20éxito.\x20Cierra\x20y\x20vuelve\x20a\x20abrir\x20el\x20programa\x20😄','session','getFullYear','privateNotifications','./router/links','activation.html','database','extname','messageStatus','📥\x20Petición\x20recibida\x20para\x20obtener\x20el\x20deviceId','flash','Repositorio\x20remoto\x20configurado\x20correctamente','json','family','raw','PORT','La\x20demo\x20aún\x20está\x20activa.','edplus.sql','query','postgres','express-recaptcha','./lib/addFrom','FudSession','Nueva\x20notificación:','split','set','📂\x20La\x20base\x20de\x20datos\x20EDPLUS\x20ya\x20existe,\x20no\x20se\x20creó\x20nuevamente.','login-from-render-token','Usuario\x20no\x20encontrado.','Mensaje\x20enviado\x20con\x20éxito','listen','canSend','answer-from-login-render','active','showMessageBoxSync','0.0.0.0','https://github.com/EduardoMartinez68/VERSIONES_PLUS','axios','emit','socketId','express-handlebars','./router/links/app','platform','Ocurrio\x20un\x20error\x20al\x20verificar\x20tu\x20Token\x20en\x20el\x20ultimo\x20paso,\x20intentalo\x20otra\x20vez.','express-session','loadURL','Demo\x20Expirada','newNotification','❌\x20Error\x20ejecutando\x20SQL:','simple-git','success','getDate','40qGqYiG','login-from-render','networkInterfaces','.hbs','La\x20demo\x20ha\x20expirado.','public/img/uploads','./router/authentication','Usuario\x20autenticado\x20con\x20éxito.','./router/links/branch','partials','Este\x20usuario\x20no\x20tiene\x20ningun\x20Token\x20activo.','readFileSync','darwin','node-machine-id','Error\x20al\x20agregar\x20el\x20repositorio\x20remoto','length','stack','utf8','image','catch','CREATE\x20DATABASE\x20edplus','connect-pg-simple','compare','https://www.pluspuntodeventa.com/api/','public','./router','token','error','bcrypt','get_max_employee_of_this_company','hash','main','fetch','socket.io','\x20desconectado,\x20pero\x20no\x20estaba\x20asociado\x20a\x20ninguna\x20empresa.','get','single','❌\x20Error\x20verificando\x20actualizaciones:','Token\x20no\x20encontrado.','logfile.txt','urlencoded','/links','0000-00-00','warning','\x0a\x20\x20\x20\x20\x20\x20\x20\x20SELECT\x20*\x20FROM\x20pagos\x20\x0a\x20\x20\x20\x20\x20\x20\x20\x20WHERE\x20token\x20=\x20?\x0a\x20\x20\x20\x20','4657632bEWXKc','address','/main','\x27\x20no\x20existe.\x20🤔','answer_get_my_deviceId','post','./lib/system','http','addRemote','maximize','IPv4','installToken','5844ffeLsL','2000345rEYKZH','sendMessageToUser','Tu\x20demo\x20de\x2030\x20días\x20ha\x20expirado.\x20Por\x20favor,\x20compra\x20la\x20versión\x20completa\x20y\x20sigue\x20creciendo\x20con\x20ED\x20PLUS\x20🚀.','initialize','Reiniciar\x20ahora','Este\x20usuario\x20ya\x20tiene\x20un\x20TOKEN\x20registrado\x20en\x20un\x20equipo.','sendNotification','password','Error\x20verificando\x20actualizaciones!','Ups,\x20parece\x20que\x20alcanzaste\x20tu\x20límite\x20de\x20dispositivos\x20conectados.\x20Por\x20favor,\x20actualiza\x20tu\x20membresía.','multer','Ups,\x20parece\x20que\x20ya\x20estás\x20conectado\x20en\x20otro\x20dispositivo.','connect-flash','setFullYear','installDate','answer-from-login-render-token','259062HrbihT','user','get_information_of_the_user.php','some','SELECT\x201\x20FROM\x20pg_database\x20WHERE\x20datname\x20=\x20\x27edplus\x27','Este\x20email\x20\x27','--hard','Error\x20al\x20verificar\x20usuario:','relaunch','No\x20pudimos\x20enviar\x20el\x20mensaje\x20al\x20usuario\x20\x27','Se\x20ha\x20descargado\x20una\x20nueva\x20versión.\x20Reinicia\x20la\x20aplicación\x20para\x20aplicar\x20los\x20cambios.','see_if_exist_this_token_in_the_database_of_the_web.php','type_membresy','get_data_of_the_token_with_the_user_id.php','Error\x20verificando\x20actualizaciones:\x20','reset','then','passport','window-all-closed','854937prAOca','Actualización','hashedPassword','./keys','./router/links/cashCut','\x27\x20no\x20existe\x20🤔','sendNotificationToUser','toISOString','node-persist','get_my_deviceId','quit','express','activation_date','\x0a\x20\x20\x20\x20\x20\x20\x20\x20UPDATE\x20pagos\x20\x0a\x20\x20\x20\x20\x20\x20\x20\x20SET\x20active\x20=\x20false\x0a\x20\x20\x20\x20\x20\x20\x20\x20WHERE\x20token\x20=\x20?\x0a\x20\x20\x20\x20','840wAOghO','El\x20token\x20no\x20está\x20activo\x20o\x20no\x20existe.','join','false','appendFileSync','Error\x20al\x20verificar\x20el\x20token:','uuid','connection'];_0x4706=function(){return _0x137cb7;};return _0x4706();}require(_0x24179c(0x197)),require(_0x24179c(0x1b6)),serverExpress[_0x24179c(0x1db)](_0x24179c(0x1c1),process[_0x24179c(0x188)][_0x24179c(0x1d1)]||0xfa0),serverExpress['set'](_0x24179c(0x1ae),path[_0x24179c(0x178)](__dirname,_0x24179c(0x1ae))),serverExpress[_0x24179c(0x1bf)](_0x24179c(0x1f9),engine({'defaultLayout':_0x24179c(0x215),'layoutsDir':path[_0x24179c(0x178)](serverExpress[_0x24179c(0x219)](_0x24179c(0x1ae)),'layouts'),'partialsDir':path['join'](serverExpress[_0x24179c(0x219)](_0x24179c(0x1ae)),_0x24179c(0x1ff)),'extname':_0x24179c(0x1f9),'helpers':require('./lib/handlebars')})),serverExpress['set']('view\x20engine',_0x24179c(0x1f9)),require(_0x24179c(0x1c0))[_0x24179c(0x1bc)]();const {APP_PG_USER,APP_PG_HOST,APP_PG_DATABASE,APP_PG_PASSWORD,APP_PG_PORT,TOKEN}=process[_0x24179c(0x188)],pg=require('pg'),adminPool=new pg[(_0x24179c(0x18b))]({'user':APP_PG_USER,'host':APP_PG_HOST,'password':APP_PG_PASSWORD,'port':APP_PG_PORT,'database':_0x24179c(0x1d5)}),importSQLFile=async _0x29db71=>{const _0x514b3f=_0x24179c,_0x240bd9=path[_0x514b3f(0x178)](__dirname,_0x514b3f(0x1c8),_0x514b3f(0x1d3)),_0x46e764=fs[_0x514b3f(0x201)](_0x240bd9,'utf8'),_0x51730a=_0x46e764[_0x514b3f(0x1da)](/;\s*$/m)[_0x514b3f(0x18d)](_0x377c5d=>_0x377c5d['trim']())[_0x514b3f(0x1a2)](_0x3a998a=>_0x3a998a['length']>0x0),_0x7d9f73=await _0x29db71['connect']();try{for(const _0x552284 of _0x51730a){await _0x7d9f73[_0x514b3f(0x1d4)](_0x552284);}console[_0x514b3f(0x1a1)](_0x514b3f(0x189));}catch(_0x49fbb7){console['error'](_0x514b3f(0x1f2),_0x49fbb7[_0x514b3f(0x1af)]);}finally{_0x7d9f73[_0x514b3f(0x1ab)]();}},createDatabase=async()=>{const _0x538fc6=_0x24179c,_0x13ce4a=await adminPool[_0x538fc6(0x1d4)](_0x538fc6(0x159));_0x13ce4a['rowCount']===0x0?(await adminPool[_0x538fc6(0x1d4)](_0x538fc6(0x20a)),importSQLFile(adminPool),console[_0x538fc6(0x1a1)](_0x538fc6(0x18f))):console[_0x538fc6(0x1a1)](_0x538fc6(0x1dc));};createDatabase();const pgPool=new pg[(_0x24179c(0x18b))]({'user':APP_PG_USER,'host':APP_PG_HOST,'database':APP_PG_DATABASE,'password':APP_PG_PASSWORD,'port':APP_PG_PORT});serverExpress[_0x24179c(0x1b7)](session({'secret':_0x24179c(0x1d8),'resave':![],'saveUninitialized':![],'store':new(require(_0x24179c(0x20b))(session))({'pool':pgPool,'tableName':_0x24179c(0x1c3)})})),serverExpress[_0x24179c(0x1b7)](flash()),serverExpress[_0x24179c(0x1b7)](morgan(_0x24179c(0x1b1))),serverExpress[_0x24179c(0x1b7)](express[_0x24179c(0x21e)]({'extended':![]})),serverExpress[_0x24179c(0x1b7)](express[_0x24179c(0x1ce)]()),serverExpress[_0x24179c(0x1b7)](passport[_0x24179c(0x233)]()),serverExpress[_0x24179c(0x1b7)](passport[_0x24179c(0x1c3)]());const storage=multer[_0x24179c(0x1a3)]({'destination':path[_0x24179c(0x178)](__dirname,_0x24179c(0x1fb)),'filename':(_0x4c22bc,_0x5e1da4,_0x5215fc,_0x23b019)=>{const _0x3c7c4d=_0x24179c;_0x5215fc(null,uuid()+path[_0x3c7c4d(0x1c9)](_0x5e1da4[_0x3c7c4d(0x196)]));}});serverExpress[_0x24179c(0x1b7)](multer({'storage':storage})[_0x24179c(0x21a)](_0x24179c(0x208))),serverExpress[_0x24179c(0x1b7)]((_0x55c803,_0x2d5561,_0x53647c)=>{const _0x4ed5e7=_0x24179c;serverExpress[_0x4ed5e7(0x192)][_0x4ed5e7(0x1f4)]=_0x55c803[_0x4ed5e7(0x1cc)](_0x4ed5e7(0x1f4)),serverExpress[_0x4ed5e7(0x192)][_0x4ed5e7(0x1af)]=_0x55c803[_0x4ed5e7(0x1cc)](_0x4ed5e7(0x1af)),serverExpress[_0x4ed5e7(0x192)][_0x4ed5e7(0x156)]=_0x55c803[_0x4ed5e7(0x156)],serverExpress[_0x4ed5e7(0x192)]['company']=_0x55c803['company'],serverExpress[_0x4ed5e7(0x192)]['pack_company']=0x0,serverExpress[_0x4ed5e7(0x192)]['pack_branch']=0x0,_0x53647c();});const http=require(_0x24179c(0x22a)),server=http[_0x24179c(0x1b9)](serverExpress),{Server}=require(_0x24179c(0x217)),io=new Server(server),users={},connectedEmployees={},companyLimitsCache={},chat=require(_0x24179c(0x1a8));function _0x34d9(_0x114a12,_0x4e6881){const _0x470631=_0x4706();return _0x34d9=function(_0x34d93c,_0x699eff){_0x34d93c=_0x34d93c-0x151;let _0x2612a6=_0x470631[_0x34d93c];return _0x2612a6;},_0x34d9(_0x114a12,_0x4e6881);}io['on'](_0x24179c(0x17d),async _0x313eeb=>{const _0x28b7c7=_0x24179c;_0x313eeb['on']('registerUser',async(_0x339033,_0x2b915f)=>{const _0x2452e8=_0x34d9,_0xb8898a=connectedEmployees[_0x2b915f]||[],_0x220bde=_0xb8898a[_0x2452e8(0x158)](_0x4bd975=>_0x4bd975['userId']===_0x339033);if(_0x220bde){_0x313eeb[_0x2452e8(0x1e8)](_0x2452e8(0x1a4),_0x2452e8(0x23b));return;}if(system!='desktop'){!companyLimitsCache[_0x2b915f]&&(companyLimitsCache[_0x2b915f]=await chat[_0x2452e8(0x213)](_0x2b915f));const _0x506de7=companyLimitsCache[_0x2b915f];if(_0xb8898a[_0x2452e8(0x205)]>=_0x506de7){_0x313eeb[_0x2452e8(0x1e8)](_0x2452e8(0x1a4),_0x2452e8(0x239));return;}}_0x313eeb[_0x2452e8(0x195)]=_0x2b915f,_0xb8898a[_0x2452e8(0x181)]({'userId':_0x339033,'socketId':_0x313eeb['id']}),connectedEmployees[_0x2b915f]=_0xb8898a;const _0x234b40=await chat[_0x2452e8(0x1be)](_0x339033,0xa);io['to'](_0x339033)['emit'](_0x2452e8(0x1c5),{'notifications':_0x234b40});});async function _0x3b7d91(_0x2439d0){const _0x489ad2=_0x34d9,_0x40b65a=users[_0x2439d0];let _0x51cfe0=_0x40b65a;!_0x40b65a&&(_0x51cfe0=await chat[_0x489ad2(0x1ad)](toUserId));const _0x33bca6={'canSend':_0x51cfe0,'theUserIsConnect':_0x40b65a};return _0x33bca6;}_0x313eeb['on'](_0x28b7c7(0x16e),async({userEmail:_0xa135b9,toUserEmail:_0x4ac2e7,message:_0x2d6905})=>{const _0x1e6911=_0x28b7c7,_0x37b251=await _0x3b7d91(_0x4ac2e7);_0x37b251[_0x1e6911(0x1e1)]?await chat['create_notification'](_0xa135b9,_0x4ac2e7,_0x2d6905)?(_0x37b251['theUserIsConnect']&&io['to'](recipientSocketId)[_0x1e6911(0x1e8)](_0x1e6911(0x1a6),{'userId':userId,'message':_0x2d6905}),_0x313eeb['emit'](_0x1e6911(0x1ca),{'success':!![],'message':_0x1e6911(0x186)})):_0x313eeb[_0x1e6911(0x1e8)](_0x1e6911(0x1ca),{'success':![],'message':_0x1e6911(0x15e)+_0x4ac2e7+'\x27.\x20Inténtalo\x20de\x20nuevo.\x20😳'}):_0x313eeb[_0x1e6911(0x1e8)]('messageStatus',{'success':![],'message':'El\x20usuario\x20\x27'+_0x4ac2e7+_0x1e6911(0x226)});}),_0x313eeb['on'](_0x28b7c7(0x182),async({userEmail:_0x17e058})=>{const _0xe6ce93=_0x28b7c7,_0x1ec686=await chat['get_the_first_notification'](_0x17e058,0xa);io['to'](recipientSocketId)[_0xe6ce93(0x1e8)]('privateNotifications',{'notifications':_0x1ec686});}),_0x313eeb['on'](_0x28b7c7(0x231),async({userId:_0x295811,toUserId:_0x32f1de,message:_0x44009b})=>{const _0x503c21=_0x28b7c7,_0x40ed17=users[_0x32f1de];let _0x11ed9b=_0x40ed17;!_0x40ed17&&(_0x11ed9b=await chat[_0x503c21(0x1ad)](_0x32f1de));if(_0x11ed9b){const _0x27b897=await chat['create_new_chat'](_0x295811,_0x32f1de);await chat[_0x503c21(0x18a)](_0x27b897,_0x295811,_0x44009b)&&(_0x40ed17&&io['to'](_0x40ed17)[_0x503c21(0x1e8)]('privateMessage',{'userId':_0x295811,'message':_0x44009b})),_0x313eeb[_0x503c21(0x1e8)](_0x503c21(0x1ca),{'success':!![],'message':_0x503c21(0x1df)});}else _0x313eeb[_0x503c21(0x1e8)](_0x503c21(0x1ca),{'success':![],'message':_0x503c21(0x15a)+_0x32f1de+_0x503c21(0x16d)});}),_0x313eeb['on']('disconnect',()=>{const _0x9451b5=_0x28b7c7,{companyId:_0x3848d8}=_0x313eeb;_0x3848d8&&connectedEmployees[_0x3848d8]?(connectedEmployees[_0x3848d8]=connectedEmployees[_0x3848d8][_0x9451b5(0x1a2)](_0x1a1682=>_0x1a1682[_0x9451b5(0x1e9)]!==_0x313eeb['id']),connectedEmployees[_0x3848d8][_0x9451b5(0x205)]===0x0&&delete connectedEmployees[_0x3848d8]):console[_0x9451b5(0x1a1)]('Socket\x20'+_0x313eeb['id']+_0x9451b5(0x218));}),_0x313eeb['on'](_0x28b7c7(0x236),_0x355e60=>{const _0x5b7733=_0x28b7c7;console[_0x5b7733(0x1a1)](_0x5b7733(0x1d9),_0x355e60),_0x313eeb['broadcast']['emit'](_0x5b7733(0x1f1),_0x355e60);});});const companyName=_0x24179c(0x21f);serverExpress[_0x24179c(0x1b7)](require(_0x24179c(0x20f))),serverExpress[_0x24179c(0x1b7)](require(_0x24179c(0x1fc))),serverExpress[_0x24179c(0x1b7)](companyName,require(_0x24179c(0x1c6))),serverExpress[_0x24179c(0x1b7)](companyName,require(_0x24179c(0x17f))),serverExpress[_0x24179c(0x1b7)](companyName,require(_0x24179c(0x19e))),serverExpress[_0x24179c(0x1b7)](companyName,require(_0x24179c(0x1fe))),serverExpress[_0x24179c(0x1b7)](companyName,require(_0x24179c(0x187))),serverExpress[_0x24179c(0x1b7)](companyName,require('./router/links/store')),serverExpress[_0x24179c(0x1b7)](companyName,require('./router/links/delivery')),serverExpress[_0x24179c(0x1b7)](companyName,require(_0x24179c(0x1eb))),serverExpress[_0x24179c(0x1b7)](companyName,require(_0x24179c(0x1ac))),serverExpress['use'](companyName,require(_0x24179c(0x199))),serverExpress['use'](companyName,require('./router/links/boutique')),serverExpress[_0x24179c(0x1b7)](companyName,require(_0x24179c(0x16c))),serverExpress[_0x24179c(0x1b7)](companyName,require(_0x24179c(0x198))),serverExpress[_0x24179c(0x1b7)](require(_0x24179c(0x1d7))),serverExpress['use'](express['static'](path[_0x24179c(0x178)](__dirname,_0x24179c(0x20e))));const os=require('os');function getLocalIP(){const _0x17ff36=_0x24179c,_0x59658e=os[_0x17ff36(0x1f8)]();for(let _0x707848 in _0x59658e){for(let _0x4d822a=0x0;_0x4d822a<_0x59658e[_0x707848]['length'];_0x4d822a++){const _0x40e7b6=_0x59658e[_0x707848][_0x4d822a];if(_0x40e7b6[_0x17ff36(0x1cf)]===_0x17ff36(0x22d)&&!_0x40e7b6['internal'])return _0x40e7b6[_0x17ff36(0x224)];}}return _0x17ff36(0x1a7);}const axios=require(_0x24179c(0x1e7));async function get_answer_of_my_api(_0x3989ed,_0x53bee1){const _0x956a48=_0x24179c,_0x160bef=path[_0x956a48(0x178)](__dirname,_0x956a48(0x21d));fs[_0x956a48(0x17a)](_0x160bef,_0x956a48(0x1a9),_0x956a48(0x207));try{const _0x10cf0b=await axios[_0x956a48(0x228)](_0x956a48(0x20d)+_0x3989ed,_0x53bee1,{'headers':{'Content-Type':_0x956a48(0x1bb)}});return fs['appendFileSync'](_0x160bef,_0x956a48(0x163)+_0x10cf0b['data']+_0x956a48(0x1b3),'utf8'),_0x10cf0b;}catch(_0xeea5a2){return fs[_0x956a48(0x17a)](_0x160bef,_0x956a48(0x163)+_0xeea5a2[_0x956a48(0x1af)]+'\x0a'+_0xeea5a2[_0x956a48(0x206)]+'\x0a\x0a','utf8'),{'success':![],'message':'Hubo\x20un\x20error\x20al\x20hacer\x20la\x20solicitud.'};}}let mainWindow,activationWindow,loginWindow;const createMainWindow=()=>{const _0x556715=_0x24179c;mainWindow=new BrowserWindow({'width':0x320,'height':0x258}),mainWindow['maximize'](),mainWindow[_0x556715(0x1ef)]('http://localhost:'+serverExpress['get']('port'));},createMainWindowRegister=()=>{const _0x4a8663=_0x24179c;loginWindow=new BrowserWindow({'width':0x320,'height':0x258,'parent':mainWindow,'webPreferences':{'preload':path[_0x4a8663(0x178)](__dirname,'preload.js'),'nodeIntegration':!![],'contextIsolation':![]}}),loginWindow[_0x4a8663(0x22c)](),loginWindow[_0x4a8663(0x194)](path[_0x4a8663(0x178)](__dirname,_0x4a8663(0x1c7)));},{machineIdSync}=require(_0x24179c(0x203)),deviceId=machineIdSync();ipcMain['on'](_0x24179c(0x171),async _0x499fae=>{const _0x4ef249=_0x24179c;console[_0x4ef249(0x1a1)](_0x4ef249(0x1cb)),_0x499fae[_0x4ef249(0x193)](_0x4ef249(0x227),deviceId);}),ipcMain['on'](_0x24179c(0x19d),async(_0x39c6ed,_0x2ce8b6)=>{const _0x3d1e2d=_0x24179c,_0x2e2b37=_0x2ce8b6['dataToken'];await initialize_token(_0x2e2b37['token']),await create_expiration_date_of_the_token(_0x2e2b37[_0x3d1e2d(0x1a0)]);const _0x3868da=_0x3d1e2d(0x1c2);_0x39c6ed['reply']('update_data_of_the_token_in_this_drive',_0x3868da);}),ipcMain['on'](_0x24179c(0x1dd),async(_0x5ca364,_0x3e4d1c)=>{const _0x5d862b=_0x24179c,_0x26ee36=_0x3e4d1c[_0x5d862b(0x210)],_0x47f2a3=await see_if_exist_this_token_in_the_database_of_the_web(_0x26ee36);if(_0x47f2a3['token']){let _0x806bee=!![];_0x47f2a3[_0x5d862b(0x17c)]&&(_0x47f2a3['uuid']!==deviceId&&(_0x47f2a3[_0x5d862b(0x1af)]=_0x5d862b(0x235),_0x806bee=![])),_0x806bee&&(await save_the_uui_of_the_user_in_the_database(_0x26ee36,deviceId)&&(await initialize_token(_0x26ee36),await create_expiration_date_of_the_token(_0x47f2a3[_0x5d862b(0x174)]),_0x47f2a3[_0x5d862b(0x1af)]=_0x5d862b(0x1c2)));}_0x5ca364[_0x5d862b(0x193)](_0x5d862b(0x154),_0x47f2a3[_0x5d862b(0x1af)]);}),ipcMain['on'](_0x24179c(0x1f7),async(_0x2648f2,_0x4e11c3)=>{const _0x3d6fa5=_0x24179c,_0x56019a=_0x4e11c3[_0x3d6fa5(0x190)],_0x5549ea=_0x4e11c3[_0x3d6fa5(0x237)],_0x13b88b=await see_if_exist_this_user_in_the_database_of_the_web(_0x56019a,_0x5549ea);if(_0x13b88b[_0x3d6fa5(0x210)]){if(_0x13b88b[_0x3d6fa5(0x17c)]&&_0x13b88b['uuid']!==deviceId)_0x13b88b[_0x3d6fa5(0x1af)]=_0x3d6fa5(0x235);else{if(await save_the_uui_of_the_user_in_the_database(_0x56019a,deviceId)){}}}_0x2648f2[_0x3d6fa5(0x193)](_0x3d6fa5(0x1e2),_0x13b88b['message']);});const bcrypt=require(_0x24179c(0x212));async function see_if_exist_this_user_in_the_database_of_the_web(_0x417827,_0x168186){const _0x54c63c=_0x24179c;try{const _0x54ec28=await get_answer_of_my_api(_0x54c63c(0x157),{'email':_0x417827});if(!_0x54ec28[_0x54c63c(0x1b8)]['success'])return{'token':null,'message':_0x54c63c(0x1de)};const _0x399417=_0x54ec28['data'],_0x2623e5=await bcrypt[_0x54c63c(0x20c)](_0x168186,_0x399417[_0x54c63c(0x16a)]);if(!_0x2623e5)return{'token':null,'message':_0x54c63c(0x19f)};const _0x260196=await get_answer_of_my_api(_0x54c63c(0x162),{'userId':_0x399417['id']});if(_0x260196[_0x54c63c(0x1b8)][_0x54c63c(0x1f4)])return{'token':null,'message':_0x54c63c(0x200)};const _0x30fe46=_0x260196[_0x54c63c(0x1b8)],_0x4453a3=new Date();_0x4453a3[_0x54c63c(0x152)](_0x4453a3[_0x54c63c(0x1c4)]()-0x1);if(new Date(_0x399417[_0x54c63c(0x174)])<_0x4453a3)return{'token':null,'message':'Suscripción\x20expirada.\x20Por\x20favor,\x20vuelve\x20a\x20activar\x20tu\x20membresía.'};return console['log'](_0x54c63c(0x1fd)),{'token':_0x30fe46[_0x54c63c(0x210)],'type_membresy':_0x30fe46[_0x54c63c(0x161)],'message':_0x54c63c(0x1fd)};}catch(_0x2f5de4){return console[_0x54c63c(0x211)]('Error\x20al\x20verificar\x20usuario:',_0x2f5de4),{'token':null};}}async function see_if_exist_this_token_in_the_database_of_the_web(_0x1b83e6){const _0x2cf72e=_0x24179c;try{const _0x32b8b2=await get_answer_of_my_api(_0x2cf72e(0x160),{'token':_0x1b83e6});if(!_0x32b8b2[_0x2cf72e(0x1b8)][_0x2cf72e(0x1f4)])return{'token':null,'message':_0x2cf72e(0x21c)};const _0x342480=_0x32b8b2[_0x2cf72e(0x1b8)],_0x25d6ca=new Date();_0x342480[_0x2cf72e(0x161)]==0x0?_0x25d6ca['setDate'](_0x25d6ca[_0x2cf72e(0x1f5)]()-0x1e):_0x25d6ca['setFullYear'](_0x25d6ca[_0x2cf72e(0x1c4)]()-0x1);if(_0x342480[_0x2cf72e(0x174)]!=_0x2cf72e(0x220)&&new Date(_0x342480[_0x2cf72e(0x174)])<_0x25d6ca)return{'token':null,'message':_0x2cf72e(0x191)};if(_0x342480[_0x2cf72e(0x174)]===_0x2cf72e(0x220)){const _0xef3ce6=new Date();_0x342480[_0x2cf72e(0x161)]==0x0?_0xef3ce6[_0x2cf72e(0x1b2)](_0x25d6ca[_0x2cf72e(0x1f5)]()+0x1e):_0xef3ce6['setFullYear'](_0xef3ce6['getFullYear']()+0x1);const _0x44cd19=await get_answer_of_my_api('update_activation_date.php',{'suscripcion':_0xef3ce6[_0x2cf72e(0x16f)]()[_0x2cf72e(0x1da)]('T')[0x0],'token':_0x1b83e6});return _0x44cd19[_0x2cf72e(0x1b8)][_0x2cf72e(0x1f4)]?(_0x342480[_0x2cf72e(0x174)]=_0xef3ce6,console[_0x2cf72e(0x1a1)](_0x2cf72e(0x1fd)),{'token':!![],'type_membresy':_0x342480[_0x2cf72e(0x161)],'uuid':_0x342480['device_id'],'activation_date':_0x342480[_0x2cf72e(0x174)],'message':'Usuario\x20autenticado\x20con\x20éxito.'}):{'token':null,'message':_0x2cf72e(0x1ed)};}}catch(_0x2ff567){return console[_0x2cf72e(0x211)](_0x2cf72e(0x15c),_0x2ff567),{'token':null,'message':_0x2ff567};}}async function save_the_uui_of_the_user_in_the_database(_0x58431c,_0x3262bc){const _0x251d00=_0x24179c;try{const _0x438017=await get_answer_of_my_api(_0x251d00(0x160),{'token':_0x58431c,'deviceId':_0x3262bc});return _0x438017[_0x251d00(0x1b8)][_0x251d00(0x1f4)];}catch(_0x59df92){return console['error']('Error\x20al\x20actualizar\x20el\x20UUID\x20del\x20dispositivo:',_0x59df92),![];}}async function verificarTokenActivo(){const _0x2cfd2a=_0x24179c,_0x1de0b6=_0x2cfd2a(0x222);try{const _0x2930bb=await pool[_0x2cfd2a(0x1d4)](_0x1de0b6,[TOKEN]);return console['log'](_0x2930bb[0x0]),_0x2930bb[0x0][_0x2cfd2a(0x1e3)]===0x1?(console[_0x2cfd2a(0x1a1)]('Token\x20encontrado\x20y\x20activo.'),!![]):(console['log'](_0x2cfd2a(0x177)),![]);}catch(_0x41b892){return console[_0x2cfd2a(0x211)](_0x2cfd2a(0x17b),_0x41b892),![];}}async function actualizarToken(){const _0x5812e1=_0x24179c,_0x5ed828=_0x5812e1(0x175);await pool[_0x5812e1(0x1d4)](_0x5ed828,[TOKEN]);}app['on'](_0x24179c(0x184),async()=>{const _0x115c44=_0x24179c;await check_if_exist_updates();if(thiIsADemo){await initialize_demo();if(await is_demo_expired()){dialog[_0x115c44(0x1e4)]({'type':_0x115c44(0x221),'title':_0x115c44(0x1f0),'message':_0x115c44(0x232)}),app[_0x115c44(0x172)]();return;}}else await verify_membership_of_user()?(serverExpress[_0x115c44(0x1e0)](serverExpress[_0x115c44(0x219)]('port'),_0x115c44(0x1e5),()=>{const _0x323010=_0x115c44;console['log']('Server\x20running\x20on\x20http://'+getLocalIP()+':'+serverExpress[_0x323010(0x219)](_0x323010(0x1c1)));}),createMainWindow()):createMainWindowRegister();}),app['on'](_0x24179c(0x167),()=>{const _0x1b942f=_0x24179c;process[_0x1b942f(0x1ec)]!==_0x1b942f(0x202)&&app['quit']();});