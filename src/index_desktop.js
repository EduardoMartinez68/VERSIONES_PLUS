const _0x379f1f=_0x1757;(function(_0x1ec434,_0x1e94b1){const _0x3d02db=_0x1757,_0x55a180=_0x1ec434();while(!![]){try{const _0x5ecf36=-parseInt(_0x3d02db(0x13d))/0x1*(-parseInt(_0x3d02db(0x14a))/0x2)+-parseInt(_0x3d02db(0x1bd))/0x3*(parseInt(_0x3d02db(0x159))/0x4)+parseInt(_0x3d02db(0x166))/0x5+parseInt(_0x3d02db(0x1d3))/0x6*(parseInt(_0x3d02db(0x1b6))/0x7)+-parseInt(_0x3d02db(0x186))/0x8+-parseInt(_0x3d02db(0x171))/0x9*(parseInt(_0x3d02db(0x13a))/0xa)+parseInt(_0x3d02db(0x14c))/0xb;if(_0x5ecf36===_0x1e94b1)break;else _0x55a180['push'](_0x55a180['shift']());}catch(_0x4b8747){_0x55a180['push'](_0x55a180['shift']());}}}(_0x3e8f,0x48d54));const system=require(_0x379f1f(0x118)),thiIsADemo=![],{app,BrowserWindow,dialog,ipcMain}=require(_0x379f1f(0x1d6)),express=require(_0x379f1f(0x1c2)),morgan=require('morgan'),{engine}=require('express-handlebars'),multer=require(_0x379f1f(0x1b9)),flash=require(_0x379f1f(0x173)),session=require(_0x379f1f(0x1c5)),passport=require(_0x379f1f(0x149)),{database}=require(_0x379f1f(0x138)),{v4:uuid}=require('uuid'),path=require(_0x379f1f(0x175)),{RecaptchaV2}=require(_0x379f1f(0x18b)),nodePersist=require(_0x379f1f(0x16a));nodePersist[_0x379f1f(0x14d)]({'dir':path[_0x379f1f(0x11a)](__dirname,_0x379f1f(0x1af))});async function initialize_software(){const _0x2817ef=_0x379f1f,_0xb5a9c2=await nodePersist[_0x2817ef(0x145)](_0x2817ef(0x10d));!_0xb5a9c2&&await nodePersist[_0x2817ef(0x1ca)](_0x2817ef(0x10d),_0x2817ef(0x16f));}async function the_software_have_a_token(){const _0x2b9dea=_0x379f1f,_0x577663=await nodePersist[_0x2b9dea(0x145)](_0x2b9dea(0x10d));if(!_0x577663)return![];return _0x577663!='false';}async function create_expiration_date_of_the_token(_0x435c2f){const _0x4d46f8=_0x379f1f,_0x3692e1=await nodePersist['get'](_0x4d46f8(0x155));!_0x3692e1&&await nodePersist[_0x4d46f8(0x1ca)](_0x4d46f8(0x155),_0x435c2f);}async function token_expired(){const _0x31f711=_0x379f1f,_0x5b0fe1=await nodePersist[_0x31f711(0x145)](_0x31f711(0x155)),_0x25ec1c=new Date(_0x5b0fe1),_0x12f205=new Date();return _0x12f205<_0x25ec1c;}async function remove_install_token(){const _0x46cd4e=_0x379f1f;await nodePersist[_0x46cd4e(0x1aa)](_0x46cd4e(0x10d)),await nodePersist[_0x46cd4e(0x1aa)](_0x46cd4e(0x155)),console[_0x46cd4e(0x15f)](_0x46cd4e(0x1c7));}async function initialize_token(_0x1aca87){const _0x45f177=_0x379f1f,_0x294492=await nodePersist[_0x45f177(0x145)]('installToken');await nodePersist[_0x45f177(0x1ca)](_0x45f177(0x10d),_0x1aca87);}async function initialize_demo(){const _0x4c8e16=_0x379f1f,_0x15b543=await nodePersist['get'](_0x4c8e16(0x15d));if(!_0x15b543){const _0x3c0cd6=new Date()[_0x4c8e16(0x182)]();await nodePersist[_0x4c8e16(0x1ca)](_0x4c8e16(0x128),_0x3c0cd6),console[_0x4c8e16(0x15f)](_0x4c8e16(0x17f),_0x3c0cd6);}else console[_0x4c8e16(0x15f)](_0x4c8e16(0x1b3),_0x15b543);}async function is_demo_expired(){const _0x29a331=_0x379f1f,_0x2676c5=await nodePersist[_0x29a331(0x145)]('installDemo');if(!_0x2676c5)return console[_0x29a331(0x15f)]('No\x20se\x20encontró\x20la\x20fecha\x20de\x20instalación'),![];const _0x58a397=new Date(_0x2676c5),_0xba0d71=new Date(),_0x104f1b=_0xba0d71-_0x58a397,_0x4e6534=_0x104f1b/(0x3e8*0x3c*0x3c*0x18);return _0x4e6534>0x1e?(console['log'](_0x29a331(0x1ac)),!![]):(console['log'](_0x29a331(0x117)),![]);}function _0x1757(_0x1e0843,_0xa10c7){const _0x3e8fc3=_0x3e8f();return _0x1757=function(_0x175757,_0x1ab9c8){_0x175757=_0x175757-0x109;let _0x2f9e69=_0x3e8fc3[_0x175757];return _0x2f9e69;},_0x1757(_0x1e0843,_0xa10c7);}async function this_software_count_have_a_count(){}async function the_user_have_a_token_active_in_the_database(){}async function verify_membership_of_user(){initialize_software();if(await the_software_have_a_token())return await token_expired();return![];}const simpleGit=require('simple-git'),fs=require('fs'),repoPath=path[_0x379f1f(0x11a)](__dirname),git=simpleGit(repoPath),repoURL=_0x379f1f(0x139),remote=_0x379f1f(0x141);git[_0x379f1f(0x192)](remote,repoURL)[_0x379f1f(0x10b)](()=>{const _0x32297d=_0x379f1f;console[_0x32297d(0x15f)](_0x32297d(0x14f));})['catch'](_0x22cafe=>{const _0x3f536a=_0x379f1f;console[_0x3f536a(0x1cf)](_0x3f536a(0x113),_0x22cafe);});async function check_if_exist_updates(){const _0x5785e0=_0x379f1f;try{await git[_0x5785e0(0x115)](remote);const _0x5e9ddf=await git[_0x5785e0(0x15f)]([remote+_0x5785e0(0x133),'-1']),_0x37b73b=await git[_0x5785e0(0x15f)]([_0x5785e0(0x1c8),'-1']);_0x5e9ddf[_0x5785e0(0x18a)][_0x5785e0(0x15c)]!==_0x37b73b['latest'][_0x5785e0(0x15c)]?(console[_0x5785e0(0x15f)](_0x5785e0(0x183)),await git[_0x5785e0(0x1d7)]([_0x5785e0(0x13b),_0x5785e0(0x18e),remote+_0x5785e0(0x133)]),await git[_0x5785e0(0x129)]('origin',_0x5785e0(0x120),{'--rebase':null}),dialog[_0x5785e0(0x109)]({'type':_0x5785e0(0x110),'title':_0x5785e0(0x1a0),'message':'Se\x20ha\x20descargado\x20una\x20nueva\x20versión.\x20Reinicia\x20la\x20aplicación\x20para\x20aplicar\x20los\x20cambios.','buttons':[_0x5785e0(0x18f)]}),app['relaunch'](),app[_0x5785e0(0x1ab)]()):console[_0x5785e0(0x15f)](_0x5785e0(0x1cd));}catch(_0x400964){const _0x4e4233=path[_0x5785e0(0x11a)](__dirname,_0x5785e0(0x197));fs['appendFileSync'](_0x4e4233,'Error\x20verificando\x20actualizaciones:\x20'+_0x400964[_0x5785e0(0x170)]+'\x0a'+_0x400964['stack']+'\x0a\x0a',_0x5785e0(0x194)),console[_0x5785e0(0x1cf)](_0x5785e0(0x193),_0x400964),dialog[_0x5785e0(0x109)]({'type':'warning','title':_0x5785e0(0x19f),'message':'Error\x20verificando\x20actualizaciones:\x20'+_0x400964[_0x5785e0(0x170)]+'\x0a'+_0x400964[_0x5785e0(0x11c)]+'\x0a\x0a'});}}const serverExpress=express();require('./lib/passport'),require(_0x379f1f(0x1d5)),serverExpress[_0x379f1f(0x1ca)](_0x379f1f(0x148),process[_0x379f1f(0x1a6)][_0x379f1f(0x19b)]||0xfa0),serverExpress[_0x379f1f(0x1ca)](_0x379f1f(0x10a),path[_0x379f1f(0x11a)](__dirname,_0x379f1f(0x10a))),serverExpress['engine']('.hbs',engine({'defaultLayout':'main','layoutsDir':path[_0x379f1f(0x11a)](serverExpress['get'](_0x379f1f(0x10a)),'layouts'),'partialsDir':path[_0x379f1f(0x11a)](serverExpress['get']('views'),'partials'),'extname':_0x379f1f(0x1ad),'helpers':require(_0x379f1f(0x164))})),serverExpress['set'](_0x379f1f(0x1b4),_0x379f1f(0x1ad)),require('dotenv')[_0x379f1f(0x176)]();const {APP_PG_USER,APP_PG_HOST,APP_PG_DATABASE,APP_PG_PASSWORD,APP_PG_PORT,TOKEN}=process[_0x379f1f(0x1a6)],pg=require('pg'),pgPool=new pg['Pool']({'user':APP_PG_USER,'host':APP_PG_HOST,'database':APP_PG_DATABASE,'password':APP_PG_PASSWORD,'port':APP_PG_PORT});function _0x3e8f(){const _0x5177f5=['2305896xWzVoj','token','diskStorage','Error\x20al\x20verificar\x20usuario:','latest','express-recaptcha','user','query','--hard','Reiniciar\x20ahora','address','newNotification','addRemote','❌\x20Error\x20verificando\x20actualizaciones:','utf8','./services/chat.js','El\x20token\x20no\x20está\x20activo\x20o\x20no\x20existe.','logfile.txt','locals','desktop','\x27\x20no\x20existe\x20🤔','PORT','answer-from-login-render','warning','createPool','Error\x20verificando\x20actualizaciones!','Actualización','public','./router/authentication','Socket\x20','privateNotifications','node-machine-id','env','FudSession','connectionRejected','./router/links/branch','removeItem','quit','La\x20demo\x20ha\x20expirado.','.hbs','La\x20base\x20de\x20datos\x20tiene\x20muchas\x20conexiones.','data','pack_branch','Ups,\x20parece\x20que\x20alcanzaste\x20tu\x20límite\x20de\x20dispositivos\x20conectados.\x20Por\x20favor,\x20actualiza\x20tu\x20membresía.','static','Fecha\x20de\x20instalación\x20existente:','view\x20engine','\x0a\x20\x20\x20\x20\x20\x20\x20\x20SELECT\x20*\x20FROM\x20pagos\x20\x0a\x20\x20\x20\x20\x20\x20\x20\x20WHERE\x20token\x20=\x20?\x0a\x20\x20\x20\x20','7UxGnfH','./router/links/delivery','setFullYear','multer','./router/links/cashCut','originalname','login-from-render','147HgDRZe','El\x20usuario\x20\x27','\x0a\x20\x20\x20\x20\x20\x20\x20\x20UPDATE\x20pagos\x20\x0a\x20\x20\x20\x20\x20\x20\x20\x20SET\x20device_id\x20=\x20?\x20,\x20active\x20=\x20false\x0a\x20\x20\x20\x20\x20\x20\x20\x20WHERE\x20token\x20=\x20?\x0a\x20\x20\x20\x20','Este\x20usuario\x20ya\x20tiene\x20un\x20TOKEN\x20registrado\x20en\x20un\x20equipo.','pack_company','express','Usuario\x20autenticado\x20con\x20éxito.','connect-pg-simple','express-session','Datos\x20actualizados\x20con\x20éxito.\x20Cierra\x20y\x20vuelve\x20a\x20abrir\x20el\x20programa\x20😄','installToken\x20eliminado','HEAD','sendNotification','set','answer-from-login-render-token','socketId','✅\x20La\x20aplicación\x20ya\x20está\x20actualizada.','code','error','uuid','public/img/uploads','\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20UPDATE\x20users\x20\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20SET\x20activation_date\x20=\x20?\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20WHERE\x20token\x20=\x20?\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20','1451514gxhmyg','Mensaje\x20enviado\x20con\x20éxito','./lib/editFrom','electron','raw','showMessageBoxSync','views','then','get_max_employee_of_this_company','installToken','login-from-render-token','Conexión\x20a\x20la\x20base\x20de\x20datos\x20exitosa\x20MYSQL.','info','./router/links/fudone','platform','Error\x20al\x20agregar\x20el\x20repositorio\x20remoto','company','fetch','getConnection','La\x20demo\x20aún\x20está\x20activa.','./lib/system','getTheFirstTenNotifications','join','ER_CON_COUNT_ERROR','stack','username','Error\x20al\x20actualizar\x20el\x20UUID\x20del\x20dispositivo:','/links','main','networkInterfaces','sendNotificationToUser','Este\x20email\x20\x27','Tu\x20demo\x20de\x2030\x20días\x20ha\x20expirado.\x20Por\x20favor,\x20compra\x20la\x20versión\x20completa\x20y\x20sigue\x20creciendo\x20con\x20ED\x20PLUS\x20🚀.','createServer','reply','flash','installDate','pull','\x0a\x20\x20\x20\x20\x20\x20\x20\x20SELECT\x20token,\x20type_membresy,\x20password\x20AS\x20hashedPassword,\x20activation_date\x20\x0a\x20\x20\x20\x20\x20\x20\x20\x20FROM\x20users\x20\x0a\x20\x20\x20\x20\x20\x20\x20\x20WHERE\x20email\x20=\x20?\x0a\x20\x20\x20\x20','this_email_exist','release','family','./router/links/desktop','http','canSend','disconnect','u995592926_bestpoint','/main','./router/links/boutique','success','internal','getFullYear','./keys','https://github.com/EduardoMartinez68/VERSIONES_PLUS','240HyZgtf','reset','type_membresy','354685IUorIY','device_id','filter','emit','origin','dev','\x27.\x20Inténtalo\x20de\x20nuevo.\x20😳','use','get','0.0.0.0','maximize','port','passport','2vWDcmG','0000-00-00','6686240JAmXsT','init','send_new_message','Repositorio\x20remoto\x20configurado\x20correctamente','bcrypt','create_new_chat','session','broadcast','Suscripción\x20expirada.\x20Por\x20favor,\x20vuelve\x20a\x20activar\x20tu\x20membresía.','expirationDateOFTheToken','PROTOCOL_CONNECTION_LOST','loadURL','Bobesponja48*','46868QzMulq','connection','urlencoded','hash','installDemo','./router/links/app','log','initialize','util','Usuario\x20no\x20encontrado.','193.203.166.165','./lib/handlebars','registerUser','106090ZgyqkH','theUserIsConnect','compare','length','node-persist','activation_date','password','./router/links/CRM','\x0a\x20\x20\x20\x20\x20\x20\x20\x20SELECT\x20token,\x20type_membresy,\x20activation_date\x20,\x20device_id\x0a\x20\x20\x20\x20\x20\x20\x20\x20FROM\x20pagos\x20\x0a\x20\x20\x20\x20\x20\x20\x20\x20WHERE\x20token\x20=\x20?\x0a\x20\x20\x20\x20','false','message','24363pDUhGi','./router/links/store','connect-flash','get_the_first_notification','path','config','window-all-closed','split','active','activation.html','./router/links/subscription','json','messageStatus','Contraseña\x20incorrecta.','Fecha\x20de\x20instalación\x20guardada:','\x0a\x20\x20\x20\x20\x20\x20\x20\x20UPDATE\x20pagos\x20\x0a\x20\x20\x20\x20\x20\x20\x20\x20SET\x20active\x20=\x20false\x0a\x20\x20\x20\x20\x20\x20\x20\x20WHERE\x20token\x20=\x20?\x0a\x20\x20\x20\x20','loadFile','toISOString','🔄\x20Nueva\x20versión\x20encontrada,\x20actualizando...','preload.js','./lib/addFrom'];_0x3e8f=function(){return _0x5177f5;};return _0x3e8f();}serverExpress[_0x379f1f(0x144)](session({'secret':_0x379f1f(0x1a7),'resave':![],'saveUninitialized':![],'store':new(require(_0x379f1f(0x1c4))(session))({'pool':pgPool,'tableName':'session'})})),serverExpress[_0x379f1f(0x144)](flash()),serverExpress[_0x379f1f(0x144)](morgan(_0x379f1f(0x142))),serverExpress[_0x379f1f(0x144)](express[_0x379f1f(0x15b)]({'extended':![]})),serverExpress[_0x379f1f(0x144)](express[_0x379f1f(0x17c)]()),serverExpress[_0x379f1f(0x144)](passport[_0x379f1f(0x160)]()),serverExpress[_0x379f1f(0x144)](passport[_0x379f1f(0x152)]());const storage=multer[_0x379f1f(0x188)]({'destination':path[_0x379f1f(0x11a)](__dirname,_0x379f1f(0x1d1)),'filename':(_0x25e2da,_0x710377,_0x429daf,_0x4afd96)=>{const _0x3dc12a=_0x379f1f;_0x429daf(null,uuid()+path['extname'](_0x710377[_0x3dc12a(0x1bb)]));}});serverExpress[_0x379f1f(0x144)](multer({'storage':storage})['single']('image')),serverExpress[_0x379f1f(0x144)]((_0x1ee737,_0x62a6d5,_0x1d0b97)=>{const _0x3f7402=_0x379f1f;serverExpress[_0x3f7402(0x198)]['success']=_0x1ee737['flash'](_0x3f7402(0x135)),serverExpress[_0x3f7402(0x198)]['message']=_0x1ee737[_0x3f7402(0x127)]('message'),serverExpress['locals']['user']=_0x1ee737[_0x3f7402(0x18c)],serverExpress['locals'][_0x3f7402(0x114)]=_0x1ee737['company'],serverExpress[_0x3f7402(0x198)][_0x3f7402(0x1c1)]=0x0,serverExpress[_0x3f7402(0x198)][_0x3f7402(0x1b0)]=0x0,_0x1d0b97();});const http=require(_0x379f1f(0x12f)),server=http[_0x379f1f(0x125)](serverExpress),{Server}=require('socket.io'),io=new Server(server),users={},connectedEmployees={},companyLimitsCache={},chat=require(_0x379f1f(0x195));io['on'](_0x379f1f(0x15a),async _0x587c63=>{const _0x406b0a=_0x379f1f;_0x587c63['on'](_0x406b0a(0x165),async(_0x3a6127,_0x160536)=>{const _0x29314e=_0x406b0a,_0x942c43=connectedEmployees[_0x160536]||[],_0x23a6b3=_0x942c43['some'](_0x4c3f10=>_0x4c3f10['userId']===_0x3a6127);if(_0x23a6b3){_0x587c63[_0x29314e(0x140)]('connectionRejected','Ups,\x20parece\x20que\x20ya\x20estás\x20conectado\x20en\x20otro\x20dispositivo.');return;}if(system!=_0x29314e(0x199)){!companyLimitsCache[_0x160536]&&(companyLimitsCache[_0x160536]=await chat[_0x29314e(0x10c)](_0x160536));const _0x4b4006=companyLimitsCache[_0x160536];if(_0x942c43['length']>=_0x4b4006){_0x587c63[_0x29314e(0x140)](_0x29314e(0x1a8),_0x29314e(0x1b1));return;}}_0x587c63['companyId']=_0x160536,_0x942c43['push']({'userId':_0x3a6127,'socketId':_0x587c63['id']}),connectedEmployees[_0x160536]=_0x942c43;const _0x36aecf=await chat['get_the_first_notification'](_0x3a6127,0xa);io['to'](_0x3a6127)['emit'](_0x29314e(0x1a4),{'notifications':_0x36aecf});});async function _0x184cf6(_0x6e8ac8){const _0x610589=_0x406b0a,_0x430be2=users[_0x6e8ac8];let _0x51d84f=_0x430be2;!_0x430be2&&(_0x51d84f=await chat[_0x610589(0x12b)](toUserId));const _0x3d57c0={'canSend':_0x51d84f,'theUserIsConnect':_0x430be2};return _0x3d57c0;}_0x587c63['on'](_0x406b0a(0x122),async({userEmail:_0x9216ad,toUserEmail:_0x2cf070,message:_0x5cd35d})=>{const _0x537903=_0x406b0a,_0x12a530=await _0x184cf6(_0x2cf070);_0x12a530[_0x537903(0x130)]?await chat['create_notification'](_0x9216ad,_0x2cf070,_0x5cd35d)?(_0x12a530[_0x537903(0x167)]&&io['to'](recipientSocketId)[_0x537903(0x140)]('privateMessage',{'userId':userId,'message':_0x5cd35d}),_0x587c63[_0x537903(0x140)]('messageStatus',{'success':!![],'message':'Mensaje\x20enviado\x20con\x20éxito.\x20👌'})):_0x587c63[_0x537903(0x140)]('messageStatus',{'success':![],'message':'No\x20pudimos\x20enviar\x20el\x20mensaje\x20al\x20usuario\x20\x27'+_0x2cf070+_0x537903(0x143)}):_0x587c63[_0x537903(0x140)](_0x537903(0x17d),{'success':![],'message':_0x537903(0x1be)+_0x2cf070+'\x27\x20no\x20existe.\x20🤔'});}),_0x587c63['on'](_0x406b0a(0x119),async({userEmail:_0x7ab1ae})=>{const _0x3ee8c1=_0x406b0a,_0x447416=await chat[_0x3ee8c1(0x174)](_0x7ab1ae,0xa);io['to'](recipientSocketId)[_0x3ee8c1(0x140)](_0x3ee8c1(0x1a4),{'notifications':_0x447416});}),_0x587c63['on']('sendMessageToUser',async({userId:_0x54f4c0,toUserId:_0x1ecbb9,message:_0xdbb6b9})=>{const _0x35beb0=_0x406b0a,_0x38e4de=users[_0x1ecbb9];let _0x5a9635=_0x38e4de;!_0x38e4de&&(_0x5a9635=await chat['this_email_exist'](_0x1ecbb9));if(_0x5a9635){const _0x5780d8=await chat[_0x35beb0(0x151)](_0x54f4c0,_0x1ecbb9);await chat[_0x35beb0(0x14e)](_0x5780d8,_0x54f4c0,_0xdbb6b9)&&(_0x38e4de&&io['to'](_0x38e4de)['emit']('privateMessage',{'userId':_0x54f4c0,'message':_0xdbb6b9})),_0x587c63[_0x35beb0(0x140)](_0x35beb0(0x17d),{'success':!![],'message':_0x35beb0(0x1d4)});}else _0x587c63[_0x35beb0(0x140)](_0x35beb0(0x17d),{'success':![],'message':_0x35beb0(0x123)+_0x1ecbb9+_0x35beb0(0x19a)});}),_0x587c63['on'](_0x406b0a(0x131),()=>{const _0x44edb9=_0x406b0a,{companyId:_0xc4db42}=_0x587c63;_0xc4db42&&connectedEmployees[_0xc4db42]?(connectedEmployees[_0xc4db42]=connectedEmployees[_0xc4db42][_0x44edb9(0x13f)](_0x510d54=>_0x510d54[_0x44edb9(0x1cc)]!==_0x587c63['id']),connectedEmployees[_0xc4db42][_0x44edb9(0x169)]===0x0&&delete connectedEmployees[_0xc4db42]):console[_0x44edb9(0x15f)](_0x44edb9(0x1a3)+_0x587c63['id']+'\x20desconectado,\x20pero\x20no\x20estaba\x20asociado\x20a\x20ninguna\x20empresa.');}),_0x587c63['on'](_0x406b0a(0x1c9),_0x519324=>{const _0x89170c=_0x406b0a;console[_0x89170c(0x15f)]('Nueva\x20notificación:',_0x519324),_0x587c63[_0x89170c(0x153)]['emit'](_0x89170c(0x191),_0x519324);});});const companyName=_0x379f1f(0x11f);serverExpress[_0x379f1f(0x144)](require('./router')),serverExpress['use'](require(_0x379f1f(0x1a2))),serverExpress[_0x379f1f(0x144)](companyName,require('./router/links')),serverExpress[_0x379f1f(0x144)](companyName,require(_0x379f1f(0x111))),serverExpress[_0x379f1f(0x144)](companyName,require('./router/links/ceo')),serverExpress['use'](companyName,require(_0x379f1f(0x1a9))),serverExpress[_0x379f1f(0x144)](companyName,require(_0x379f1f(0x17b))),serverExpress[_0x379f1f(0x144)](companyName,require(_0x379f1f(0x172))),serverExpress[_0x379f1f(0x144)](companyName,require(_0x379f1f(0x1b7))),serverExpress['use'](companyName,require(_0x379f1f(0x15e))),serverExpress[_0x379f1f(0x144)](companyName,require(_0x379f1f(0x16d))),serverExpress[_0x379f1f(0x144)](companyName,require(_0x379f1f(0x12e))),serverExpress[_0x379f1f(0x144)](companyName,require(_0x379f1f(0x134))),serverExpress[_0x379f1f(0x144)](companyName,require(_0x379f1f(0x1ba))),serverExpress[_0x379f1f(0x144)](require(_0x379f1f(0x185))),serverExpress['use'](express[_0x379f1f(0x1b2)](path[_0x379f1f(0x11a)](__dirname,_0x379f1f(0x1a1))));const os=require('os');function getLocalIP(){const _0x235a1a=_0x379f1f,_0x5b61a4=os[_0x235a1a(0x121)]();for(let _0xe15e06 in _0x5b61a4){for(let _0x2a9f9f=0x0;_0x2a9f9f<_0x5b61a4[_0xe15e06][_0x235a1a(0x169)];_0x2a9f9f++){const _0x35deb2=_0x5b61a4[_0xe15e06][_0x2a9f9f];if(_0x35deb2[_0x235a1a(0x12d)]==='IPv4'&&!_0x35deb2[_0x235a1a(0x136)])return _0x35deb2[_0x235a1a(0x190)];}}return'127.0.0.1';}const mysql=require('mysql'),{promisify}=require(_0x379f1f(0x161)),pool=mysql[_0x379f1f(0x19e)]({'host':_0x379f1f(0x163),'user':_0x379f1f(0x132),'password':_0x379f1f(0x158),'database':_0x379f1f(0x132),'waitForConnections':!![],'connectionLimit':0xa,'queueLimit':0x0});pool[_0x379f1f(0x116)]((_0xbcd239,_0x54abad)=>{const _0x579e14=_0x379f1f;_0xbcd239&&(_0xbcd239['code']===_0x579e14(0x156)&&console['error']('La\x20conexión\x20a\x20la\x20base\x20de\x20datos\x20fue\x20cerrada.'),_0xbcd239[_0x579e14(0x1ce)]===_0x579e14(0x11b)&&console[_0x579e14(0x1cf)](_0x579e14(0x1ae)),_0xbcd239[_0x579e14(0x1ce)]==='ECONNREFUSED'&&console[_0x579e14(0x1cf)]('La\x20conexión\x20a\x20la\x20base\x20de\x20datos\x20fue\x20rechazada.'));_0x54abad&&(_0x54abad[_0x579e14(0x12c)](),console[_0x579e14(0x15f)](_0x579e14(0x10f)));return;}),pool['query']=promisify(pool[_0x379f1f(0x18d)]);let mainWindow,activationWindow,loginWindow;const createMainWindow=()=>{const _0x15b531=_0x379f1f;mainWindow=new BrowserWindow({'width':0x320,'height':0x258}),mainWindow[_0x15b531(0x147)](),mainWindow[_0x15b531(0x157)]('http://localhost:'+serverExpress[_0x15b531(0x145)](_0x15b531(0x148)));},createMainWindowRegister=()=>{const _0x221657=_0x379f1f;loginWindow=new BrowserWindow({'width':0x320,'height':0x258,'parent':mainWindow,'webPreferences':{'preload':path[_0x221657(0x11a)](__dirname,_0x221657(0x184)),'nodeIntegration':!![],'contextIsolation':![]}}),loginWindow[_0x221657(0x147)](),loginWindow[_0x221657(0x181)](path[_0x221657(0x11a)](__dirname,_0x221657(0x17a)));},{machineIdSync}=require(_0x379f1f(0x1a5)),deviceId=machineIdSync();ipcMain['on'](_0x379f1f(0x10e),async(_0x33b2ed,_0x31f36e)=>{const _0x4544d0=_0x379f1f,_0x52b544=_0x31f36e[_0x4544d0(0x187)],_0x2228b1=await see_if_exist_this_token_in_the_database_of_the_web(_0x52b544);if(_0x2228b1[_0x4544d0(0x187)]){let _0xd35fba=!![];_0x2228b1[_0x4544d0(0x1d0)]&&(_0x2228b1[_0x4544d0(0x1d0)]!==deviceId&&(_0x2228b1[_0x4544d0(0x170)]=_0x4544d0(0x1c0),_0xd35fba=![])),_0xd35fba&&(await save_the_uui_of_the_user_in_the_database(_0x52b544,deviceId)&&(await initialize_token(_0x52b544),await create_expiration_date_of_the_token(_0x2228b1[_0x4544d0(0x16b)]),_0x2228b1['message']=_0x4544d0(0x1c6)));}_0x33b2ed[_0x4544d0(0x126)](_0x4544d0(0x1cb),_0x2228b1[_0x4544d0(0x170)]);}),ipcMain['on'](_0x379f1f(0x1bc),async(_0x407355,_0x1e161e)=>{const _0x315e8e=_0x379f1f,_0x53640b=_0x1e161e[_0x315e8e(0x11d)],_0x20edc7=_0x1e161e[_0x315e8e(0x16c)],_0x5d7fa9=await see_if_exist_this_user_in_the_database_of_the_web(_0x53640b,_0x20edc7);if(_0x5d7fa9[_0x315e8e(0x187)]){if(_0x5d7fa9[_0x315e8e(0x1d0)]&&_0x5d7fa9[_0x315e8e(0x1d0)]!==deviceId)_0x5d7fa9[_0x315e8e(0x170)]=_0x315e8e(0x1c0);else{if(await save_the_uui_of_the_user_in_the_database(_0x53640b,deviceId)){}}}_0x407355[_0x315e8e(0x126)](_0x315e8e(0x19c),_0x5d7fa9['message']);});const bcrypt=require(_0x379f1f(0x150));async function see_if_exist_this_user_in_the_database_of_the_web(_0x4954e4,_0x45abdf){const _0x2aaa8b=_0x379f1f,_0x126d43=_0x2aaa8b(0x12a);try{const _0x47b917=await pool[_0x2aaa8b(0x18d)](_0x126d43,[_0x4954e4]);if(_0x47b917['length']===0x0)return{'token':null,'message':_0x2aaa8b(0x162)};const _0x4a4ed7=_0x47b917[0x0],_0x20f96d=await bcrypt[_0x2aaa8b(0x168)](_0x45abdf,_0x4a4ed7['hashedPassword']);if(!_0x20f96d)return{'token':null,'message':_0x2aaa8b(0x17e)};const _0x5805fb=new Date();_0x5805fb['setFullYear'](_0x5805fb[_0x2aaa8b(0x137)]()-0x1);if(new Date(_0x4a4ed7[_0x2aaa8b(0x16b)])<_0x5805fb)return{'token':null,'message':_0x2aaa8b(0x154)};return console[_0x2aaa8b(0x15f)](_0x2aaa8b(0x1c3)),{'token':_0x4a4ed7[_0x2aaa8b(0x187)],'type_membresy':_0x4a4ed7[_0x2aaa8b(0x13c)],'message':_0x2aaa8b(0x1c3)};}catch(_0x4dcf02){return console[_0x2aaa8b(0x1cf)]('Error\x20al\x20verificar\x20usuario:',_0x4dcf02),{'token':null};}}async function see_if_exist_this_token_in_the_database_of_the_web(_0x18aafa){const _0x28b07c=_0x379f1f,_0xea1535=_0x28b07c(0x16e);try{const _0x3f83e6=await pool['query'](_0xea1535,[_0x18aafa]);if(_0x3f83e6[_0x28b07c(0x169)]===0x0)return{'token':null,'message':'Token\x20no\x20encontrado.'};const _0x4de05f=_0x3f83e6[0x0],_0x152a72=new Date();_0x152a72[_0x28b07c(0x1b8)](_0x152a72['getFullYear']()-0x1);if(_0x4de05f[_0x28b07c(0x16b)]!=_0x28b07c(0x14b)&&new Date(_0x4de05f[_0x28b07c(0x16b)])<_0x152a72)return{'token':null,'message':_0x28b07c(0x154)};if(_0x4de05f[_0x28b07c(0x16b)]===_0x28b07c(0x14b)){const _0x33f6d3=new Date();_0x33f6d3[_0x28b07c(0x1b8)](_0x33f6d3['getFullYear']()+0x1);const _0x348d78=_0x28b07c(0x1d2);await pool[_0x28b07c(0x18d)](_0x348d78,[_0x33f6d3[_0x28b07c(0x182)]()[_0x28b07c(0x178)]('T')[0x0],_0x4de05f['token']]),_0x4de05f[_0x28b07c(0x16b)]=_0x33f6d3;}return console[_0x28b07c(0x15f)]('Usuario\x20autenticado\x20con\x20éxito.'),{'token':!![],'type_membresy':_0x4de05f[_0x28b07c(0x13c)],'uuid':_0x4de05f[_0x28b07c(0x13e)],'activation_date':_0x4de05f[_0x28b07c(0x16b)],'message':_0x28b07c(0x1c3)};}catch(_0x3b2bd1){return console[_0x28b07c(0x1cf)](_0x28b07c(0x189),_0x3b2bd1),{'token':null};}}async function save_the_uui_of_the_user_in_the_database(_0x3cf623,_0x3b3583){const _0x3332cb=_0x379f1f,_0x3a6e62=_0x3332cb(0x1bf);try{const _0x5541fe=await pool['query'](_0x3a6e62,[_0x3b3583,_0x3cf623]);return!![];}catch(_0x2c2dca){return console[_0x3332cb(0x1cf)](_0x3332cb(0x11e),_0x2c2dca),![];}}async function verificarTokenActivo(){const _0x2b8885=_0x379f1f,_0x534cac=_0x2b8885(0x1b5);try{const _0x2b72d5=await pool[_0x2b8885(0x18d)](_0x534cac,[TOKEN]);return console[_0x2b8885(0x15f)](_0x2b72d5[0x0]),_0x2b72d5[0x0][_0x2b8885(0x179)]===0x1?(console[_0x2b8885(0x15f)]('Token\x20encontrado\x20y\x20activo.'),!![]):(console['log'](_0x2b8885(0x196)),![]);}catch(_0x47dbd0){return console[_0x2b8885(0x1cf)]('Error\x20al\x20verificar\x20el\x20token:',_0x47dbd0),![];}}async function actualizarToken(){const _0x337be4=_0x379f1f,_0x291ac1=_0x337be4(0x180);await pool[_0x337be4(0x18d)](_0x291ac1,[TOKEN]);}app['on']('ready',async()=>{const _0x1c7bf8=_0x379f1f;await check_if_exist_updates();if(thiIsADemo){await initialize_demo();if(await is_demo_expired()){dialog[_0x1c7bf8(0x109)]({'type':_0x1c7bf8(0x19d),'title':'Demo\x20Expirada','message':_0x1c7bf8(0x124)}),app[_0x1c7bf8(0x1ab)]();return;}}else await verify_membership_of_user()?(serverExpress['listen'](serverExpress[_0x1c7bf8(0x145)](_0x1c7bf8(0x148)),_0x1c7bf8(0x146),()=>{const _0x438546=_0x1c7bf8;console[_0x438546(0x15f)]('Server\x20running\x20on\x20http://'+getLocalIP()+':'+serverExpress['get'](_0x438546(0x148)));}),createMainWindow()):createMainWindowRegister();}),app['on'](_0x379f1f(0x177),()=>{const _0x57c5c0=_0x379f1f;process[_0x57c5c0(0x112)]!=='darwin'&&app['quit']();});