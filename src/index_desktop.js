const _0x45136c=_0x3bf5;(function(_0x4f9a8c,_0x177cbf){const _0x70b63d=_0x3bf5,_0x5ee979=_0x4f9a8c();while(!![]){try{const _0x10bc1e=parseInt(_0x70b63d(0x1aa))/0x1+parseInt(_0x70b63d(0x21e))/0x2+parseInt(_0x70b63d(0x186))/0x3+parseInt(_0x70b63d(0x177))/0x4*(-parseInt(_0x70b63d(0x16c))/0x5)+parseInt(_0x70b63d(0x211))/0x6+parseInt(_0x70b63d(0x1ba))/0x7*(-parseInt(_0x70b63d(0x1ff))/0x8)+parseInt(_0x70b63d(0x1df))/0x9*(parseInt(_0x70b63d(0x1c0))/0xa);if(_0x10bc1e===_0x177cbf)break;else _0x5ee979['push'](_0x5ee979['shift']());}catch(_0x26571e){_0x5ee979['push'](_0x5ee979['shift']());}}}(_0x178b,0xc05c8));function _0x3bf5(_0x5ba212,_0x281f46){const _0x178be1=_0x178b();return _0x3bf5=function(_0x3bf5d6,_0x1914dc){_0x3bf5d6=_0x3bf5d6-0x16b;let _0x538cd2=_0x178be1[_0x3bf5d6];return _0x538cd2;},_0x3bf5(_0x5ba212,_0x281f46);}function _0x178b(){const _0x3bda98=['login-from-render-token','158015ncYXeD','ER_CON_COUNT_ERROR','view\x20engine','public','push','maximize','quit','desktop','Este\x20usuario\x20ya\x20tiene\x20un\x20TOKEN\x20registrado\x20en\x20un\x20equipo.','privateNotifications','originalname','main','relaunch','Demo\x20Expirada','Mensaje\x20enviado\x20con\x20éxito','logfile.txt','9260839iOvPxI','device_id','🔄\x20Nueva\x20versión\x20encontrada,\x20actualizando...','addRemote','util','connectionRejected','2532340mnxnxM','join','./router/links/subscription','--hard','http://localhost:','path','info','./router/links/desktop','./router/links/ceo','\x27\x20no\x20existe.\x20🤔','release','sendNotification','Fecha\x20de\x20instalación\x20guardada:','privateMessage','Actualización','127.0.0.1','reset','split','installToken\x20eliminado','./lib/passport','Socket\x20','broadcast','https://github.com/EduardoMartinez68/VERSIONES_PLUS','compare','\x0a\x20\x20\x20\x20\x20\x20\x20\x20UPDATE\x20pagos\x20\x0a\x20\x20\x20\x20\x20\x20\x20\x20SET\x20active\x20=\x20false\x0a\x20\x20\x20\x20\x20\x20\x20\x20WHERE\x20token\x20=\x20?\x0a\x20\x20\x20\x20','data','length','Error\x20al\x20verificar\x20el\x20token:','./router','warning','ready','27ijTNqh','node-persist','./router/links/CRM','dev','token','bcrypt','installToken','socketId','set','sendMessageToUser','utf8','./services/chat.js','username','La\x20base\x20de\x20datos\x20tiene\x20muchas\x20conexiones.','Error\x20verificando\x20actualizaciones!','morgan','Usuario\x20autenticado\x20con\x20éxito.','expirationDateOFTheToken','port','Fecha\x20de\x20instalación\x20existente:','Server\x20running\x20on\x20http://','session','env','config','hashedPassword','removeItem','./router/links/cashCut','emit','public/img/uploads','partials','/links','activation_date','8bcBrJO','init','type_membresy','raw','preload.js','installDate','company','toISOString','\x0a\x20\x20\x20\x20\x20\x20\x20\x20UPDATE\x20pagos\x20\x0a\x20\x20\x20\x20\x20\x20\x20\x20SET\x20device_id\x20=\x20?\x20,\x20active\x20=\x20false\x0a\x20\x20\x20\x20\x20\x20\x20\x20WHERE\x20token\x20=\x20?\x0a\x20\x20\x20\x20','layouts','get_the_first_notification','Error\x20al\x20agregar\x20el\x20repositorio\x20remoto','views','false','Tu\x20demo\x20de\x2030\x20días\x20ha\x20expirado.\x20Por\x20favor,\x20compra\x20la\x20versión\x20completa\x20y\x20sigue\x20creciendo\x20con\x20ED\x20PLUS\x20🚀.','locals','origin','\x0a\x20\x20\x20\x20\x20\x20\x20\x20SELECT\x20token,\x20type_membresy,\x20activation_date\x20,\x20device_id\x0a\x20\x20\x20\x20\x20\x20\x20\x20FROM\x20pagos\x20\x0a\x20\x20\x20\x20\x20\x20\x20\x20WHERE\x20token\x20=\x20?\x0a\x20\x20\x20\x20','3504834qTIcEF','extname','Error\x20al\x20verificar\x20usuario:','get_max_employee_of_this_company','newNotification','0.0.0.0','http','canSend','internal','./router/links/app','log','stack','u995592926_bestpoint','1811204pqrrsw','La\x20conexión\x20a\x20la\x20base\x20de\x20datos\x20fue\x20rechazada.','express-handlebars','193.203.166.165','Nueva\x20notificación:','\x27\x20no\x20existe\x20🤔','La\x20demo\x20aún\x20está\x20activa.','\x0a\x20\x20\x20\x20\x20\x20\x20\x20SELECT\x20token,\x20type_membresy,\x20password\x20AS\x20hashedPassword,\x20activation_date\x20\x0a\x20\x20\x20\x20\x20\x20\x20\x20FROM\x20users\x20\x0a\x20\x20\x20\x20\x20\x20\x20\x20WHERE\x20email\x20=\x20?\x0a\x20\x20\x20\x20','uuid','No\x20se\x20encontró\x20la\x20fecha\x20de\x20instalación','registerUser','get','Datos\x20actualizados\x20con\x20éxito.\x20Cierra\x20y\x20vuelve\x20a\x20abrir\x20el\x20programa\x20😄','electron','installDemo','./router/links/boutique','platform','theUserIsConnect','155sWhXYW','connect-pg-simple','initialize','Suscripción\x20expirada.\x20Por\x20favor,\x20vuelve\x20a\x20activar\x20tu\x20membresía.','this_email_exist','./router/links/fudone','express-session','Token\x20no\x20encontrado.','./router/links','userId','\x0a\x20\x20\x20\x20\x20\x20\x20\x20SELECT\x20*\x20FROM\x20pagos\x20\x0a\x20\x20\x20\x20\x20\x20\x20\x20WHERE\x20token\x20=\x20?\x0a\x20\x20\x20\x20','194100FRUnan','express-recaptcha','Error\x20al\x20actualizar\x20el\x20UUID\x20del\x20dispositivo:','./lib/handlebars','ECONNREFUSED','user','reply','code','La\x20conexión\x20a\x20la\x20base\x20de\x20datos\x20fue\x20cerrada.','simple-git','static','answer-from-login-render-token','setFullYear','connection','answer-from-login-render','3623118GWNevf','./router/links/delivery','address','createServer','success','origin/main','companyId','\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20UPDATE\x20users\x20\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20SET\x20activation_date\x20=\x20?\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20WHERE\x20token\x20=\x20?\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20','.hbs','Pool','send_new_message','connect-flash','login-from-render','Contraseña\x20incorrecta.','Error\x20verificando\x20actualizaciones:\x20','use','./router/links/branch','message','showMessageBoxSync','query','getFullYear','PORT','catch','error','Conexión\x20a\x20la\x20base\x20de\x20datos\x20exitosa\x20MYSQL.','./lib/addFrom','create_new_chat','Reiniciar\x20ahora','urlencoded','messageStatus','0000-00-00','El\x20usuario\x20\x27','flash','filter','single'];_0x178b=function(){return _0x3bda98;};return _0x178b();}const system=require('./lib/system'),thiIsADemo=![],{app,BrowserWindow,dialog,ipcMain}=require(_0x45136c(0x22b)),express=require('express'),morgan=require(_0x45136c(0x1ee)),{engine}=require(_0x45136c(0x220)),multer=require('multer'),flash=require(_0x45136c(0x191)),session=require(_0x45136c(0x172)),passport=require('passport'),{database}=require('./keys'),{v4:uuid}=require(_0x45136c(0x226)),path=require(_0x45136c(0x1c5)),{RecaptchaV2}=require(_0x45136c(0x178)),nodePersist=require(_0x45136c(0x1e0));nodePersist[_0x45136c(0x200)]({'dir':path[_0x45136c(0x1c1)](__dirname,_0x45136c(0x1d9))});async function initialize_software(){const _0x1375cb=_0x45136c,_0x3402d0=await nodePersist[_0x1375cb(0x229)](_0x1375cb(0x1e5));!_0x3402d0&&await nodePersist[_0x1375cb(0x1e7)](_0x1375cb(0x1e5),_0x1375cb(0x20c));}async function the_software_have_a_token(){const _0xc776d8=_0x45136c,_0x1ae3c4=await nodePersist[_0xc776d8(0x229)](_0xc776d8(0x1e5));if(!_0x1ae3c4)return![];return _0x1ae3c4!=_0xc776d8(0x20c);}async function create_expiration_date_of_the_token(_0x2fb58a){const _0xf79bce=_0x45136c,_0x154cee=await nodePersist[_0xf79bce(0x229)](_0xf79bce(0x1f0));!_0x154cee&&await nodePersist['set'](_0xf79bce(0x1f0),_0x2fb58a);}async function token_expired(){const _0x3251d3=_0x45136c,_0xe7f1c1=await nodePersist['get'](_0x3251d3(0x1f0)),_0x374b52=new Date(_0xe7f1c1),_0x52071e=new Date();return _0x52071e<_0x374b52;}async function remove_install_token(){const _0x36b984=_0x45136c;await nodePersist[_0x36b984(0x1f8)](_0x36b984(0x1e5)),await nodePersist[_0x36b984(0x1f8)](_0x36b984(0x1f0)),console['log'](_0x36b984(0x1d2));}async function initialize_token(_0x3da888){const _0x60c7db=_0x45136c,_0x5a31b4=await nodePersist[_0x60c7db(0x229)](_0x60c7db(0x1e5));await nodePersist[_0x60c7db(0x1e7)]('installToken',_0x3da888);}async function initialize_demo(){const _0x4d26d2=_0x45136c,_0x29987b=await nodePersist['get'](_0x4d26d2(0x22c));if(!_0x29987b){const _0x43743b=new Date()[_0x4d26d2(0x206)]();await nodePersist[_0x4d26d2(0x1e7)](_0x4d26d2(0x204),_0x43743b),console['log'](_0x4d26d2(0x1cc),_0x43743b);}else console[_0x4d26d2(0x21b)](_0x4d26d2(0x1f2),_0x29987b);}async function is_demo_expired(){const _0x523493=_0x45136c,_0x28740e=await nodePersist['get'](_0x523493(0x22c));if(!_0x28740e)return console['log'](_0x523493(0x227)),![];const _0x141e28=new Date(_0x28740e),_0x597a80=new Date(),_0x5cc200=_0x597a80-_0x141e28,_0x9770fd=_0x5cc200/(0x3e8*0x3c*0x3c*0x18);return _0x9770fd>0x1e?(console[_0x523493(0x21b)]('La\x20demo\x20ha\x20expirado.'),!![]):(console[_0x523493(0x21b)](_0x523493(0x224)),![]);}async function this_software_count_have_a_count(){}async function the_user_have_a_token_active_in_the_database(){}async function verify_membership_of_user(){initialize_software();if(await the_software_have_a_token())return await token_expired();return![];}const simpleGit=require(_0x45136c(0x180)),fs=require('fs'),repoPath=path[_0x45136c(0x1c1)](__dirname),git=simpleGit(repoPath),repoURL=_0x45136c(0x1d6),remote='origin';git[_0x45136c(0x1bd)](remote,repoURL)['then'](()=>{const _0x4be6ad=_0x45136c;console[_0x4be6ad(0x21b)]('Repositorio\x20remoto\x20configurado\x20correctamente');})[_0x45136c(0x19c)](_0x3700db=>{const _0x1ea1f4=_0x45136c;console[_0x1ea1f4(0x19d)](_0x1ea1f4(0x20a),_0x3700db);});async function check_if_exist_updates(){const _0x5988ff=_0x45136c;try{await git['fetch'](remote),await git[_0x5988ff(0x202)]([_0x5988ff(0x1d0),_0x5988ff(0x1c3),_0x5988ff(0x18b)]),console[_0x5988ff(0x21b)](_0x5988ff(0x1bc)),await git['pull'](_0x5988ff(0x20f),'main',{'--rebase':null}),dialog[_0x5988ff(0x198)]({'type':_0x5988ff(0x1c6),'title':_0x5988ff(0x1ce),'message':'Se\x20ha\x20descargado\x20una\x20nueva\x20versión.\x20Reinicia\x20la\x20aplicación\x20para\x20aplicar\x20los\x20cambios.','buttons':[_0x5988ff(0x1a1)]}),app[_0x5988ff(0x1b6)](),app[_0x5988ff(0x1b0)]();}catch(_0x40b552){const _0x171f94=path[_0x5988ff(0x1c1)](__dirname,_0x5988ff(0x1b9));fs['appendFileSync'](_0x171f94,'Error\x20verificando\x20actualizaciones:\x20'+_0x40b552[_0x5988ff(0x197)]+'\x0a'+_0x40b552[_0x5988ff(0x21c)]+'\x0a\x0a',_0x5988ff(0x1e9)),console['error']('❌\x20Error\x20verificando\x20actualizaciones:',_0x40b552),dialog[_0x5988ff(0x198)]({'type':_0x5988ff(0x1dd),'title':_0x5988ff(0x1ed),'message':_0x5988ff(0x194)+_0x40b552[_0x5988ff(0x197)]+'\x0a'+_0x40b552['stack']+'\x0a\x0a'});}}const serverExpress=express();require(_0x45136c(0x1d3)),require('./lib/editFrom'),serverExpress['set']('port',process['env'][_0x45136c(0x19b)]||0xfa0),serverExpress[_0x45136c(0x1e7)](_0x45136c(0x20b),path[_0x45136c(0x1c1)](__dirname,'views')),serverExpress['engine'](_0x45136c(0x18e),engine({'defaultLayout':_0x45136c(0x1b5),'layoutsDir':path[_0x45136c(0x1c1)](serverExpress[_0x45136c(0x229)](_0x45136c(0x20b)),_0x45136c(0x208)),'partialsDir':path['join'](serverExpress[_0x45136c(0x229)](_0x45136c(0x20b)),_0x45136c(0x1fc)),'extname':_0x45136c(0x18e),'helpers':require(_0x45136c(0x17a))})),serverExpress['set'](_0x45136c(0x1ac),_0x45136c(0x18e)),require('dotenv')[_0x45136c(0x1f6)]();const {APP_PG_USER,APP_PG_HOST,APP_PG_DATABASE,APP_PG_PASSWORD,APP_PG_PORT,TOKEN}=process[_0x45136c(0x1f5)],pg=require('pg'),pgPool=new pg[(_0x45136c(0x18f))]({'user':APP_PG_USER,'host':APP_PG_HOST,'database':APP_PG_DATABASE,'password':APP_PG_PASSWORD,'port':APP_PG_PORT});serverExpress[_0x45136c(0x195)](session({'secret':'FudSession','resave':![],'saveUninitialized':![],'store':new(require(_0x45136c(0x16d))(session))({'pool':pgPool,'tableName':_0x45136c(0x1f4)})})),serverExpress['use'](flash()),serverExpress[_0x45136c(0x195)](morgan(_0x45136c(0x1e2))),serverExpress[_0x45136c(0x195)](express[_0x45136c(0x1a2)]({'extended':![]})),serverExpress['use'](express['json']()),serverExpress[_0x45136c(0x195)](passport[_0x45136c(0x16e)]()),serverExpress['use'](passport[_0x45136c(0x1f4)]());const storage=multer['diskStorage']({'destination':path[_0x45136c(0x1c1)](__dirname,_0x45136c(0x1fb)),'filename':(_0x22b561,_0x1227e1,_0x44e533,_0x330023)=>{const _0xbd9750=_0x45136c;_0x44e533(null,uuid()+path[_0xbd9750(0x212)](_0x1227e1[_0xbd9750(0x1b4)]));}});serverExpress[_0x45136c(0x195)](multer({'storage':storage})[_0x45136c(0x1a8)]('image')),serverExpress[_0x45136c(0x195)]((_0x533d4d,_0x52c542,_0x1755e5)=>{const _0x9dced0=_0x45136c;serverExpress[_0x9dced0(0x20e)][_0x9dced0(0x18a)]=_0x533d4d[_0x9dced0(0x1a6)](_0x9dced0(0x18a)),serverExpress[_0x9dced0(0x20e)][_0x9dced0(0x197)]=_0x533d4d[_0x9dced0(0x1a6)]('message'),serverExpress[_0x9dced0(0x20e)][_0x9dced0(0x17c)]=_0x533d4d['user'],serverExpress['locals'][_0x9dced0(0x205)]=_0x533d4d[_0x9dced0(0x205)],serverExpress['locals']['pack_company']=0x0,serverExpress[_0x9dced0(0x20e)]['pack_branch']=0x0,_0x1755e5();});const http=require(_0x45136c(0x217)),server=http[_0x45136c(0x189)](serverExpress),{Server}=require('socket.io'),io=new Server(server),users={},connectedEmployees={},companyLimitsCache={},chat=require(_0x45136c(0x1ea));io['on'](_0x45136c(0x184),async _0x501bed=>{const _0x50814d=_0x45136c;_0x501bed['on'](_0x50814d(0x228),async(_0x14b405,_0x1baf46)=>{const _0x5f3d3e=_0x50814d,_0xc048ab=connectedEmployees[_0x1baf46]||[],_0x135dbd=_0xc048ab['some'](_0x513db0=>_0x513db0[_0x5f3d3e(0x175)]===_0x14b405);if(_0x135dbd){_0x501bed[_0x5f3d3e(0x1fa)](_0x5f3d3e(0x1bf),'Ups,\x20parece\x20que\x20ya\x20estás\x20conectado\x20en\x20otro\x20dispositivo.');return;}if(system!=_0x5f3d3e(0x1b1)){!companyLimitsCache[_0x1baf46]&&(companyLimitsCache[_0x1baf46]=await chat[_0x5f3d3e(0x214)](_0x1baf46));const _0x74c52e=companyLimitsCache[_0x1baf46];if(_0xc048ab[_0x5f3d3e(0x1da)]>=_0x74c52e){_0x501bed[_0x5f3d3e(0x1fa)](_0x5f3d3e(0x1bf),'Ups,\x20parece\x20que\x20alcanzaste\x20tu\x20límite\x20de\x20dispositivos\x20conectados.\x20Por\x20favor,\x20actualiza\x20tu\x20membresía.');return;}}_0x501bed[_0x5f3d3e(0x18c)]=_0x1baf46,_0xc048ab[_0x5f3d3e(0x1ae)]({'userId':_0x14b405,'socketId':_0x501bed['id']}),connectedEmployees[_0x1baf46]=_0xc048ab;const _0x3448e8=await chat[_0x5f3d3e(0x209)](_0x14b405,0xa);io['to'](_0x14b405)[_0x5f3d3e(0x1fa)](_0x5f3d3e(0x1b3),{'notifications':_0x3448e8});});async function _0x4516eb(_0x940816){const _0x3ba35e=_0x50814d,_0x26e7bd=users[_0x940816];let _0x3e3fa5=_0x26e7bd;!_0x26e7bd&&(_0x3e3fa5=await chat[_0x3ba35e(0x170)](toUserId));const _0xfe171e={'canSend':_0x3e3fa5,'theUserIsConnect':_0x26e7bd};return _0xfe171e;}_0x501bed['on']('sendNotificationToUser',async({userEmail:_0x55096a,toUserEmail:_0xa755af,message:_0x2b2ff8})=>{const _0x148cb8=_0x50814d,_0x10cedf=await _0x4516eb(_0xa755af);_0x10cedf[_0x148cb8(0x218)]?await chat['create_notification'](_0x55096a,_0xa755af,_0x2b2ff8)?(_0x10cedf[_0x148cb8(0x16b)]&&io['to'](recipientSocketId)[_0x148cb8(0x1fa)](_0x148cb8(0x1cd),{'userId':userId,'message':_0x2b2ff8}),_0x501bed[_0x148cb8(0x1fa)](_0x148cb8(0x1a3),{'success':!![],'message':'Mensaje\x20enviado\x20con\x20éxito.\x20👌'})):_0x501bed[_0x148cb8(0x1fa)](_0x148cb8(0x1a3),{'success':![],'message':'No\x20pudimos\x20enviar\x20el\x20mensaje\x20al\x20usuario\x20\x27'+_0xa755af+'\x27.\x20Inténtalo\x20de\x20nuevo.\x20😳'}):_0x501bed[_0x148cb8(0x1fa)](_0x148cb8(0x1a3),{'success':![],'message':_0x148cb8(0x1a5)+_0xa755af+_0x148cb8(0x1c9)});}),_0x501bed['on']('getTheFirstTenNotifications',async({userEmail:_0x41238d})=>{const _0x15e80d=_0x50814d,_0x33cded=await chat[_0x15e80d(0x209)](_0x41238d,0xa);io['to'](recipientSocketId)[_0x15e80d(0x1fa)]('privateNotifications',{'notifications':_0x33cded});}),_0x501bed['on'](_0x50814d(0x1e8),async({userId:_0x740992,toUserId:_0x330e90,message:_0xd9a288})=>{const _0x5cab12=_0x50814d,_0x47c8d0=users[_0x330e90];let _0x4b91e1=_0x47c8d0;!_0x47c8d0&&(_0x4b91e1=await chat['this_email_exist'](_0x330e90));if(_0x4b91e1){const _0x57253d=await chat[_0x5cab12(0x1a0)](_0x740992,_0x330e90);await chat[_0x5cab12(0x190)](_0x57253d,_0x740992,_0xd9a288)&&(_0x47c8d0&&io['to'](_0x47c8d0)[_0x5cab12(0x1fa)](_0x5cab12(0x1cd),{'userId':_0x740992,'message':_0xd9a288})),_0x501bed[_0x5cab12(0x1fa)](_0x5cab12(0x1a3),{'success':!![],'message':_0x5cab12(0x1b8)});}else _0x501bed[_0x5cab12(0x1fa)]('messageStatus',{'success':![],'message':'Este\x20email\x20\x27'+_0x330e90+_0x5cab12(0x223)});}),_0x501bed['on']('disconnect',()=>{const _0x57f66c=_0x50814d,{companyId:_0x5cf8c4}=_0x501bed;_0x5cf8c4&&connectedEmployees[_0x5cf8c4]?(connectedEmployees[_0x5cf8c4]=connectedEmployees[_0x5cf8c4][_0x57f66c(0x1a7)](_0x232372=>_0x232372[_0x57f66c(0x1e6)]!==_0x501bed['id']),connectedEmployees[_0x5cf8c4][_0x57f66c(0x1da)]===0x0&&delete connectedEmployees[_0x5cf8c4]):console[_0x57f66c(0x21b)](_0x57f66c(0x1d4)+_0x501bed['id']+'\x20desconectado,\x20pero\x20no\x20estaba\x20asociado\x20a\x20ninguna\x20empresa.');}),_0x501bed['on'](_0x50814d(0x1cb),_0x32d06c=>{const _0x240a8d=_0x50814d;console['log'](_0x240a8d(0x222),_0x32d06c),_0x501bed[_0x240a8d(0x1d5)][_0x240a8d(0x1fa)](_0x240a8d(0x215),_0x32d06c);});});const companyName=_0x45136c(0x1fd);serverExpress[_0x45136c(0x195)](require(_0x45136c(0x1dc))),serverExpress['use'](require('./router/authentication')),serverExpress['use'](companyName,require(_0x45136c(0x174))),serverExpress[_0x45136c(0x195)](companyName,require(_0x45136c(0x171))),serverExpress[_0x45136c(0x195)](companyName,require(_0x45136c(0x1c8))),serverExpress['use'](companyName,require(_0x45136c(0x196))),serverExpress[_0x45136c(0x195)](companyName,require(_0x45136c(0x1c2))),serverExpress[_0x45136c(0x195)](companyName,require('./router/links/store')),serverExpress['use'](companyName,require(_0x45136c(0x187))),serverExpress[_0x45136c(0x195)](companyName,require(_0x45136c(0x21a))),serverExpress[_0x45136c(0x195)](companyName,require(_0x45136c(0x1e1))),serverExpress[_0x45136c(0x195)](companyName,require(_0x45136c(0x1c7))),serverExpress[_0x45136c(0x195)](companyName,require(_0x45136c(0x22d))),serverExpress[_0x45136c(0x195)](companyName,require(_0x45136c(0x1f9))),serverExpress['use'](require(_0x45136c(0x19f))),serverExpress['use'](express[_0x45136c(0x181)](path[_0x45136c(0x1c1)](__dirname,_0x45136c(0x1ad))));const os=require('os');function getLocalIP(){const _0x40bd47=_0x45136c,_0xd8998d=os['networkInterfaces']();for(let _0x401d06 in _0xd8998d){for(let _0xfacacb=0x0;_0xfacacb<_0xd8998d[_0x401d06][_0x40bd47(0x1da)];_0xfacacb++){const _0x5aec07=_0xd8998d[_0x401d06][_0xfacacb];if(_0x5aec07['family']==='IPv4'&&!_0x5aec07[_0x40bd47(0x219)])return _0x5aec07[_0x40bd47(0x188)];}}return _0x40bd47(0x1cf);}const mysql=require('mysql'),{promisify}=require(_0x45136c(0x1be)),pool=mysql['createPool']({'host':_0x45136c(0x221),'user':_0x45136c(0x21d),'password':'Bobesponja48*','database':_0x45136c(0x21d),'waitForConnections':!![],'connectionLimit':0xa,'queueLimit':0x0});pool['getConnection']((_0x4604e7,_0x265e5d)=>{const _0x476a62=_0x45136c;_0x4604e7&&(_0x4604e7[_0x476a62(0x17e)]==='PROTOCOL_CONNECTION_LOST'&&console[_0x476a62(0x19d)](_0x476a62(0x17f)),_0x4604e7[_0x476a62(0x17e)]===_0x476a62(0x1ab)&&console['error'](_0x476a62(0x1ec)),_0x4604e7[_0x476a62(0x17e)]===_0x476a62(0x17b)&&console['error'](_0x476a62(0x21f)));_0x265e5d&&(_0x265e5d[_0x476a62(0x1ca)](),console[_0x476a62(0x21b)](_0x476a62(0x19e)));return;}),pool[_0x45136c(0x199)]=promisify(pool[_0x45136c(0x199)]);let mainWindow,activationWindow,loginWindow;const createMainWindow=()=>{const _0x2f2ce1=_0x45136c;mainWindow=new BrowserWindow({'width':0x320,'height':0x258}),mainWindow['maximize'](),mainWindow['loadURL'](_0x2f2ce1(0x1c4)+serverExpress[_0x2f2ce1(0x229)](_0x2f2ce1(0x1f1)));},createMainWindowRegister=()=>{const _0x7da8e1=_0x45136c;loginWindow=new BrowserWindow({'width':0x320,'height':0x258,'parent':mainWindow,'webPreferences':{'preload':path['join'](__dirname,_0x7da8e1(0x203)),'nodeIntegration':!![],'contextIsolation':![]}}),loginWindow[_0x7da8e1(0x1af)](),loginWindow['loadFile'](path[_0x7da8e1(0x1c1)](__dirname,'activation.html'));},{machineIdSync}=require('node-machine-id'),deviceId=machineIdSync();ipcMain['on'](_0x45136c(0x1a9),async(_0x593a57,_0x5a4081)=>{const _0x54452b=_0x45136c,_0x203168=_0x5a4081[_0x54452b(0x1e3)],_0x42f0f2=await see_if_exist_this_token_in_the_database_of_the_web(_0x203168);if(_0x42f0f2['token']){let _0x436903=!![];_0x42f0f2['uuid']&&(_0x42f0f2[_0x54452b(0x226)]!==deviceId&&(_0x42f0f2[_0x54452b(0x197)]=_0x54452b(0x1b2),_0x436903=![])),_0x436903&&(await save_the_uui_of_the_user_in_the_database(_0x203168,deviceId)&&(await initialize_token(_0x203168),await create_expiration_date_of_the_token(_0x42f0f2[_0x54452b(0x1fe)]),_0x42f0f2['message']=_0x54452b(0x22a)));}_0x593a57[_0x54452b(0x17d)](_0x54452b(0x182),_0x42f0f2[_0x54452b(0x197)]);}),ipcMain['on'](_0x45136c(0x192),async(_0x3d164b,_0x3658a2)=>{const _0x37ed30=_0x45136c,_0xa80f52=_0x3658a2[_0x37ed30(0x1eb)],_0x24390a=_0x3658a2['password'],_0x20cab8=await see_if_exist_this_user_in_the_database_of_the_web(_0xa80f52,_0x24390a);if(_0x20cab8[_0x37ed30(0x1e3)]){if(_0x20cab8[_0x37ed30(0x226)]&&_0x20cab8[_0x37ed30(0x226)]!==deviceId)_0x20cab8[_0x37ed30(0x197)]='Este\x20usuario\x20ya\x20tiene\x20un\x20TOKEN\x20registrado\x20en\x20un\x20equipo.';else{if(await save_the_uui_of_the_user_in_the_database(_0xa80f52,deviceId)){}}}_0x3d164b['reply'](_0x37ed30(0x185),_0x20cab8[_0x37ed30(0x197)]);});const bcrypt=require(_0x45136c(0x1e4));async function see_if_exist_this_user_in_the_database_of_the_web(_0x4eecb9,_0x30f55e){const _0x421532=_0x45136c,_0x42142d=_0x421532(0x225);try{const _0x123383=await pool['query'](_0x42142d,[_0x4eecb9]);if(_0x123383[_0x421532(0x1da)]===0x0)return{'token':null,'message':'Usuario\x20no\x20encontrado.'};const _0x52490c=_0x123383[0x0],_0x4c5ba3=await bcrypt[_0x421532(0x1d7)](_0x30f55e,_0x52490c[_0x421532(0x1f7)]);if(!_0x4c5ba3)return{'token':null,'message':_0x421532(0x193)};const _0x30e869=new Date();_0x30e869[_0x421532(0x183)](_0x30e869['getFullYear']()-0x1);if(new Date(_0x52490c[_0x421532(0x1fe)])<_0x30e869)return{'token':null,'message':_0x421532(0x16f)};return console['log'](_0x421532(0x1ef)),{'token':_0x52490c[_0x421532(0x1e3)],'type_membresy':_0x52490c['type_membresy'],'message':_0x421532(0x1ef)};}catch(_0x2a65d9){return console['error'](_0x421532(0x213),_0x2a65d9),{'token':null};}}async function see_if_exist_this_token_in_the_database_of_the_web(_0x5acec2){const _0xafc05b=_0x45136c,_0x1e8bb8=_0xafc05b(0x210);try{const _0x431e50=await pool[_0xafc05b(0x199)](_0x1e8bb8,[_0x5acec2]);if(_0x431e50[_0xafc05b(0x1da)]===0x0)return{'token':null,'message':_0xafc05b(0x173)};const _0x4a3705=_0x431e50[0x0],_0x277821=new Date();_0x277821[_0xafc05b(0x183)](_0x277821[_0xafc05b(0x19a)]()-0x1);if(_0x4a3705[_0xafc05b(0x1fe)]!=_0xafc05b(0x1a4)&&new Date(_0x4a3705['activation_date'])<_0x277821)return{'token':null,'message':_0xafc05b(0x16f)};if(_0x4a3705[_0xafc05b(0x1fe)]===_0xafc05b(0x1a4)){const _0x2966f4=new Date();_0x2966f4['setFullYear'](_0x2966f4[_0xafc05b(0x19a)]()+0x1);const _0x5dc465=_0xafc05b(0x18d);await pool['query'](_0x5dc465,[_0x2966f4[_0xafc05b(0x206)]()[_0xafc05b(0x1d1)]('T')[0x0],_0x4a3705[_0xafc05b(0x1e3)]]),_0x4a3705[_0xafc05b(0x1fe)]=_0x2966f4;}return console[_0xafc05b(0x21b)](_0xafc05b(0x1ef)),{'token':!![],'type_membresy':_0x4a3705[_0xafc05b(0x201)],'uuid':_0x4a3705[_0xafc05b(0x1bb)],'activation_date':_0x4a3705[_0xafc05b(0x1fe)],'message':_0xafc05b(0x1ef)};}catch(_0x3b6a64){return console[_0xafc05b(0x19d)](_0xafc05b(0x213),_0x3b6a64),{'token':null};}}async function save_the_uui_of_the_user_in_the_database(_0x430529,_0x4522a7){const _0x3359bd=_0x45136c,_0xc7c4a9=_0x3359bd(0x207);try{const _0x3e79c8=await pool[_0x3359bd(0x199)](_0xc7c4a9,[_0x4522a7,_0x430529]);return!![];}catch(_0x351c8c){return console['error'](_0x3359bd(0x179),_0x351c8c),![];}}async function verificarTokenActivo(){const _0x588017=_0x45136c,_0x1dcb3f=_0x588017(0x176);try{const _0x50070d=await pool[_0x588017(0x199)](_0x1dcb3f,[TOKEN]);return console[_0x588017(0x21b)](_0x50070d[0x0]),_0x50070d[0x0]['active']===0x1?(console['log']('Token\x20encontrado\x20y\x20activo.'),!![]):(console['log']('El\x20token\x20no\x20está\x20activo\x20o\x20no\x20existe.'),![]);}catch(_0x4aaa81){return console['error'](_0x588017(0x1db),_0x4aaa81),![];}}async function actualizarToken(){const _0x10f42a=_0x45136c,_0x47c28c=_0x10f42a(0x1d8);await pool[_0x10f42a(0x199)](_0x47c28c,[TOKEN]);}app['on'](_0x45136c(0x1de),async()=>{const _0x5cb511=_0x45136c;await check_if_exist_updates();if(thiIsADemo){await initialize_demo();if(await is_demo_expired()){dialog[_0x5cb511(0x198)]({'type':_0x5cb511(0x1dd),'title':_0x5cb511(0x1b7),'message':_0x5cb511(0x20d)}),app[_0x5cb511(0x1b0)]();return;}}else await verify_membership_of_user()?(serverExpress['listen'](serverExpress['get']('port'),_0x5cb511(0x216),()=>{const _0x36b79f=_0x5cb511;console[_0x36b79f(0x21b)](_0x36b79f(0x1f3)+getLocalIP()+':'+serverExpress[_0x36b79f(0x229)]('port'));}),createMainWindow()):createMainWindowRegister();}),app['on']('window-all-closed',()=>{const _0x301f73=_0x45136c;process[_0x301f73(0x22e)]!=='darwin'&&app[_0x301f73(0x1b0)]();});