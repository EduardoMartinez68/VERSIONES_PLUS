const _0x3a3066=_0x4bac;(function(_0x2c7d98,_0x9362c){const _0x4e5b96=_0x4bac,_0x5ce38f=_0x2c7d98();while(!![]){try{const _0x45db08=parseInt(_0x4e5b96(0x162))/0x1*(parseInt(_0x4e5b96(0xdb))/0x2)+parseInt(_0x4e5b96(0x111))/0x3+-parseInt(_0x4e5b96(0x17c))/0x4+-parseInt(_0x4e5b96(0xaf))/0x5*(-parseInt(_0x4e5b96(0x185))/0x6)+parseInt(_0x4e5b96(0x174))/0x7*(-parseInt(_0x4e5b96(0x159))/0x8)+parseInt(_0x4e5b96(0xd3))/0x9*(parseInt(_0x4e5b96(0xf2))/0xa)+-parseInt(_0x4e5b96(0xc1))/0xb*(parseInt(_0x4e5b96(0x112))/0xc);if(_0x45db08===_0x9362c)break;else _0x5ce38f['push'](_0x5ce38f['shift']());}catch(_0x345a46){_0x5ce38f['push'](_0x5ce38f['shift']());}}}(_0x18ff,0xc4acc));const system=require(_0x3a3066(0x154)),thiIsADemo=![],{app,BrowserWindow,dialog,ipcMain}=require(_0x3a3066(0x14a)),express=require(_0x3a3066(0xd8)),morgan=require('morgan'),{engine}=require('express-handlebars'),multer=require(_0x3a3066(0xb5)),flash=require(_0x3a3066(0xd5)),session=require(_0x3a3066(0x17a)),passport=require('passport'),{database}=require('./keys'),{v4:uuid}=require(_0x3a3066(0x123)),path=require(_0x3a3066(0x114)),{RecaptchaV2}=require(_0x3a3066(0x12e)),nodePersist=require(_0x3a3066(0x175));nodePersist[_0x3a3066(0x184)]({'dir':path[_0x3a3066(0x13e)](__dirname,_0x3a3066(0x158))});async function initialize_software(){const _0x3b478d=_0x3a3066,_0x47afcd=await nodePersist['get'](_0x3b478d(0xc6));!_0x47afcd&&await nodePersist[_0x3b478d(0x12c)](_0x3b478d(0xc6),_0x3b478d(0xf1));}async function the_software_have_a_token(){const _0x2b3505=_0x3a3066,_0x88ff9=await nodePersist['get'](_0x2b3505(0xc6));if(!_0x88ff9)return![];return _0x88ff9!='false';}async function create_expiration_date_of_the_token(_0x3b6005){const _0x3ee8d7=_0x3a3066,_0x12bac6=await nodePersist['get']('expirationDateOFTheToken');!_0x12bac6&&await nodePersist[_0x3ee8d7(0x12c)](_0x3ee8d7(0x137),_0x3b6005);}async function token_expired(){const _0x2c83fe=_0x3a3066,_0x32be96=await nodePersist[_0x2c83fe(0x146)](_0x2c83fe(0x137)),_0x988d4b=new Date(_0x32be96),_0x4cabb7=new Date();return _0x4cabb7<_0x988d4b;}async function remove_install_token(){const _0x293de0=_0x3a3066;await nodePersist[_0x293de0(0x153)](_0x293de0(0xc6)),await nodePersist[_0x293de0(0x153)]('expirationDateOFTheToken'),console['log'](_0x293de0(0x161));}async function initialize_token(_0x577a6e){const _0x1477d1=_0x3a3066,_0x11a8fb=await nodePersist[_0x1477d1(0x146)](_0x1477d1(0xc6));await nodePersist[_0x1477d1(0x12c)](_0x1477d1(0xc6),_0x577a6e);}async function initialize_demo(){const _0x372269=_0x3a3066,_0x273330=await nodePersist[_0x372269(0x146)](_0x372269(0xd1));if(!_0x273330){const _0xbb284a=new Date()[_0x372269(0x116)]();await nodePersist[_0x372269(0x12c)]('installDate',_0xbb284a),console[_0x372269(0xb1)](_0x372269(0x16a),_0xbb284a);}else console[_0x372269(0xb1)](_0x372269(0x16c),_0x273330);}async function is_demo_expired(){const _0xf19c31=_0x3a3066,_0x301e6a=await nodePersist[_0xf19c31(0x146)](_0xf19c31(0xd1));if(!_0x301e6a)return console[_0xf19c31(0xb1)](_0xf19c31(0xe5)),![];const _0x560dd7=new Date(_0x301e6a),_0x2094a7=new Date(),_0x2cba40=_0x2094a7-_0x560dd7,_0xb22745=_0x2cba40/(0x3e8*0x3c*0x3c*0x18);return _0xb22745>0x1e?(console[_0xf19c31(0xb1)]('La\x20demo\x20ha\x20expirado.'),!![]):(console[_0xf19c31(0xb1)]('La\x20demo\x20aún\x20está\x20activa.'),![]);}async function this_software_count_have_a_count(){}async function the_user_have_a_token_active_in_the_database(){}async function verify_membership_of_user(){initialize_software();if(await the_software_have_a_token())return await token_expired();return![];}const simpleGit=require(_0x3a3066(0x11a)),fs=require('fs'),repoPath=path[_0x3a3066(0x13e)](__dirname),git=simpleGit(repoPath),repoURL=_0x3a3066(0xf8),remote=_0x3a3066(0x13b);git[_0x3a3066(0xc3)](remote,repoURL)[_0x3a3066(0x117)](()=>{const _0xea78ac=_0x3a3066;console['log'](_0xea78ac(0x133));})['catch'](_0xd577a=>{const _0x4ee788=_0x3a3066;console[_0x4ee788(0x11d)](_0x4ee788(0x141),_0xd577a);});async function check_if_exist_updates(){const _0x3a2f25=_0x3a3066;try{await git[_0x3a2f25(0x102)](remote);const _0x2e1aaf=await git[_0x3a2f25(0xb1)]([remote+_0x3a2f25(0xfd),'-1']),_0x5b2633=await git[_0x3a2f25(0xb1)]([_0x3a2f25(0x15d),'-1']);_0x2e1aaf['latest'][_0x3a2f25(0x183)]!==_0x5b2633['latest'][_0x3a2f25(0x183)]?(console[_0x3a2f25(0xb1)](_0x3a2f25(0xa7)),await git['raw'](['reset',_0x3a2f25(0xbe),remote+'/main']),await git[_0x3a2f25(0x12a)]('origin','main',{'--rebase':null}),dialog[_0x3a2f25(0xe4)]({'type':_0x3a2f25(0xde),'title':_0x3a2f25(0xb9),'message':_0x3a2f25(0x121),'buttons':[_0x3a2f25(0x172)]}),app[_0x3a2f25(0x15c)](),app['quit']()):console[_0x3a2f25(0xb1)]('✅\x20La\x20aplicación\x20ya\x20está\x20actualizada.');}catch(_0x2fff6f){const _0x2ef3bd=path['join'](__dirname,_0x3a2f25(0xef));fs[_0x3a2f25(0x107)](_0x2ef3bd,_0x3a2f25(0x152)+_0x2fff6f[_0x3a2f25(0x129)]+'\x0a'+_0x2fff6f[_0x3a2f25(0xc2)]+'\x0a\x0a','utf8'),console[_0x3a2f25(0x11d)](_0x3a2f25(0xb4),_0x2fff6f),dialog['showMessageBoxSync']({'type':'warning','title':_0x3a2f25(0xee),'message':'Error\x20verificando\x20actualizaciones:\x20'+_0x2fff6f[_0x3a2f25(0x129)]+'\x0a'+_0x2fff6f[_0x3a2f25(0xc2)]+'\x0a\x0a'});}}const serverExpress=express();require(_0x3a3066(0xa6)),require('./lib/editFrom'),serverExpress[_0x3a3066(0x12c)]('port',process[_0x3a3066(0x135)][_0x3a3066(0x16e)]||0xfa0),serverExpress[_0x3a3066(0x12c)](_0x3a3066(0xfe),path[_0x3a3066(0x13e)](__dirname,_0x3a3066(0xfe))),serverExpress[_0x3a3066(0xac)](_0x3a3066(0x147),engine({'defaultLayout':_0x3a3066(0x101),'layoutsDir':path[_0x3a3066(0x13e)](serverExpress[_0x3a3066(0x146)](_0x3a3066(0xfe)),_0x3a3066(0x110)),'partialsDir':path['join'](serverExpress[_0x3a3066(0x146)]('views'),'partials'),'extname':_0x3a3066(0x147),'helpers':require(_0x3a3066(0x15e))})),serverExpress[_0x3a3066(0x12c)]('view\x20engine','.hbs'),require('dotenv')[_0x3a3066(0xb7)]();const {APP_PG_USER,APP_PG_HOST,APP_PG_DATABASE,APP_PG_PASSWORD,APP_PG_PORT,TOKEN}=process[_0x3a3066(0x135)],pg=require('pg'),adminPool=new pg[(_0x3a3066(0x166))]({'user':APP_PG_USER,'host':APP_PG_HOST,'password':APP_PG_PASSWORD,'port':APP_PG_PORT,'database':'postgres'}),importSQLFile=async _0x40339a=>{const _0x235e91=_0x3a3066,_0x6d2983=path[_0x235e91(0x13e)](__dirname,_0x235e91(0xfa),_0x235e91(0x13f)),_0x4b031e=fs[_0x235e91(0xcc)](_0x6d2983,_0x235e91(0xe1)),_0x4ca9ad=_0x4b031e[_0x235e91(0x15b)](/;\s*$/m)[_0x235e91(0x14d)](_0x3bfaae=>_0x3bfaae['trim']())[_0x235e91(0x150)](_0x1bee88=>_0x1bee88[_0x235e91(0x134)]>0x0),_0x221bed=await _0x40339a['connect']();try{for(const _0x2375c9 of _0x4ca9ad){await _0x221bed['query'](_0x2375c9);}console[_0x235e91(0xb1)]('✅\x20SQL\x20ejecutado\x20correctamente');}catch(_0x40b24c){console[_0x235e91(0x11d)](_0x235e91(0x113),_0x40b24c[_0x235e91(0x129)]);}finally{_0x221bed[_0x235e91(0x145)]();}},createDatabase=async()=>{const _0x38aa07=_0x3a3066,_0x18cb18=await adminPool['query'](_0x38aa07(0xbb));_0x18cb18['rowCount']===0x0?(await adminPool['query'](_0x38aa07(0x16f)),importSQLFile(adminPool),console[_0x38aa07(0xb1)](_0x38aa07(0x136))):console[_0x38aa07(0xb1)](_0x38aa07(0xd6));};createDatabase();const pgPool=new pg['Pool']({'user':APP_PG_USER,'host':APP_PG_HOST,'database':APP_PG_DATABASE,'password':APP_PG_PASSWORD,'port':APP_PG_PORT});serverExpress[_0x3a3066(0xf9)](session({'secret':_0x3a3066(0x115),'resave':![],'saveUninitialized':![],'store':new(require(_0x3a3066(0x14c))(session))({'pool':pgPool,'tableName':_0x3a3066(0x143)})})),serverExpress[_0x3a3066(0xf9)](flash()),serverExpress[_0x3a3066(0xf9)](morgan(_0x3a3066(0x105))),serverExpress[_0x3a3066(0xf9)](express[_0x3a3066(0xa8)]({'extended':![]})),serverExpress[_0x3a3066(0xf9)](express[_0x3a3066(0x109)]()),serverExpress['use'](passport[_0x3a3066(0xae)]()),serverExpress[_0x3a3066(0xf9)](passport['session']());const storage=multer['diskStorage']({'destination':path[_0x3a3066(0x13e)](__dirname,_0x3a3066(0xaa)),'filename':(_0x46fdb0,_0x29be1e,_0x455811,_0x2be60f)=>{const _0x47a17c=_0x3a3066;_0x455811(null,uuid()+path[_0x47a17c(0xcf)](_0x29be1e[_0x47a17c(0x10a)]));}});serverExpress[_0x3a3066(0xf9)](multer({'storage':storage})[_0x3a3066(0x148)](_0x3a3066(0xbc))),serverExpress[_0x3a3066(0xf9)]((_0x350886,_0x3faff6,_0x475ccb)=>{const _0x442c40=_0x3a3066;serverExpress[_0x442c40(0x13c)][_0x442c40(0x16d)]=_0x350886[_0x442c40(0xcb)](_0x442c40(0x16d)),serverExpress[_0x442c40(0x13c)][_0x442c40(0x129)]=_0x350886['flash'](_0x442c40(0x129)),serverExpress['locals'][_0x442c40(0x10e)]=_0x350886[_0x442c40(0x10e)],serverExpress[_0x442c40(0x13c)][_0x442c40(0xe3)]=_0x350886['company'],serverExpress[_0x442c40(0x13c)][_0x442c40(0x160)]=0x0,serverExpress[_0x442c40(0x13c)][_0x442c40(0x17b)]=0x0,_0x475ccb();});const http=require('http'),server=http[_0x3a3066(0x11c)](serverExpress),{Server}=require(_0x3a3066(0x14e)),io=new Server(server),users={},connectedEmployees={},companyLimitsCache={},chat=require('./services/chat.js');io['on'](_0x3a3066(0x108),async _0xae499a=>{const _0x4ea1fa=_0x3a3066;_0xae499a['on'](_0x4ea1fa(0x11b),async(_0x58a0ff,_0x4a6d24)=>{const _0x4f9a2a=_0x4ea1fa,_0x3335ce=connectedEmployees[_0x4a6d24]||[],_0x2b8e1b=_0x3335ce[_0x4f9a2a(0x17e)](_0x16b8db=>_0x16b8db[_0x4f9a2a(0x17f)]===_0x58a0ff);if(_0x2b8e1b){_0xae499a['emit'](_0x4f9a2a(0xe9),_0x4f9a2a(0xff));return;}if(system!='desktop'){!companyLimitsCache[_0x4a6d24]&&(companyLimitsCache[_0x4a6d24]=await chat['get_max_employee_of_this_company'](_0x4a6d24));const _0x132c4c=companyLimitsCache[_0x4a6d24];if(_0x3335ce[_0x4f9a2a(0x134)]>=_0x132c4c){_0xae499a['emit'](_0x4f9a2a(0xe9),_0x4f9a2a(0xdc));return;}}_0xae499a[_0x4f9a2a(0x149)]=_0x4a6d24,_0x3335ce['push']({'userId':_0x58a0ff,'socketId':_0xae499a['id']}),connectedEmployees[_0x4a6d24]=_0x3335ce;const _0xf7416=await chat[_0x4f9a2a(0x10c)](_0x58a0ff,0xa);io['to'](_0x58a0ff)[_0x4f9a2a(0xc9)](_0x4f9a2a(0xc0),{'notifications':_0xf7416});});async function _0x316bbe(_0x2d7b39){const _0x2df72b=_0x4ea1fa,_0x47e3bf=users[_0x2d7b39];let _0x208766=_0x47e3bf;!_0x47e3bf&&(_0x208766=await chat[_0x2df72b(0xbf)](toUserId));const _0x539f56={'canSend':_0x208766,'theUserIsConnect':_0x47e3bf};return _0x539f56;}_0xae499a['on'](_0x4ea1fa(0x131),async({userEmail:_0x26d426,toUserEmail:_0x34d9a0,message:_0x4ed731})=>{const _0x3e64c6=_0x4ea1fa,_0x31184a=await _0x316bbe(_0x34d9a0);_0x31184a[_0x3e64c6(0x12d)]?await chat[_0x3e64c6(0xf0)](_0x26d426,_0x34d9a0,_0x4ed731)?(_0x31184a[_0x3e64c6(0xfc)]&&io['to'](recipientSocketId)[_0x3e64c6(0xc9)](_0x3e64c6(0xd7),{'userId':userId,'message':_0x4ed731}),_0xae499a[_0x3e64c6(0xc9)]('messageStatus',{'success':!![],'message':_0x3e64c6(0x100)})):_0xae499a[_0x3e64c6(0xc9)]('messageStatus',{'success':![],'message':'No\x20pudimos\x20enviar\x20el\x20mensaje\x20al\x20usuario\x20\x27'+_0x34d9a0+_0x3e64c6(0x12b)}):_0xae499a[_0x3e64c6(0xc9)](_0x3e64c6(0x170),{'success':![],'message':_0x3e64c6(0x180)+_0x34d9a0+_0x3e64c6(0x169)});}),_0xae499a['on'](_0x4ea1fa(0x132),async({userEmail:_0x25a697})=>{const _0x247cd0=_0x4ea1fa,_0x4afa94=await chat[_0x247cd0(0x10c)](_0x25a697,0xa);io['to'](recipientSocketId)[_0x247cd0(0xc9)](_0x247cd0(0xc0),{'notifications':_0x4afa94});}),_0xae499a['on']('sendMessageToUser',async({userId:_0x3b297d,toUserId:_0x571ed1,message:_0x10140b})=>{const _0x3752c1=_0x4ea1fa,_0x35e5a1=users[_0x571ed1];let _0x4818af=_0x35e5a1;!_0x35e5a1&&(_0x4818af=await chat[_0x3752c1(0xbf)](_0x571ed1));if(_0x4818af){const _0x59bfd0=await chat[_0x3752c1(0x167)](_0x3b297d,_0x571ed1);await chat[_0x3752c1(0x118)](_0x59bfd0,_0x3b297d,_0x10140b)&&(_0x35e5a1&&io['to'](_0x35e5a1)[_0x3752c1(0xc9)](_0x3752c1(0xd7),{'userId':_0x3b297d,'message':_0x10140b})),_0xae499a[_0x3752c1(0xc9)](_0x3752c1(0x170),{'success':!![],'message':_0x3752c1(0x10b)});}else _0xae499a['emit'](_0x3752c1(0x170),{'success':![],'message':_0x3752c1(0x128)+_0x571ed1+_0x3752c1(0xf4)});}),_0xae499a['on'](_0x4ea1fa(0x15f),()=>{const _0xe9f3cd=_0x4ea1fa,{companyId:_0x4769c2}=_0xae499a;_0x4769c2&&connectedEmployees[_0x4769c2]?(connectedEmployees[_0x4769c2]=connectedEmployees[_0x4769c2][_0xe9f3cd(0x150)](_0x3cf34d=>_0x3cf34d[_0xe9f3cd(0x11e)]!==_0xae499a['id']),connectedEmployees[_0x4769c2][_0xe9f3cd(0x134)]===0x0&&delete connectedEmployees[_0x4769c2]):console[_0xe9f3cd(0xb1)](_0xe9f3cd(0x140)+_0xae499a['id']+_0xe9f3cd(0x173));}),_0xae499a['on'](_0x4ea1fa(0xfb),_0x5c2ae9=>{const _0x41adb6=_0x4ea1fa;console[_0x41adb6(0xb1)](_0x41adb6(0xce),_0x5c2ae9),_0xae499a[_0x41adb6(0x155)][_0x41adb6(0xc9)](_0x41adb6(0xca),_0x5c2ae9);});});const companyName=_0x3a3066(0xb8);function _0x18ff(){const _0x40da1d=['./router/authentication','engine','193.203.166.165','initialize','35jXGAYn','activation.html','log','listen','Usuario\x20no\x20encontrado.','❌\x20Error\x20verificando\x20actualizaciones:','multer','\x0a\x20\x20\x20\x20\x20\x20\x20\x20SELECT\x20*\x20FROM\x20pagos\x20\x0a\x20\x20\x20\x20\x20\x20\x20\x20WHERE\x20token\x20=\x20?\x0a\x20\x20\x20\x20','config','/links','Actualización','address','SELECT\x201\x20FROM\x20pg_database\x20WHERE\x20datname\x20=\x20\x27edplus\x27','image','query','--hard','this_email_exist','privateNotifications','16539897WntwXe','stack','addRemote','Este\x20usuario\x20ya\x20tiene\x20un\x20TOKEN\x20registrado\x20en\x20un\x20equipo.','./router/links/desktop','installToken','answer-from-login-render-token','./router/links/store','emit','newNotification','flash','readFileSync','Tu\x20demo\x20de\x2030\x20días\x20ha\x20expirado.\x20Por\x20favor,\x20compra\x20la\x20versión\x20completa\x20y\x20sigue\x20creciendo\x20con\x20ED\x20PLUS\x20🚀.','Nueva\x20notificación:','extname','static','installDemo','login-from-render','5365152LsSKJm','compare','connect-flash','📂\x20La\x20base\x20de\x20datos\x20EDPLUS\x20ya\x20existe,\x20no\x20se\x20creó\x20nuevamente.','privateMessage','express','node-machine-id','./router/links/delivery','970706QiTxSf','Ups,\x20parece\x20que\x20alcanzaste\x20tu\x20límite\x20de\x20dispositivos\x20conectados.\x20Por\x20favor,\x20actualiza\x20tu\x20membresía.','Datos\x20actualizados\x20con\x20éxito.\x20Cierra\x20y\x20vuelve\x20a\x20abrir\x20el\x20programa\x20😄','info','\x0a\x20\x20\x20\x20\x20\x20\x20\x20SELECT\x20token,\x20type_membresy,\x20activation_date\x20,\x20device_id\x0a\x20\x20\x20\x20\x20\x20\x20\x20FROM\x20pagos\x20\x0a\x20\x20\x20\x20\x20\x20\x20\x20WHERE\x20token\x20=\x20?\x0a\x20\x20\x20\x20','quit','utf8','login-from-render-token','company','showMessageBoxSync','No\x20se\x20encontró\x20la\x20fecha\x20de\x20instalación','Demo\x20Expirada','reply','./router/links/branch','connectionRejected','mysql','Contraseña\x20incorrecta.','getConnection','public','Error\x20verificando\x20actualizaciones!','logfile.txt','create_notification','false','20qIgqIe','networkInterfaces','\x27\x20no\x20existe\x20🤔','internal','Error\x20al\x20actualizar\x20el\x20UUID\x20del\x20dispositivo:','answer-from-login-render','https://github.com/EduardoMartinez68/VERSIONES_PLUS','use','database','sendNotification','theUserIsConnect','/main','views','Ups,\x20parece\x20que\x20ya\x20estás\x20conectado\x20en\x20otro\x20dispositivo.','Mensaje\x20enviado\x20con\x20éxito.\x20👌','main','fetch','http://localhost:','preload.js','dev','bcrypt','appendFileSync','connection','json','originalname','Mensaje\x20enviado\x20con\x20éxito','get_the_first_notification','\x0a\x20\x20\x20\x20\x20\x20\x20\x20UPDATE\x20pagos\x20\x0a\x20\x20\x20\x20\x20\x20\x20\x20SET\x20device_id\x20=\x20?\x20,\x20active\x20=\x20false\x0a\x20\x20\x20\x20\x20\x20\x20\x20WHERE\x20token\x20=\x20?\x0a\x20\x20\x20\x20','user','./router/links/subscription','layouts','631656SiiiNX','12FXJxPx','❌\x20Error\x20ejecutando\x20SQL:','path','FudSession','toISOString','then','send_new_message','Conexión\x20a\x20la\x20base\x20de\x20datos\x20exitosa\x20MYSQL.','simple-git','registerUser','createServer','error','socketId','Error\x20al\x20verificar\x20usuario:','Suscripción\x20expirada.\x20Por\x20favor,\x20vuelve\x20a\x20activar\x20tu\x20membresía.','Se\x20ha\x20descargado\x20una\x20nueva\x20versión.\x20Reinicia\x20la\x20aplicación\x20para\x20aplicar\x20los\x20cambios.','ECONNREFUSED','uuid','device_id','token','port','warning','Este\x20email\x20\x27','message','pull','\x27.\x20Inténtalo\x20de\x20nuevo.\x20😳','set','canSend','express-recaptcha','./router/links','password','sendNotificationToUser','getTheFirstTenNotifications','Repositorio\x20remoto\x20configurado\x20correctamente','length','env','📦\x20Base\x20de\x20datos\x20EDPLUS\x20creada','expirationDateOFTheToken','IPv4','darwin','127.0.0.1','origin','locals','PROTOCOL_CONNECTION_LOST','join','edplus.sql','Socket\x20','Error\x20al\x20agregar\x20el\x20repositorio\x20remoto','Usuario\x20autenticado\x20con\x20éxito.','session','ER_CON_COUNT_ERROR','release','get','.hbs','single','companyId','electron','Token\x20encontrado\x20y\x20activo.','connect-pg-simple','map','socket.io','\x0a\x20\x20\x20\x20\x20\x20\x20\x20UPDATE\x20pagos\x20\x0a\x20\x20\x20\x20\x20\x20\x20\x20SET\x20active\x20=\x20false\x0a\x20\x20\x20\x20\x20\x20\x20\x20WHERE\x20token\x20=\x20?\x0a\x20\x20\x20\x20','filter','ready','Error\x20verificando\x20actualizaciones:\x20','removeItem','./lib/system','broadcast','Error\x20al\x20verificar\x20el\x20token:','setFullYear','data','600856UPpZWn','type_membresy','split','relaunch','HEAD','./lib/handlebars','disconnect','pack_company','installToken\x20eliminado','3aXvhCc','0000-00-00','active','activation_date','Pool','create_new_chat','./router/links/fudone','\x27\x20no\x20existe.\x20🤔','Fecha\x20de\x20instalación\x20guardada:','La\x20base\x20de\x20datos\x20tiene\x20muchas\x20conexiones.','Fecha\x20de\x20instalación\x20existente:','success','PORT','CREATE\x20DATABASE\x20edplus','messageStatus','\x0a\x20\x20\x20\x20\x20\x20\x20\x20SELECT\x20token,\x20type_membresy,\x20password\x20AS\x20hashedPassword,\x20activation_date\x20\x0a\x20\x20\x20\x20\x20\x20\x20\x20FROM\x20users\x20\x0a\x20\x20\x20\x20\x20\x20\x20\x20WHERE\x20email\x20=\x20?\x0a\x20\x20\x20\x20','Reiniciar\x20ahora','\x20desconectado,\x20pero\x20no\x20estaba\x20asociado\x20a\x20ninguna\x20empresa.','70OctYRM','node-persist','getFullYear','./router/links/boutique','u995592926_bestpoint','\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20UPDATE\x20users\x20\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20SET\x20activation_date\x20=\x20?\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20WHERE\x20token\x20=\x20?\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20','express-session','pack_branch','831044bNJlJE','./router','some','userId','El\x20usuario\x20\x27','maximize','0.0.0.0','hash','init','350718jOEcqO','family','./lib/passport','🔄\x20Nueva\x20versión\x20encontrada,\x20actualizando...','urlencoded','code','public/img/uploads'];_0x18ff=function(){return _0x40da1d;};return _0x18ff();}serverExpress[_0x3a3066(0xf9)](require(_0x3a3066(0x17d))),serverExpress[_0x3a3066(0xf9)](require(_0x3a3066(0xab))),serverExpress[_0x3a3066(0xf9)](companyName,require(_0x3a3066(0x12f))),serverExpress[_0x3a3066(0xf9)](companyName,require(_0x3a3066(0x168))),serverExpress['use'](companyName,require('./router/links/ceo')),serverExpress[_0x3a3066(0xf9)](companyName,require(_0x3a3066(0xe8))),serverExpress[_0x3a3066(0xf9)](companyName,require(_0x3a3066(0x10f))),serverExpress[_0x3a3066(0xf9)](companyName,require(_0x3a3066(0xc8))),serverExpress['use'](companyName,require(_0x3a3066(0xda))),serverExpress[_0x3a3066(0xf9)](companyName,require('./router/links/app')),serverExpress['use'](companyName,require('./router/links/CRM')),serverExpress[_0x3a3066(0xf9)](companyName,require(_0x3a3066(0xc5))),serverExpress[_0x3a3066(0xf9)](companyName,require(_0x3a3066(0x177))),serverExpress[_0x3a3066(0xf9)](companyName,require('./router/links/cashCut')),serverExpress[_0x3a3066(0xf9)](companyName,require('./router/links/prescription')),serverExpress[_0x3a3066(0xf9)](require('./lib/addFrom')),serverExpress['use'](express[_0x3a3066(0xd0)](path[_0x3a3066(0x13e)](__dirname,_0x3a3066(0xed))));const os=require('os');function getLocalIP(){const _0x45c9ac=_0x3a3066,_0x350ad5=os[_0x45c9ac(0xf3)]();for(let _0x1cbc94 in _0x350ad5){for(let _0x407c3d=0x0;_0x407c3d<_0x350ad5[_0x1cbc94][_0x45c9ac(0x134)];_0x407c3d++){const _0x475d9e=_0x350ad5[_0x1cbc94][_0x407c3d];if(_0x475d9e[_0x45c9ac(0x186)]===_0x45c9ac(0x138)&&!_0x475d9e[_0x45c9ac(0xf5)])return _0x475d9e[_0x45c9ac(0xba)];}}return _0x45c9ac(0x13a);}const mysql=require(_0x3a3066(0xea)),{promisify}=require('util'),pool=mysql['createPool']({'host':_0x3a3066(0xad),'user':_0x3a3066(0x178),'password':'Bobesponja48*','database':'u995592926_bestpoint','waitForConnections':!![],'connectionLimit':0xa,'queueLimit':0x0});pool[_0x3a3066(0xec)]((_0x481ba5,_0x1ccb4b)=>{const _0x248568=_0x3a3066;_0x481ba5&&(_0x481ba5[_0x248568(0xa9)]===_0x248568(0x13d)&&console[_0x248568(0x11d)]('La\x20conexión\x20a\x20la\x20base\x20de\x20datos\x20fue\x20cerrada.'),_0x481ba5[_0x248568(0xa9)]===_0x248568(0x144)&&console[_0x248568(0x11d)](_0x248568(0x16b)),_0x481ba5[_0x248568(0xa9)]===_0x248568(0x122)&&console[_0x248568(0x11d)]('La\x20conexión\x20a\x20la\x20base\x20de\x20datos\x20fue\x20rechazada.'));_0x1ccb4b&&(_0x1ccb4b[_0x248568(0x145)](),console[_0x248568(0xb1)](_0x248568(0x119)));return;}),pool['query']=promisify(pool[_0x3a3066(0xbd)]);let mainWindow,activationWindow,loginWindow;const createMainWindow=()=>{const _0x409a8c=_0x3a3066;mainWindow=new BrowserWindow({'width':0x320,'height':0x258}),mainWindow['maximize'](),mainWindow['loadURL'](_0x409a8c(0x103)+serverExpress[_0x409a8c(0x146)](_0x409a8c(0x126)));},createMainWindowRegister=()=>{const _0x190c17=_0x3a3066;loginWindow=new BrowserWindow({'width':0x320,'height':0x258,'parent':mainWindow,'webPreferences':{'preload':path[_0x190c17(0x13e)](__dirname,_0x190c17(0x104)),'nodeIntegration':!![],'contextIsolation':![]}}),loginWindow[_0x190c17(0x181)](),loginWindow['loadFile'](path[_0x190c17(0x13e)](__dirname,_0x190c17(0xb0)));},{machineIdSync}=require(_0x3a3066(0xd9)),deviceId=machineIdSync();function _0x4bac(_0x2d1b2f,_0x4fa72b){const _0x18ffbb=_0x18ff();return _0x4bac=function(_0x4bacf7,_0x32a894){_0x4bacf7=_0x4bacf7-0xa6;let _0xb191c9=_0x18ffbb[_0x4bacf7];return _0xb191c9;},_0x4bac(_0x2d1b2f,_0x4fa72b);}ipcMain['on'](_0x3a3066(0xe2),async(_0x20e448,_0x337cca)=>{const _0x290169=_0x3a3066,_0x468595=_0x337cca[_0x290169(0x125)],_0x3cc1e9=await see_if_exist_this_token_in_the_database_of_the_web(_0x468595);if(_0x3cc1e9[_0x290169(0x125)]){let _0x3be28d=!![];_0x3cc1e9[_0x290169(0x123)]&&(_0x3cc1e9['uuid']!==deviceId&&(_0x3cc1e9[_0x290169(0x129)]='Este\x20usuario\x20ya\x20tiene\x20un\x20TOKEN\x20registrado\x20en\x20un\x20equipo.',_0x3be28d=![])),_0x3be28d&&(await save_the_uui_of_the_user_in_the_database(_0x468595,deviceId)&&(await initialize_token(_0x468595),await create_expiration_date_of_the_token(_0x3cc1e9[_0x290169(0x165)]),_0x3cc1e9[_0x290169(0x129)]=_0x290169(0xdd)));}_0x20e448[_0x290169(0xe7)](_0x290169(0xc7),_0x3cc1e9[_0x290169(0x129)]);}),ipcMain['on'](_0x3a3066(0xd2),async(_0x2e97e9,_0x481d77)=>{const _0x55ebd9=_0x3a3066,_0x3d22a9=_0x481d77['username'],_0x49fe47=_0x481d77[_0x55ebd9(0x130)],_0x1d4d5d=await see_if_exist_this_user_in_the_database_of_the_web(_0x3d22a9,_0x49fe47);if(_0x1d4d5d['token']){if(_0x1d4d5d[_0x55ebd9(0x123)]&&_0x1d4d5d[_0x55ebd9(0x123)]!==deviceId)_0x1d4d5d[_0x55ebd9(0x129)]=_0x55ebd9(0xc4);else{if(await save_the_uui_of_the_user_in_the_database(_0x3d22a9,deviceId)){}}}_0x2e97e9[_0x55ebd9(0xe7)](_0x55ebd9(0xf7),_0x1d4d5d['message']);});const bcrypt=require(_0x3a3066(0x106));async function see_if_exist_this_user_in_the_database_of_the_web(_0x340346,_0x1aa82c){const _0x3b8333=_0x3a3066,_0x5de475=_0x3b8333(0x171);try{const _0x47dd95=await pool['query'](_0x5de475,[_0x340346]);if(_0x47dd95[_0x3b8333(0x134)]===0x0)return{'token':null,'message':_0x3b8333(0xb3)};const _0x43b9e5=_0x47dd95[0x0],_0x3899e3=await bcrypt[_0x3b8333(0xd4)](_0x1aa82c,_0x43b9e5['hashedPassword']);if(!_0x3899e3)return{'token':null,'message':_0x3b8333(0xeb)};const _0x2384ba=new Date();_0x2384ba[_0x3b8333(0x157)](_0x2384ba[_0x3b8333(0x176)]()-0x1);if(new Date(_0x43b9e5[_0x3b8333(0x165)])<_0x2384ba)return{'token':null,'message':'Suscripción\x20expirada.\x20Por\x20favor,\x20vuelve\x20a\x20activar\x20tu\x20membresía.'};return console[_0x3b8333(0xb1)](_0x3b8333(0x142)),{'token':_0x43b9e5[_0x3b8333(0x125)],'type_membresy':_0x43b9e5[_0x3b8333(0x15a)],'message':'Usuario\x20autenticado\x20con\x20éxito.'};}catch(_0x13e760){return console[_0x3b8333(0x11d)]('Error\x20al\x20verificar\x20usuario:',_0x13e760),{'token':null};}}async function see_if_exist_this_token_in_the_database_of_the_web(_0x2c39f1){const _0xee8c8a=_0x3a3066,_0x171002=_0xee8c8a(0xdf);try{const _0x3d594f=await pool[_0xee8c8a(0xbd)](_0x171002,[_0x2c39f1]);if(_0x3d594f['length']===0x0)return{'token':null,'message':'Token\x20no\x20encontrado.'};const _0x3ade72=_0x3d594f[0x0],_0x2d697a=new Date();_0x2d697a[_0xee8c8a(0x157)](_0x2d697a[_0xee8c8a(0x176)]()-0x1);if(_0x3ade72[_0xee8c8a(0x165)]!=_0xee8c8a(0x163)&&new Date(_0x3ade72[_0xee8c8a(0x165)])<_0x2d697a)return{'token':null,'message':_0xee8c8a(0x120)};if(_0x3ade72[_0xee8c8a(0x165)]===_0xee8c8a(0x163)){const _0xd50bef=new Date();_0xd50bef[_0xee8c8a(0x157)](_0xd50bef[_0xee8c8a(0x176)]()+0x1);const _0x521819=_0xee8c8a(0x179);await pool[_0xee8c8a(0xbd)](_0x521819,[_0xd50bef[_0xee8c8a(0x116)]()[_0xee8c8a(0x15b)]('T')[0x0],_0x3ade72['token']]),_0x3ade72[_0xee8c8a(0x165)]=_0xd50bef;}return console[_0xee8c8a(0xb1)](_0xee8c8a(0x142)),{'token':!![],'type_membresy':_0x3ade72[_0xee8c8a(0x15a)],'uuid':_0x3ade72[_0xee8c8a(0x124)],'activation_date':_0x3ade72['activation_date'],'message':_0xee8c8a(0x142)};}catch(_0x47851d){return console[_0xee8c8a(0x11d)](_0xee8c8a(0x11f),_0x47851d),{'token':null};}}async function save_the_uui_of_the_user_in_the_database(_0xa9bf3d,_0x565c08){const _0x2e4317=_0x3a3066,_0x410c6d=_0x2e4317(0x10d);try{const _0x56e1d9=await pool[_0x2e4317(0xbd)](_0x410c6d,[_0x565c08,_0xa9bf3d]);return!![];}catch(_0x15d1e5){return console[_0x2e4317(0x11d)](_0x2e4317(0xf6),_0x15d1e5),![];}}async function verificarTokenActivo(){const _0x1dd93a=_0x3a3066,_0x43ab39=_0x1dd93a(0xb6);try{const _0x3b7a9d=await pool[_0x1dd93a(0xbd)](_0x43ab39,[TOKEN]);return console[_0x1dd93a(0xb1)](_0x3b7a9d[0x0]),_0x3b7a9d[0x0][_0x1dd93a(0x164)]===0x1?(console['log'](_0x1dd93a(0x14b)),!![]):(console[_0x1dd93a(0xb1)]('El\x20token\x20no\x20está\x20activo\x20o\x20no\x20existe.'),![]);}catch(_0x36b56c){return console[_0x1dd93a(0x11d)](_0x1dd93a(0x156),_0x36b56c),![];}}async function actualizarToken(){const _0x19f86b=_0x3a3066,_0x3d302d=_0x19f86b(0x14f);await pool[_0x19f86b(0xbd)](_0x3d302d,[TOKEN]);}app['on'](_0x3a3066(0x151),async()=>{const _0x2ae7fb=_0x3a3066;await check_if_exist_updates();if(thiIsADemo){await initialize_demo();if(await is_demo_expired()){dialog[_0x2ae7fb(0xe4)]({'type':_0x2ae7fb(0x127),'title':_0x2ae7fb(0xe6),'message':_0x2ae7fb(0xcd)}),app[_0x2ae7fb(0xe0)]();return;}}else await verify_membership_of_user()?(serverExpress[_0x2ae7fb(0xb2)](serverExpress[_0x2ae7fb(0x146)]('port'),_0x2ae7fb(0x182),()=>{const _0x10e86c=_0x2ae7fb;console[_0x10e86c(0xb1)]('Server\x20running\x20on\x20http://'+getLocalIP()+':'+serverExpress[_0x10e86c(0x146)]('port'));}),createMainWindow()):createMainWindowRegister();}),app['on']('window-all-closed',()=>{const _0x10eabe=_0x3a3066;process['platform']!==_0x10eabe(0x139)&&app[_0x10eabe(0xe0)]();});