function _0x187e(){const _0x10d951=['Demo\x20Expirada','extname','181228izTSTD','showMessageBoxSync','http://localhost:','release','Fecha\x20de\x20instalación\x20existente:','./router/links/boutique','La\x20conexión\x20a\x20la\x20base\x20de\x20datos\x20fue\x20rechazada.','networkInterfaces','passport','mysql','views','getTheFirstTenNotifications','view\x20engine','ECONNREFUSED','data','express-recaptcha','72lowrPf','quit','get','Error\x20al\x20actualizar\x20el\x20UUID\x20del\x20dispositivo:','partials','Socket\x20','2CSElpu','installToken','createPool','\x27\x20no\x20existe\x20🤔','HEAD','path','Contraseña\x20incorrecta.','answer-from-login-render','https://github.com/EduardoMartinez68/VERSIONES_PLUS','type_membresy','\x20desconectado,\x20pero\x20no\x20estaba\x20asociado\x20a\x20ninguna\x20empresa.','reply','Nueva\x20notificación:','connect-flash','PORT','\x27.\x20Inténtalo\x20de\x20nuevo.\x20😳','active','No\x20pudimos\x20enviar\x20el\x20mensaje\x20al\x20usuario\x20\x27','7KBjUnq','origin','installToken\x20eliminado','socket.io','length','getFullYear','/links','node-machine-id','token','push','internal','company','some','10207054eQomRk','filter','0000-00-00','Error\x20al\x20verificar\x20usuario:','login-from-render','Token\x20encontrado\x20y\x20activo.','Ups,\x20parece\x20que\x20ya\x20estás\x20conectado\x20en\x20otro\x20dispositivo.','darwin','Datos\x20actualizados\x20con\x20éxito.\x20Cierra\x20y\x20vuelve\x20a\x20abrir\x20el\x20programa\x20😄','simple-git','express-session','hash','layouts','bcrypt','Usuario\x20no\x20encontrado.','\x0a\x20\x20\x20\x20\x20\x20\x20\x20UPDATE\x20pagos\x20\x0a\x20\x20\x20\x20\x20\x20\x20\x20SET\x20device_id\x20=\x20?\x20,\x20active\x20=\x20false\x0a\x20\x20\x20\x20\x20\x20\x20\x20WHERE\x20token\x20=\x20?\x0a\x20\x20\x20\x20','express','canSend','urlencoded','json','Token\x20no\x20encontrado.','session','multer','loadURL','registerUser','message','http','127.0.0.1','relaunch','port','\x0a\x20\x20\x20\x20\x20\x20\x20\x20SELECT\x20token,\x20type_membresy,\x20activation_date\x20,\x20device_id\x0a\x20\x20\x20\x20\x20\x20\x20\x20FROM\x20pagos\x20\x0a\x20\x20\x20\x20\x20\x20\x20\x20WHERE\x20token\x20=\x20?\x0a\x20\x20\x20\x20','Repositorio\x20remoto\x20configurado\x20correctamente','sendMessageToUser','Mensaje\x20enviado\x20con\x20éxito.\x20👌','0.0.0.0','72187ytnxrN','Error\x20al\x20agregar\x20el\x20repositorio\x20remoto','No\x20se\x20encontró\x20la\x20fecha\x20de\x20instalación','emit','Se\x20ha\x20descargado\x20una\x20nueva\x20versión.\x20Reinicia\x20la\x20aplicación\x20para\x20aplicar\x20los\x20cambios.','newNotification','initialize','messageStatus','set','originalname','70CpuBGt','Reiniciar\x20ahora','El\x20usuario\x20\x27','pack_company','userId','./router/links/subscription','Conexión\x20a\x20la\x20base\x20de\x20datos\x20exitosa\x20MYSQL.','latest','create_notification','installDemo','join','query','locals','single','create_new_chat','maximize','Tu\x20demo\x20de\x2030\x20días\x20ha\x20expirado.\x20Por\x20favor,\x20compra\x20la\x20versión\x20completa\x20y\x20sigue\x20creciendo\x20con\x20ED\x20PLUS\x20🚀.','./router/links/ceo','dev','username','fetch','window-all-closed','\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20UPDATE\x20users\x20\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20SET\x20activation_date\x20=\x20?\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20WHERE\x20token\x20=\x20?\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20','IPv4','./router/links/CRM','El\x20token\x20no\x20está\x20activo\x20o\x20no\x20existe.','engine','La\x20demo\x20ha\x20expirado.','loadFile','origin/main','broadcast','error','./lib/passport','privateMessage','./services/chat.js','compare','Usuario\x20autenticado\x20con\x20éxito.','pack_branch','--assume-unchanged','140583sCXZbX','setFullYear','Pool','log','u995592926_bestpoint','removeItem','./router/links/orders','\x0a\x20\x20\x20\x20\x20\x20\x20\x20SELECT\x20*\x20FROM\x20pagos\x20\x0a\x20\x20\x20\x20\x20\x20\x20\x20WHERE\x20token\x20=\x20?\x0a\x20\x20\x20\x20','platform','get_max_employee_of_this_company','./router/links/app','connectionRejected','send_new_message','./router/links/cashCut','public','7499166zPxbdp','uuid','raw','get_the_first_notification','activation_date','Error\x20al\x20verificar\x20el\x20token:','pull','device_id','password','use','toISOString','./router/links','./lib/handlebars','code','privateNotifications','1368048YgoGDW','false','listen','ready','3126400oHckIW','Fecha\x20de\x20instalación\x20guardada:','node-persist','.hbs','main','Este\x20email\x20\x27','FudSession','./lib/system','Este\x20usuario\x20ya\x20tiene\x20un\x20TOKEN\x20registrado\x20en\x20un\x20equipo.','expirationDateOFTheToken','flash','env','./router/links/delivery','✅\x20La\x20aplicación\x20ya\x20está\x20actualizada.','catch','user','family','stash','addRemote','address','success','./router','this_email_exist','src/public/img/uploads/','info','split','answer-from-login-render-token'];_0x187e=function(){return _0x10d951;};return _0x187e();}const _0x459f45=_0x14fa;(function(_0x291764,_0x25c819){const _0x13d368=_0x14fa,_0x4118af=_0x291764();while(!![]){try{const _0x307ff5=parseInt(_0x13d368(0xe6))/0x1+-parseInt(_0x13d368(0xa4))/0x2*(-parseInt(_0x13d368(0x117))/0x3)+parseInt(_0x13d368(0x8e))/0x4*(-parseInt(_0x13d368(0xf0))/0x5)+parseInt(_0x13d368(0x126))/0x6*(-parseInt(_0x13d368(0xb6))/0x7)+parseInt(_0x13d368(0x6d))/0x8*(parseInt(_0x13d368(0x9e))/0x9)+parseInt(_0x13d368(0x71))/0xa+parseInt(_0x13d368(0xc3))/0xb;if(_0x307ff5===_0x25c819)break;else _0x4118af['push'](_0x4118af['shift']());}catch(_0x4596f1){_0x4118af['push'](_0x4118af['shift']());}}}(_0x187e,0xcdee3));const system=require(_0x459f45(0x78)),thiIsADemo=![],{app,BrowserWindow,dialog,ipcMain}=require('electron'),express=require(_0x459f45(0xd3)),morgan=require('morgan'),{engine}=require('express-handlebars'),multer=require(_0x459f45(0xd9)),flash=require(_0x459f45(0xb1)),session=require(_0x459f45(0xcd)),passport=require(_0x459f45(0x96)),{database}=require('./keys'),{v4:uuid}=require(_0x459f45(0x127)),path=require(_0x459f45(0xa9)),{RecaptchaV2}=require(_0x459f45(0x9d)),nodePersist=require(_0x459f45(0x73));nodePersist['init']({'dir':path['join'](__dirname,_0x459f45(0x9c))});async function initialize_software(){const _0x2787d7=_0x459f45,_0x43511d=await nodePersist[_0x2787d7(0xa0)](_0x2787d7(0xa5));!_0x43511d&&await nodePersist['set'](_0x2787d7(0xa5),_0x2787d7(0x6e));}async function the_software_have_a_token(){const _0x33a8cf=_0x459f45,_0x1cffd9=await nodePersist[_0x33a8cf(0xa0)]('installToken');if(!_0x1cffd9)return![];return _0x1cffd9!=_0x33a8cf(0x6e);}async function create_expiration_date_of_the_token(_0x5721bc){const _0x2d8575=_0x459f45,_0x47e714=await nodePersist[_0x2d8575(0xa0)](_0x2d8575(0x7a));!_0x47e714&&await nodePersist[_0x2d8575(0xee)](_0x2d8575(0x7a),_0x5721bc);}async function token_expired(){const _0x453648=_0x459f45,_0x4c846b=await nodePersist['get'](_0x453648(0x7a)),_0x4221c4=new Date(_0x4c846b),_0x52ecdd=new Date();return _0x52ecdd<_0x4221c4;}async function remove_install_token(){const _0x336741=_0x459f45;await nodePersist['removeItem'](_0x336741(0xa5)),await nodePersist[_0x336741(0x11c)](_0x336741(0x7a)),console['log'](_0x336741(0xb8));}async function initialize_token(_0x3f814e){const _0x16615f=_0x459f45,_0x53e9c2=await nodePersist[_0x16615f(0xa0)](_0x16615f(0xa5));await nodePersist[_0x16615f(0xee)]('installToken',_0x3f814e);}async function initialize_demo(){const _0x1a1e78=_0x459f45,_0x2d6318=await nodePersist['get'](_0x1a1e78(0xf9));if(!_0x2d6318){const _0x295e88=new Date()[_0x1a1e78(0x130)]();await nodePersist[_0x1a1e78(0xee)]('installDate',_0x295e88),console['log'](_0x1a1e78(0x72),_0x295e88);}else console[_0x1a1e78(0x11a)](_0x1a1e78(0x92),_0x2d6318);}async function is_demo_expired(){const _0x2f536c=_0x459f45,_0x5c3813=await nodePersist[_0x2f536c(0xa0)]('installDemo');if(!_0x5c3813)return console['log'](_0x2f536c(0xe8)),![];const _0x433f0a=new Date(_0x5c3813),_0x11b987=new Date(),_0x413f35=_0x11b987-_0x433f0a,_0x4ecfb7=_0x413f35/(0x3e8*0x3c*0x3c*0x18);return _0x4ecfb7>0x1e?(console[_0x2f536c(0x11a)](_0x2f536c(0x10b)),!![]):(console[_0x2f536c(0x11a)]('La\x20demo\x20aún\x20está\x20activa.'),![]);}async function this_software_count_have_a_count(){}async function the_user_have_a_token_active_in_the_database(){}async function verify_membership_of_user(){initialize_software();if(await the_software_have_a_token())return await token_expired();return![];}const simpleGit=require(_0x459f45(0xcc)),fs=require('fs'),repoPath=path[_0x459f45(0xfa)](__dirname),git=simpleGit(repoPath),repoURL=_0x459f45(0xac),remote=_0x459f45(0xb7);git[_0x459f45(0x83)](remote,repoURL)['then'](()=>{const _0x390f6d=_0x459f45;console[_0x390f6d(0x11a)](_0x390f6d(0xe2));})[_0x459f45(0x7f)](_0x109c85=>{const _0x4da659=_0x459f45;console[_0x4da659(0x10f)](_0x4da659(0xe7),_0x109c85);});async function check_if_exist_updates(){const _0x486c78=_0x459f45;try{await git[_0x486c78(0x104)](remote),await git[_0x486c78(0x128)](['update-index',_0x486c78(0x116),_0x486c78(0x88)]),await git['stash']();const _0x8d0366=await git[_0x486c78(0x11a)]([_0x486c78(0x10d),'-1']),_0x3018f7=await git[_0x486c78(0x11a)]([_0x486c78(0xa8),'-1']);_0x8d0366[_0x486c78(0xf7)]['hash']!==_0x3018f7[_0x486c78(0xf7)][_0x486c78(0xce)]?(console[_0x486c78(0x11a)]('🔄\x20Nueva\x20versión\x20encontrada,\x20actualizando...'),await git[_0x486c78(0x12c)]('origin',_0x486c78(0x75),{'--rebase':null}),dialog[_0x486c78(0x8f)]({'type':_0x486c78(0x89),'title':'Actualización','message':_0x486c78(0xea),'buttons':[_0x486c78(0xf1)]}),app[_0x486c78(0xdf)](),app['quit']()):console[_0x486c78(0x11a)](_0x486c78(0x7e)),await git[_0x486c78(0x82)](['pop']);}catch(_0x40504d){console[_0x486c78(0x10f)]('❌\x20Error\x20verificando\x20actualizaciones:',_0x40504d);}}function _0x14fa(_0xf491dc,_0xdd10f0){const _0x187e82=_0x187e();return _0x14fa=function(_0x14fa85,_0x2d58b4){_0x14fa85=_0x14fa85-0x6c;let _0x1ac062=_0x187e82[_0x14fa85];return _0x1ac062;},_0x14fa(_0xf491dc,_0xdd10f0);}const serverExpress=express();require(_0x459f45(0x110)),require('./lib/editFrom'),serverExpress[_0x459f45(0xee)](_0x459f45(0xe0),process[_0x459f45(0x7c)][_0x459f45(0xb2)]||0xfa0),serverExpress[_0x459f45(0xee)](_0x459f45(0x98),path[_0x459f45(0xfa)](__dirname,_0x459f45(0x98))),serverExpress[_0x459f45(0x10a)](_0x459f45(0x74),engine({'defaultLayout':'main','layoutsDir':path[_0x459f45(0xfa)](serverExpress[_0x459f45(0xa0)]('views'),_0x459f45(0xcf)),'partialsDir':path[_0x459f45(0xfa)](serverExpress[_0x459f45(0xa0)](_0x459f45(0x98)),_0x459f45(0xa2)),'extname':_0x459f45(0x74),'helpers':require(_0x459f45(0x132))})),serverExpress[_0x459f45(0xee)](_0x459f45(0x9a),_0x459f45(0x74)),require('dotenv')['config']();const {APP_PG_USER,APP_PG_HOST,APP_PG_DATABASE,APP_PG_PASSWORD,APP_PG_PORT,TOKEN}=process[_0x459f45(0x7c)],pg=require('pg'),pgPool=new pg[(_0x459f45(0x119))]({'user':APP_PG_USER,'host':APP_PG_HOST,'database':APP_PG_DATABASE,'password':APP_PG_PASSWORD,'port':APP_PG_PORT});serverExpress[_0x459f45(0x12f)](session({'secret':_0x459f45(0x77),'resave':![],'saveUninitialized':![],'store':new(require('connect-pg-simple')(session))({'pool':pgPool,'tableName':_0x459f45(0xd8)})})),serverExpress[_0x459f45(0x12f)](flash()),serverExpress['use'](morgan(_0x459f45(0x102))),serverExpress[_0x459f45(0x12f)](express[_0x459f45(0xd5)]({'extended':![]})),serverExpress[_0x459f45(0x12f)](express[_0x459f45(0xd6)]()),serverExpress['use'](passport[_0x459f45(0xec)]()),serverExpress['use'](passport[_0x459f45(0xd8)]());const storage=multer['diskStorage']({'destination':path[_0x459f45(0xfa)](__dirname,'public/img/uploads'),'filename':(_0x150340,_0x58e1d5,_0x5ba30a,_0x4461bb)=>{const _0x59d21c=_0x459f45;_0x5ba30a(null,uuid()+path[_0x59d21c(0x8d)](_0x58e1d5[_0x59d21c(0xef)]));}});serverExpress[_0x459f45(0x12f)](multer({'storage':storage})[_0x459f45(0xfd)]('image')),serverExpress[_0x459f45(0x12f)]((_0x3c7ff4,_0x5f0f80,_0x1cf262)=>{const _0xa53aed=_0x459f45;serverExpress['locals'][_0xa53aed(0x85)]=_0x3c7ff4[_0xa53aed(0x7b)](_0xa53aed(0x85)),serverExpress['locals'][_0xa53aed(0xdc)]=_0x3c7ff4[_0xa53aed(0x7b)](_0xa53aed(0xdc)),serverExpress[_0xa53aed(0xfc)][_0xa53aed(0x80)]=_0x3c7ff4[_0xa53aed(0x80)],serverExpress[_0xa53aed(0xfc)][_0xa53aed(0xc1)]=_0x3c7ff4[_0xa53aed(0xc1)],serverExpress[_0xa53aed(0xfc)][_0xa53aed(0xf3)]=0x0,serverExpress[_0xa53aed(0xfc)][_0xa53aed(0x115)]=0x0,_0x1cf262();});const http=require(_0x459f45(0xdd)),server=http['createServer'](serverExpress),{Server}=require(_0x459f45(0xb9)),io=new Server(server),users={},connectedEmployees={},companyLimitsCache={},chat=require(_0x459f45(0x112));io['on']('connection',async _0x1c6d80=>{const _0x2248ca=_0x459f45;_0x1c6d80['on'](_0x2248ca(0xdb),async(_0x3dd379,_0x4f9d17)=>{const _0x28dcda=_0x2248ca,_0x4fc4f9=connectedEmployees[_0x4f9d17]||[],_0x44e141=_0x4fc4f9[_0x28dcda(0xc2)](_0x22f1e4=>_0x22f1e4[_0x28dcda(0xf4)]===_0x3dd379);if(_0x44e141){_0x1c6d80[_0x28dcda(0xe9)](_0x28dcda(0x122),_0x28dcda(0xc9));return;}if(system!='desktop'){!companyLimitsCache[_0x4f9d17]&&(companyLimitsCache[_0x4f9d17]=await chat[_0x28dcda(0x120)](_0x4f9d17));const _0x2e3bb3=companyLimitsCache[_0x4f9d17];if(_0x4fc4f9[_0x28dcda(0xba)]>=_0x2e3bb3){_0x1c6d80[_0x28dcda(0xe9)]('connectionRejected','Ups,\x20parece\x20que\x20alcanzaste\x20tu\x20límite\x20de\x20dispositivos\x20conectados.\x20Por\x20favor,\x20actualiza\x20tu\x20membresía.');return;}}_0x1c6d80['companyId']=_0x4f9d17,_0x4fc4f9[_0x28dcda(0xbf)]({'userId':_0x3dd379,'socketId':_0x1c6d80['id']}),connectedEmployees[_0x4f9d17]=_0x4fc4f9;const _0x352b84=await chat['get_the_first_notification'](_0x3dd379,0xa);io['to'](_0x3dd379)[_0x28dcda(0xe9)](_0x28dcda(0x6c),{'notifications':_0x352b84});});async function _0x380089(_0x59be74){const _0x2aa4d3=_0x2248ca,_0x405ec3=users[_0x59be74];let _0x42f056=_0x405ec3;!_0x405ec3&&(_0x42f056=await chat[_0x2aa4d3(0x87)](toUserId));const _0x38af56={'canSend':_0x42f056,'theUserIsConnect':_0x405ec3};return _0x38af56;}_0x1c6d80['on']('sendNotificationToUser',async({userEmail:_0xd5ccc6,toUserEmail:_0x206d1e,message:_0x46e6a3})=>{const _0x4234f8=_0x2248ca,_0x52c316=await _0x380089(_0x206d1e);_0x52c316[_0x4234f8(0xd4)]?await chat[_0x4234f8(0xf8)](_0xd5ccc6,_0x206d1e,_0x46e6a3)?(_0x52c316['theUserIsConnect']&&io['to'](recipientSocketId)[_0x4234f8(0xe9)](_0x4234f8(0x111),{'userId':userId,'message':_0x46e6a3}),_0x1c6d80[_0x4234f8(0xe9)]('messageStatus',{'success':!![],'message':_0x4234f8(0xe4)})):_0x1c6d80[_0x4234f8(0xe9)](_0x4234f8(0xed),{'success':![],'message':_0x4234f8(0xb5)+_0x206d1e+_0x4234f8(0xb3)}):_0x1c6d80[_0x4234f8(0xe9)](_0x4234f8(0xed),{'success':![],'message':_0x4234f8(0xf2)+_0x206d1e+'\x27\x20no\x20existe.\x20🤔'});}),_0x1c6d80['on'](_0x2248ca(0x99),async({userEmail:_0x555194})=>{const _0x3a3c89=_0x2248ca,_0x14a2d1=await chat[_0x3a3c89(0x129)](_0x555194,0xa);io['to'](recipientSocketId)[_0x3a3c89(0xe9)](_0x3a3c89(0x6c),{'notifications':_0x14a2d1});}),_0x1c6d80['on'](_0x2248ca(0xe3),async({userId:_0x56f409,toUserId:_0x3918ce,message:_0x4c7894})=>{const _0x26d85a=_0x2248ca,_0x1ef767=users[_0x3918ce];let _0x2c0fe8=_0x1ef767;!_0x1ef767&&(_0x2c0fe8=await chat[_0x26d85a(0x87)](_0x3918ce));if(_0x2c0fe8){const _0x22cdcf=await chat[_0x26d85a(0xfe)](_0x56f409,_0x3918ce);await chat[_0x26d85a(0x123)](_0x22cdcf,_0x56f409,_0x4c7894)&&(_0x1ef767&&io['to'](_0x1ef767)[_0x26d85a(0xe9)]('privateMessage',{'userId':_0x56f409,'message':_0x4c7894})),_0x1c6d80['emit'](_0x26d85a(0xed),{'success':!![],'message':'Mensaje\x20enviado\x20con\x20éxito'});}else _0x1c6d80[_0x26d85a(0xe9)]('messageStatus',{'success':![],'message':_0x26d85a(0x76)+_0x3918ce+_0x26d85a(0xa7)});}),_0x1c6d80['on']('disconnect',()=>{const _0x468e46=_0x2248ca,{companyId:_0x2a392a}=_0x1c6d80;_0x2a392a&&connectedEmployees[_0x2a392a]?(connectedEmployees[_0x2a392a]=connectedEmployees[_0x2a392a][_0x468e46(0xc4)](_0x52e426=>_0x52e426['socketId']!==_0x1c6d80['id']),connectedEmployees[_0x2a392a][_0x468e46(0xba)]===0x0&&delete connectedEmployees[_0x2a392a]):console[_0x468e46(0x11a)](_0x468e46(0xa3)+_0x1c6d80['id']+_0x468e46(0xae));}),_0x1c6d80['on']('sendNotification',_0x88dbc2=>{const _0x4759a8=_0x2248ca;console['log'](_0x4759a8(0xb0),_0x88dbc2),_0x1c6d80[_0x4759a8(0x10e)]['emit'](_0x4759a8(0xeb),_0x88dbc2);});});const companyName=_0x459f45(0xbc);serverExpress[_0x459f45(0x12f)](require(_0x459f45(0x86))),serverExpress[_0x459f45(0x12f)](require('./router/authentication')),serverExpress[_0x459f45(0x12f)](companyName,require(_0x459f45(0x131))),serverExpress[_0x459f45(0x12f)](companyName,require('./router/links/fudone')),serverExpress[_0x459f45(0x12f)](companyName,require(_0x459f45(0x101))),serverExpress[_0x459f45(0x12f)](companyName,require('./router/links/branch')),serverExpress['use'](companyName,require(_0x459f45(0xf5))),serverExpress['use'](companyName,require('./router/links/store')),serverExpress['use'](companyName,require(_0x459f45(0x7d))),serverExpress['use'](companyName,require(_0x459f45(0x121))),serverExpress[_0x459f45(0x12f)](companyName,require(_0x459f45(0x108))),serverExpress[_0x459f45(0x12f)](companyName,require('./router/links/desktop')),serverExpress[_0x459f45(0x12f)](companyName,require(_0x459f45(0x93))),serverExpress[_0x459f45(0x12f)](companyName,require(_0x459f45(0x124))),serverExpress[_0x459f45(0x12f)](companyName,require(_0x459f45(0x11d))),serverExpress['use'](require('./lib/addFrom')),serverExpress['use'](express['static'](path['join'](__dirname,_0x459f45(0x125))));const os=require('os');function getLocalIP(){const _0x4a7816=_0x459f45,_0x4d81e6=os[_0x4a7816(0x95)]();for(let _0x5bd001 in _0x4d81e6){for(let _0x3ba817=0x0;_0x3ba817<_0x4d81e6[_0x5bd001][_0x4a7816(0xba)];_0x3ba817++){const _0x4c63e0=_0x4d81e6[_0x5bd001][_0x3ba817];if(_0x4c63e0[_0x4a7816(0x81)]===_0x4a7816(0x107)&&!_0x4c63e0[_0x4a7816(0xc0)])return _0x4c63e0[_0x4a7816(0x84)];}}return _0x4a7816(0xde);}const mysql=require(_0x459f45(0x97)),{promisify}=require('util'),pool=mysql[_0x459f45(0xa6)]({'host':'193.203.166.165','user':_0x459f45(0x11b),'password':'Bobesponja48*','database':_0x459f45(0x11b),'waitForConnections':!![],'connectionLimit':0xa,'queueLimit':0x0});pool['getConnection']((_0x3db662,_0x5ee007)=>{const _0x66ad32=_0x459f45;_0x3db662&&(_0x3db662[_0x66ad32(0x133)]==='PROTOCOL_CONNECTION_LOST'&&console['error']('La\x20conexión\x20a\x20la\x20base\x20de\x20datos\x20fue\x20cerrada.'),_0x3db662[_0x66ad32(0x133)]==='ER_CON_COUNT_ERROR'&&console[_0x66ad32(0x10f)]('La\x20base\x20de\x20datos\x20tiene\x20muchas\x20conexiones.'),_0x3db662[_0x66ad32(0x133)]===_0x66ad32(0x9b)&&console[_0x66ad32(0x10f)](_0x66ad32(0x94)));_0x5ee007&&(_0x5ee007[_0x66ad32(0x91)](),console[_0x66ad32(0x11a)](_0x66ad32(0xf6)));return;}),pool[_0x459f45(0xfb)]=promisify(pool[_0x459f45(0xfb)]);let mainWindow,activationWindow,loginWindow;const createMainWindow=()=>{const _0x43d113=_0x459f45;mainWindow=new BrowserWindow({'width':0x320,'height':0x258}),mainWindow[_0x43d113(0xff)](),mainWindow[_0x43d113(0xda)](_0x43d113(0x90)+serverExpress[_0x43d113(0xa0)](_0x43d113(0xe0)));},createMainWindowRegister=()=>{const _0x5606d5=_0x459f45;loginWindow=new BrowserWindow({'width':0x320,'height':0x258,'parent':mainWindow,'webPreferences':{'preload':path[_0x5606d5(0xfa)](__dirname,'preload.js'),'nodeIntegration':!![],'contextIsolation':![]}}),loginWindow[_0x5606d5(0xff)](),loginWindow[_0x5606d5(0x10c)](path['join'](__dirname,'activation.html'));},{machineIdSync}=require(_0x459f45(0xbd)),deviceId=machineIdSync();ipcMain['on']('login-from-render-token',async(_0x1ba7ec,_0x23dd67)=>{const _0x1e281f=_0x459f45,_0x2f6051=_0x23dd67[_0x1e281f(0xbe)],_0x30db44=await see_if_exist_this_token_in_the_database_of_the_web(_0x2f6051);if(_0x30db44[_0x1e281f(0xbe)]){let _0x2c6f38=!![];_0x30db44[_0x1e281f(0x127)]&&(_0x30db44[_0x1e281f(0x127)]!==deviceId&&(_0x30db44[_0x1e281f(0xdc)]=_0x1e281f(0x79),_0x2c6f38=![])),_0x2c6f38&&(await save_the_uui_of_the_user_in_the_database(_0x2f6051,deviceId)&&(await initialize_token(_0x2f6051),await create_expiration_date_of_the_token(_0x30db44[_0x1e281f(0x12a)]),_0x30db44[_0x1e281f(0xdc)]=_0x1e281f(0xcb)));}_0x1ba7ec[_0x1e281f(0xaf)](_0x1e281f(0x8b),_0x30db44[_0x1e281f(0xdc)]);}),ipcMain['on'](_0x459f45(0xc7),async(_0x280865,_0x27bdaa)=>{const _0x5c9f0e=_0x459f45,_0x551019=_0x27bdaa[_0x5c9f0e(0x103)],_0xb29778=_0x27bdaa[_0x5c9f0e(0x12e)],_0x3ff38a=await see_if_exist_this_user_in_the_database_of_the_web(_0x551019,_0xb29778);if(_0x3ff38a[_0x5c9f0e(0xbe)]){if(_0x3ff38a[_0x5c9f0e(0x127)]&&_0x3ff38a[_0x5c9f0e(0x127)]!==deviceId)_0x3ff38a[_0x5c9f0e(0xdc)]=_0x5c9f0e(0x79);else{if(await save_the_uui_of_the_user_in_the_database(_0x551019,deviceId)){}}}_0x280865['reply'](_0x5c9f0e(0xab),_0x3ff38a[_0x5c9f0e(0xdc)]);});const bcrypt=require(_0x459f45(0xd0));async function see_if_exist_this_user_in_the_database_of_the_web(_0x4ed393,_0x2e3d8c){const _0x250dfa=_0x459f45,_0x94ccd='\x0a\x20\x20\x20\x20\x20\x20\x20\x20SELECT\x20token,\x20type_membresy,\x20password\x20AS\x20hashedPassword,\x20activation_date\x20\x0a\x20\x20\x20\x20\x20\x20\x20\x20FROM\x20users\x20\x0a\x20\x20\x20\x20\x20\x20\x20\x20WHERE\x20email\x20=\x20?\x0a\x20\x20\x20\x20';try{const _0x2a71ce=await pool[_0x250dfa(0xfb)](_0x94ccd,[_0x4ed393]);if(_0x2a71ce[_0x250dfa(0xba)]===0x0)return{'token':null,'message':_0x250dfa(0xd1)};const _0x36ced6=_0x2a71ce[0x0],_0x1cfc96=await bcrypt[_0x250dfa(0x113)](_0x2e3d8c,_0x36ced6['hashedPassword']);if(!_0x1cfc96)return{'token':null,'message':_0x250dfa(0xaa)};const _0x40627d=new Date();_0x40627d[_0x250dfa(0x118)](_0x40627d[_0x250dfa(0xbb)]()-0x1);if(new Date(_0x36ced6['activation_date'])<_0x40627d)return{'token':null,'message':'Suscripción\x20expirada.\x20Por\x20favor,\x20vuelve\x20a\x20activar\x20tu\x20membresía.'};return console[_0x250dfa(0x11a)](_0x250dfa(0x114)),{'token':_0x36ced6[_0x250dfa(0xbe)],'type_membresy':_0x36ced6[_0x250dfa(0xad)],'message':_0x250dfa(0x114)};}catch(_0x5b86d7){return console[_0x250dfa(0x10f)](_0x250dfa(0xc6),_0x5b86d7),{'token':null};}}async function see_if_exist_this_token_in_the_database_of_the_web(_0x2f3e36){const _0x5bf415=_0x459f45,_0x2f3282=_0x5bf415(0xe1);try{const _0x432cd4=await pool[_0x5bf415(0xfb)](_0x2f3282,[_0x2f3e36]);if(_0x432cd4[_0x5bf415(0xba)]===0x0)return{'token':null,'message':_0x5bf415(0xd7)};const _0x2d8cbb=_0x432cd4[0x0],_0x5b434c=new Date();_0x5b434c[_0x5bf415(0x118)](_0x5b434c[_0x5bf415(0xbb)]()-0x1);if(_0x2d8cbb[_0x5bf415(0x12a)]!='0000-00-00'&&new Date(_0x2d8cbb[_0x5bf415(0x12a)])<_0x5b434c)return{'token':null,'message':'Suscripción\x20expirada.\x20Por\x20favor,\x20vuelve\x20a\x20activar\x20tu\x20membresía.'};if(_0x2d8cbb[_0x5bf415(0x12a)]===_0x5bf415(0xc5)){const _0x117101=new Date();_0x117101['setFullYear'](_0x117101[_0x5bf415(0xbb)]()+0x1);const _0x4046cf=_0x5bf415(0x106);await pool[_0x5bf415(0xfb)](_0x4046cf,[_0x117101[_0x5bf415(0x130)]()[_0x5bf415(0x8a)]('T')[0x0],_0x2d8cbb[_0x5bf415(0xbe)]]),_0x2d8cbb[_0x5bf415(0x12a)]=_0x117101;}return console[_0x5bf415(0x11a)](_0x5bf415(0x114)),{'token':!![],'type_membresy':_0x2d8cbb[_0x5bf415(0xad)],'uuid':_0x2d8cbb[_0x5bf415(0x12d)],'activation_date':_0x2d8cbb[_0x5bf415(0x12a)],'message':_0x5bf415(0x114)};}catch(_0x5452c2){return console[_0x5bf415(0x10f)]('Error\x20al\x20verificar\x20usuario:',_0x5452c2),{'token':null};}}async function save_the_uui_of_the_user_in_the_database(_0x37f632,_0x4d7a25){const _0x314267=_0x459f45,_0x4b96f7=_0x314267(0xd2);try{const _0x35b232=await pool[_0x314267(0xfb)](_0x4b96f7,[_0x4d7a25,_0x37f632]);return!![];}catch(_0x3f9a95){return console[_0x314267(0x10f)](_0x314267(0xa1),_0x3f9a95),![];}}async function verificarTokenActivo(){const _0x19b0ac=_0x459f45,_0x2ac856=_0x19b0ac(0x11e);try{const _0x476645=await pool[_0x19b0ac(0xfb)](_0x2ac856,[TOKEN]);return console[_0x19b0ac(0x11a)](_0x476645[0x0]),_0x476645[0x0][_0x19b0ac(0xb4)]===0x1?(console[_0x19b0ac(0x11a)](_0x19b0ac(0xc8)),!![]):(console[_0x19b0ac(0x11a)](_0x19b0ac(0x109)),![]);}catch(_0x515983){return console[_0x19b0ac(0x10f)](_0x19b0ac(0x12b),_0x515983),![];}}async function actualizarToken(){const _0x266626=_0x459f45,_0xd84ecf='\x0a\x20\x20\x20\x20\x20\x20\x20\x20UPDATE\x20pagos\x20\x0a\x20\x20\x20\x20\x20\x20\x20\x20SET\x20active\x20=\x20false\x0a\x20\x20\x20\x20\x20\x20\x20\x20WHERE\x20token\x20=\x20?\x0a\x20\x20\x20\x20';await pool[_0x266626(0xfb)](_0xd84ecf,[TOKEN]);}app['on'](_0x459f45(0x70),async()=>{const _0x10d542=_0x459f45;await check_if_exist_updates();if(thiIsADemo){await initialize_demo();if(await is_demo_expired()){dialog['showMessageBoxSync']({'type':'warning','title':_0x10d542(0x8c),'message':_0x10d542(0x100)}),app[_0x10d542(0x9f)]();return;}}else await verify_membership_of_user()?(serverExpress[_0x10d542(0x6f)](serverExpress['get']('port'),_0x10d542(0xe5),()=>{const _0x475d26=_0x10d542;console[_0x475d26(0x11a)]('Server\x20running\x20on\x20http://'+getLocalIP()+':'+serverExpress[_0x475d26(0xa0)](_0x475d26(0xe0)));}),createMainWindow()):createMainWindowRegister();}),app['on'](_0x459f45(0x105),()=>{const _0x593c76=_0x459f45;process[_0x593c76(0x11f)]!==_0x593c76(0xca)&&app[_0x593c76(0x9f)]();});