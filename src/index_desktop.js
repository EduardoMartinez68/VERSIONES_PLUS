const _0x285c1c=_0x6148;(function(_0x4bd8c7,_0x436851){const _0x43c81b=_0x6148,_0x2c7287=_0x4bd8c7();while(!![]){try{const _0x498da5=-parseInt(_0x43c81b(0xe7))/0x1*(-parseInt(_0x43c81b(0x11e))/0x2)+-parseInt(_0x43c81b(0x153))/0x3*(-parseInt(_0x43c81b(0x12c))/0x4)+-parseInt(_0x43c81b(0xe2))/0x5*(-parseInt(_0x43c81b(0x129))/0x6)+parseInt(_0x43c81b(0x192))/0x7*(parseInt(_0x43c81b(0x16c))/0x8)+-parseInt(_0x43c81b(0x193))/0x9+-parseInt(_0x43c81b(0xec))/0xa+-parseInt(_0x43c81b(0x147))/0xb;if(_0x498da5===_0x436851)break;else _0x2c7287['push'](_0x2c7287['shift']());}catch(_0x42c80e){_0x2c7287['push'](_0x2c7287['shift']());}}}(_0x2876,0xc5c95));function _0x6148(_0x16013e,_0x49e43d){const _0x28763e=_0x2876();return _0x6148=function(_0x6148a4,_0x5a8e56){_0x6148a4=_0x6148a4-0xcb;let _0x3d46f6=_0x28763e[_0x6148a4];return _0x3d46f6;},_0x6148(_0x16013e,_0x49e43d);}const system=require(_0x285c1c(0x10a)),thiIsADemo=![],{app,BrowserWindow,dialog,ipcMain}=require(_0x285c1c(0x134)),express=require(_0x285c1c(0x150)),morgan=require(_0x285c1c(0x188)),{engine}=require(_0x285c1c(0x170)),multer=require(_0x285c1c(0x190)),flash=require('connect-flash'),session=require('express-session'),passport=require(_0x285c1c(0x178)),{database}=require(_0x285c1c(0x13c)),{v4:uuid}=require(_0x285c1c(0x123)),path=require(_0x285c1c(0x112)),{RecaptchaV2}=require(_0x285c1c(0x164)),nodePersist=require(_0x285c1c(0x17b));nodePersist[_0x285c1c(0x16f)]({'dir':path[_0x285c1c(0x104)](__dirname,_0x285c1c(0x158))});async function initialize_software(){const _0x280627=_0x285c1c,_0x3fcb8a=await nodePersist[_0x280627(0xe8)](_0x280627(0x174));!_0x3fcb8a&&await nodePersist[_0x280627(0x15f)](_0x280627(0x174),_0x280627(0x175));}async function the_software_have_a_token(){const _0x5ad694=_0x285c1c,_0x4b8faa=await nodePersist[_0x5ad694(0xe8)]('installToken');if(!_0x4b8faa)return![];return _0x4b8faa!=_0x5ad694(0x175);}async function create_expiration_date_of_the_token(_0x60cb38){const _0x1ff6ea=_0x285c1c,_0x2294df=await nodePersist[_0x1ff6ea(0xe8)](_0x1ff6ea(0x136));!_0x2294df&&await nodePersist[_0x1ff6ea(0x15f)]('expirationDateOFTheToken',_0x60cb38);}async function token_expired(){const _0x74bac1=_0x285c1c,_0x595616=await nodePersist[_0x74bac1(0xe8)]('expirationDateOFTheToken'),_0x662049=new Date(_0x595616),_0x251560=new Date();return _0x251560<_0x662049;}async function remove_install_token(){const _0x375296=_0x285c1c;await nodePersist[_0x375296(0x196)](_0x375296(0x174)),await nodePersist['removeItem']('expirationDateOFTheToken'),console[_0x375296(0x144)](_0x375296(0x15d));}async function initialize_token(_0x3210ed){const _0x1180f1=_0x285c1c,_0x3e6cc4=await nodePersist[_0x1180f1(0xe8)](_0x1180f1(0x174));await nodePersist[_0x1180f1(0x15f)](_0x1180f1(0x174),_0x3210ed);}async function initialize_demo(){const _0x21a99b=_0x285c1c,_0x35fa56=await nodePersist[_0x21a99b(0xe8)]('installDemo');if(!_0x35fa56){const _0x33ae48=new Date()[_0x21a99b(0xdb)]();await nodePersist[_0x21a99b(0x15f)](_0x21a99b(0x17c),_0x33ae48),console[_0x21a99b(0x144)](_0x21a99b(0xdf),_0x33ae48);}else console[_0x21a99b(0x144)](_0x21a99b(0x14c),_0x35fa56);}async function is_demo_expired(){const _0xc9e1f5=_0x285c1c,_0x429ea4=await nodePersist[_0xc9e1f5(0xe8)]('installDemo');if(!_0x429ea4)return console['log'](_0xc9e1f5(0xe0)),![];const _0x222e11=new Date(_0x429ea4),_0x1ad118=new Date(),_0x58cc24=_0x1ad118-_0x222e11,_0x15dd9c=_0x58cc24/(0x3e8*0x3c*0x3c*0x18);return _0x15dd9c>0x1e?(console['log'](_0xc9e1f5(0x14a)),!![]):(console[_0xc9e1f5(0x144)](_0xc9e1f5(0x165)),![]);}async function this_software_count_have_a_count(){}async function the_user_have_a_token_active_in_the_database(){}async function verify_membership_of_user(){initialize_software();if(await the_software_have_a_token())return await token_expired();return![];}const simpleGit=require(_0x285c1c(0x12f)),fs=require('fs'),repoPath=path[_0x285c1c(0x104)](__dirname),git=simpleGit(repoPath),repoURL=_0x285c1c(0x11f),remote=_0x285c1c(0x19c);git[_0x285c1c(0x121)](remote,repoURL)[_0x285c1c(0x177)](()=>{const _0x21e0cd=_0x285c1c;console[_0x21e0cd(0x144)](_0x21e0cd(0x138));})[_0x285c1c(0x139)](_0x571bfb=>{const _0x27f919=_0x285c1c;console[_0x27f919(0x199)]('Error\x20al\x20agregar\x20el\x20repositorio\x20remoto',_0x571bfb);});async function check_if_exist_updates(){const _0x15fbd3=_0x285c1c;try{await git['fetch'](remote);const _0x504e2b=await git[_0x15fbd3(0x144)]([remote+_0x15fbd3(0x183),'-1']),_0x53e89d=await git['log']([_0x15fbd3(0x127),'-1']);_0x504e2b[_0x15fbd3(0x111)]['hash']!==_0x53e89d['latest'][_0x15fbd3(0x19f)]?(console[_0x15fbd3(0x144)](_0x15fbd3(0x185)),await git[_0x15fbd3(0xcc)]([_0x15fbd3(0x161),_0x15fbd3(0x187),remote+_0x15fbd3(0x183)]),await git[_0x15fbd3(0x179)]('origin',_0x15fbd3(0xda),{'--rebase':null}),dialog[_0x15fbd3(0xd4)]({'type':_0x15fbd3(0x106),'title':'Actualizaci贸n','message':_0x15fbd3(0xf8),'buttons':[_0x15fbd3(0xea)]}),app[_0x15fbd3(0x145)](),app[_0x15fbd3(0x159)]()):console['log'](_0x15fbd3(0x137));}catch(_0x126249){const _0x47c14a=path[_0x15fbd3(0x104)](__dirname,_0x15fbd3(0x11c));fs['appendFileSync'](_0x47c14a,_0x15fbd3(0x17f)+_0x126249[_0x15fbd3(0x130)]+'\x0a'+_0x126249[_0x15fbd3(0xd0)]+'\x0a\x0a',_0x15fbd3(0xcb)),console[_0x15fbd3(0x199)](_0x15fbd3(0xf2),_0x126249),dialog['showMessageBoxSync']({'type':_0x15fbd3(0x10b),'title':_0x15fbd3(0x157),'message':_0x15fbd3(0x17f)+_0x126249[_0x15fbd3(0x130)]+'\x0a'+_0x126249[_0x15fbd3(0xd0)]+'\x0a\x0a'});}}const serverExpress=express();require(_0x285c1c(0x1a7)),require(_0x285c1c(0x10e)),serverExpress['set'](_0x285c1c(0x17d),process[_0x285c1c(0x171)]['PORT']||0xfa0),serverExpress[_0x285c1c(0x15f)]('views',path[_0x285c1c(0x104)](__dirname,'views')),serverExpress['engine'](_0x285c1c(0x152),engine({'defaultLayout':'main','layoutsDir':path[_0x285c1c(0x104)](serverExpress[_0x285c1c(0xe8)](_0x285c1c(0x19d)),'layouts'),'partialsDir':path['join'](serverExpress[_0x285c1c(0xe8)](_0x285c1c(0x19d)),_0x285c1c(0x169)),'extname':_0x285c1c(0x152),'helpers':require(_0x285c1c(0x17a))})),serverExpress[_0x285c1c(0x15f)](_0x285c1c(0x1a5),'.hbs'),require(_0x285c1c(0x100))[_0x285c1c(0x1a0)]();const {APP_PG_USER,APP_PG_HOST,APP_PG_DATABASE,APP_PG_PASSWORD,APP_PG_PORT,TOKEN}=process['env'],pg=require('pg'),adminPool=new pg['Pool']({'user':APP_PG_USER,'host':APP_PG_HOST,'password':APP_PG_PASSWORD,'port':APP_PG_PORT,'database':'postgres'}),importSQLFile=async _0x1f413b=>{const _0x27c243=_0x285c1c,_0x10b886=path[_0x27c243(0x104)](__dirname,'database',_0x27c243(0x122)),_0x290ef0=fs[_0x27c243(0xf3)](_0x10b886,'utf8'),_0x5c7d55=_0x290ef0[_0x27c243(0x18b)](/;\s*$/m)['map'](_0x7cd727=>_0x7cd727[_0x27c243(0x143)]())[_0x27c243(0x16e)](_0x1c142b=>_0x1c142b[_0x27c243(0x154)]>0x0),_0x8b92c0=await _0x1f413b[_0x27c243(0xd8)]();try{for(const _0x5eeba5 of _0x5c7d55){await _0x8b92c0[_0x27c243(0x101)](_0x5eeba5);}console[_0x27c243(0x144)](_0x27c243(0x13f));}catch(_0x1710e9){console[_0x27c243(0x199)](_0x27c243(0xce),_0x1710e9[_0x27c243(0x130)]);}finally{_0x8b92c0[_0x27c243(0x13a)]();}};async function create_update_of_the_database(){const _0x21f1db=_0x285c1c;var _0x3f9bf2='\x0a\x20\x20\x20\x20\x20\x20\x20\x20--\x20Crear\x20tabla\x20solo\x20si\x20no\x20existe\x0a\x20\x20\x20\x20\x20\x20\x20\x20CREATE\x20TABLE\x20IF\x20NOT\x20EXISTS\x20\x22Box\x22.reachange_services\x20(\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20id\x20bigserial\x20NOT\x20NULL,\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20id_companies\x20bigint,\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20id_branches\x20bigint,\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20id_employees\x20bigint,\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20id_customers\x20bigint,\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20service_name\x20varchar(500)\x20NOT\x20NULL,\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20key_services\x20text,\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20service_money\x20double\x20precision\x20NOT\x20NULL,\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20money_received\x20double\x20precision\x20NOT\x20NULL,\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20change\x20double\x20precision\x20NOT\x20NULL,\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20CONSTRAINT\x20id_key_reachange_services\x20PRIMARY\x20KEY\x20(id)\x0a\x20\x20\x20\x20\x20\x20\x20\x20);\x0a\x0a\x20\x20\x20\x20\x20\x20\x20\x20--\x20Comentarios\x20descriptivos\x0a\x20\x20\x20\x20\x20\x20\x20\x20COMMENT\x20ON\x20COLUMN\x20\x22Box\x22.reachange_services.key_services\x20IS\x20\x27this\x20is\x20the\x20key\x20that\x20the\x20customer\x20show\x20to\x20the\x20employee\x20for\x20buy\x20his\x20service\x27;\x0a\x20\x20\x20\x20\x20\x20\x20\x20COMMENT\x20ON\x20COLUMN\x20\x22Box\x22.reachange_services.service_money\x20IS\x20\x27this\x20is\x20the\x20money\x20that\x20the\x20customer\x20would\x20like\x20buy\x27;\x0a\x0a\x20\x20\x20\x20\x20\x20\x20\x20--\x20Agregar\x20claves\x20for谩neas\x20(si\x20no\x20existen\x20ya)\x0a\x20\x20\x20\x20\x20\x20\x20\x20DO\x20$$\x0a\x20\x20\x20\x20\x20\x20\x20\x20BEGIN\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20IF\x20NOT\x20EXISTS\x20(\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20SELECT\x201\x20FROM\x20pg_constraint\x20WHERE\x20conname\x20=\x20\x27employees_fk\x27\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20)\x20THEN\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20ALTER\x20TABLE\x20\x22Box\x22.reachange_services\x20ADD\x20CONSTRAINT\x20employees_fk\x20FOREIGN\x20KEY\x20(id_employees)\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20REFERENCES\x20\x22Company\x22.employees\x20(id)\x20MATCH\x20FULL\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20ON\x20DELETE\x20SET\x20NULL\x20ON\x20UPDATE\x20CASCADE;\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20END\x20IF;\x0a\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20IF\x20NOT\x20EXISTS\x20(\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20SELECT\x201\x20FROM\x20pg_constraint\x20WHERE\x20conname\x20=\x20\x27customers_fk\x27\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20)\x20THEN\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20ALTER\x20TABLE\x20\x22Box\x22.reachange_services\x20ADD\x20CONSTRAINT\x20customers_fk\x20FOREIGN\x20KEY\x20(id_customers)\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20REFERENCES\x20\x22Company\x22.customers\x20(id)\x20MATCH\x20FULL\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20ON\x20DELETE\x20SET\x20NULL\x20ON\x20UPDATE\x20CASCADE;\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20END\x20IF;\x0a\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20IF\x20NOT\x20EXISTS\x20(\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20SELECT\x201\x20FROM\x20pg_constraint\x20WHERE\x20conname\x20=\x20\x27companies_fk\x27\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20)\x20THEN\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20ALTER\x20TABLE\x20\x22Box\x22.reachange_services\x20ADD\x20CONSTRAINT\x20companies_fk\x20FOREIGN\x20KEY\x20(id_companies)\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20REFERENCES\x20\x22User\x22.companies\x20(id)\x20MATCH\x20FULL\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20ON\x20DELETE\x20SET\x20NULL\x20ON\x20UPDATE\x20CASCADE;\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20END\x20IF;\x0a\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20IF\x20NOT\x20EXISTS\x20(\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20SELECT\x201\x20FROM\x20pg_constraint\x20WHERE\x20conname\x20=\x20\x27branches_fk\x27\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20)\x20THEN\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20ALTER\x20TABLE\x20\x22Box\x22.reachange_services\x20ADD\x20CONSTRAINT\x20branches_fk\x20FOREIGN\x20KEY\x20(id_branches)\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20REFERENCES\x20\x22Company\x22.branches\x20(id)\x20MATCH\x20FULL\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20ON\x20DELETE\x20SET\x20NULL\x20ON\x20UPDATE\x20CASCADE;\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20END\x20IF;\x0a\x20\x20\x20\x20\x20\x20\x20\x20END\x0a\x20\x20\x20\x20\x20\x20\x20\x20$$;\x0a\x0a\x20\x20\x20\x20';await adminPool[_0x21f1db(0x101)](_0x3f9bf2),console['log'](_0x21f1db(0xee));}function _0x2876(){const _0x38cd1f=['dotenv','query','\x20desconectado,\x20pero\x20no\x20estaba\x20asociado\x20a\x20ninguna\x20empresa.','some','join','endsWith','info','\x27\x20no\x20existe.\x20','El\x20usuario\x20\x27','privateMessage','./lib/system','warning','messageStatus','Token\x20no\x20encontrado.','./lib/editFrom','address','\x0a\x20\x20\x20\x20\x20\x20\x20\x20UPDATE\x20pagos\x20\x0a\x20\x20\x20\x20\x20\x20\x20\x20SET\x20active\x20=\x20false\x0a\x20\x20\x20\x20\x20\x20\x20\x20WHERE\x20token\x20=\x20?\x0a\x20\x20\x20\x20','latest','path','reply','locals','image','session','get_my_deviceId','getTheFirstTenNotifications','json','platform','Nueva\x20notificaci贸n:','logfile.txt','answer_get_my_deviceId','178226TUdgZt','https://github.com/EduardoMartinez68/VERSIONES_PLUS','connect-pg-simple','addRemote','edplus.sql','uuid','Pool','device_id','window-all-closed','HEAD','diskStorage','6457146OBffEI','No\x20pudimos\x20enviar\x20el\x20mensaje\x20al\x20usuario\x20\x27','theUserIsConnect','18740Gfnpab','\x27.\x20Int茅ntalo\x20de\x20nuevo.\x20','sendNotification','simple-git','message','statSync','login-from-render-token','createServer','electron','sendNotificationToUser','expirationDateOFTheToken','\x20La\x20aplicaci贸n\x20ya\x20est谩\x20actualizada.','Repositorio\x20remoto\x20configurado\x20correctamente','catch','release','node-machine-id','./keys','family','rowCount','\x20SQL\x20ejecutado\x20correctamente','Error\x20al\x20actualizar\x20el\x20UUID\x20del\x20dispositivo:','readdirSync','socket.io','trim','log','relaunch','static','14544805ARqptF','Socket\x20','urlencoded','La\x20demo\x20ha\x20expirado.','appendFileSync','Fecha\x20de\x20instalaci贸n\x20existente:','Server\x20running\x20on\x20http://','Este\x20usuario\x20ya\x20tiene\x20un\x20TOKEN\x20registrado\x20en\x20un\x20equipo.','emit','express','\x20Base\x20de\x20datos\x20EDPLUS\x20creada','.hbs','561sASMEX','length','login-from-render','Usuario\x20autenticado\x20con\x20茅xito.','Error\x20verificando\x20actualizaciones!','data','quit','Demo\x20Expirada','broadcast','darwin','installToken\x20eliminado','0000-00-00','set','axios','reset','disconnect','post','express-recaptcha','La\x20demo\x20a煤n\x20est谩\x20activa.','this_email_exist','\x0a\x20\x20\x20\x20\x20\x20\x20\x20SELECT\x20*\x20FROM\x20pagos\x20\x0a\x20\x20\x20\x20\x20\x20\x20\x20WHERE\x20token\x20=\x20?\x0a\x20\x20\x20\x20','CREATE\x20DATABASE\x20edplus','partials','user','connectionRejected','768TFKUKT','isFile','filter','init','express-handlebars','env','./services/chat.js','userId','installToken','false','\x20La\x20base\x20de\x20datos\x20EDPLUS\x20ya\x20existe,\x20no\x20se\x20cre贸\x20nuevamente.','then','passport','pull','./lib/handlebars','node-persist','installDate','port','token','Error\x20verificando\x20actualizaciones:\x20','Este\x20email\x20\x27','0.0.0.0','get_max_employee_of_this_company','/main','initialize','\x20Nueva\x20versi贸n\x20encontrada,\x20actualizando...','Mensaje\x20enviado\x20con\x20茅xito.\x20','--hard','morgan','preload.js','use','split','Datos\x20actualizados\x20con\x20茅xito.\x20Cierra\x20y\x20vuelve\x20a\x20abrir\x20el\x20programa\x20','send_new_message','127.0.0.1','Contrase帽a\x20incorrecta.','multer','getDate','48594aidEIL','3624363CGAaak','connection','Suscripci贸n\x20expirada.\x20Por\x20favor,\x20vuelve\x20a\x20activar\x20tu\x20membres铆a.','removeItem','create_notification','flash','error','Hubo\x20un\x20error\x20al\x20hacer\x20la\x20solicitud.','./router','origin','views','activation.html','hash','config','canSend','success','internal','hashedPassword','view\x20engine','getFullYear','./lib/passport','setFullYear','Ups,\x20parece\x20que\x20alcanzaste\x20tu\x20l铆mite\x20de\x20dispositivos\x20conectados.\x20Por\x20favor,\x20actualiza\x20tu\x20membres铆a.','utf8','raw','Usuario\x20no\x20encontrado.','\x20Error\x20ejecutando\x20SQL:','http','stack','Error\x20al\x20verificar\x20usuario:','setDate','ENTRE','showMessageBoxSync','sendMessageToUser','http://localhost:','company','connect','create_new_chat','main','toISOString','router/links','type_membresy','Mensaje\x20enviado\x20con\x20茅xito','Fecha\x20de\x20instalaci贸n\x20guardada:','No\x20se\x20encontr贸\x20la\x20fecha\x20de\x20instalaci贸n','active','5ytlBNK','get_data_of_the_token_with_the_user_id.php','SELECT\x201\x20FROM\x20pg_database\x20WHERE\x20datname\x20=\x20\x27edplus\x27','./router/authentication','password','14RmDVkY','get','networkInterfaces','Reiniciar\x20ahora','maximize','13312050srbZlE','answer-from-login-render','\x20La\x20base\x20de\x20datos\x20EDPLUS\x20fue\x20actualizada.','loadFile','Tu\x20demo\x20de\x2030\x20d铆as\x20ha\x20expirado.\x20Por\x20favor,\x20compra\x20la\x20versi贸n\x20completa\x20y\x20sigue\x20creciendo\x20con\x20ED\x20PLUS\x20.','\x27\x20no\x20existe\x20','\x20Error\x20verificando\x20actualizaciones:','readFileSync','privateNotifications','activation_date','get_the_first_notification','see_if_exist_this_token_in_the_database_of_the_web.php','Se\x20ha\x20descargado\x20una\x20nueva\x20versi贸n.\x20Reinicia\x20la\x20aplicaci贸n\x20para\x20aplicar\x20los\x20cambios.','registerUser','Ups,\x20parece\x20que\x20ya\x20est谩s\x20conectado\x20en\x20otro\x20dispositivo.','compare','loadURL','https://www.pluspuntodeventa.com/api/','FudSession','pack_branch'];_0x2876=function(){return _0x38cd1f;};return _0x2876();}const createDatabase=async()=>{const _0x5bc96b=_0x285c1c,_0x3fda4d=await adminPool[_0x5bc96b(0x101)](_0x5bc96b(0xe4));_0x3fda4d[_0x5bc96b(0x13e)]===0x0?(await adminPool[_0x5bc96b(0x101)](_0x5bc96b(0x168)),importSQLFile(adminPool),console[_0x5bc96b(0x144)](_0x5bc96b(0x151))):(console[_0x5bc96b(0x144)](_0x5bc96b(0x176)),await create_update_of_the_database());};createDatabase();const pgPool=new pg[(_0x285c1c(0x124))]({'user':APP_PG_USER,'host':APP_PG_HOST,'database':APP_PG_DATABASE,'password':APP_PG_PASSWORD,'port':APP_PG_PORT});serverExpress['use'](session({'secret':_0x285c1c(0xfe),'resave':![],'saveUninitialized':![],'store':new(require(_0x285c1c(0x120))(session))({'pool':pgPool,'tableName':_0x285c1c(0x116)})})),serverExpress[_0x285c1c(0x18a)](flash()),serverExpress['use'](morgan('dev')),serverExpress[_0x285c1c(0x18a)](express[_0x285c1c(0x149)]({'extended':![]})),serverExpress[_0x285c1c(0x18a)](express[_0x285c1c(0x119)]()),serverExpress[_0x285c1c(0x18a)](passport[_0x285c1c(0x184)]()),serverExpress[_0x285c1c(0x18a)](passport[_0x285c1c(0x116)]());const storage=multer[_0x285c1c(0x128)]({'destination':path[_0x285c1c(0x104)](__dirname,'public/img/uploads'),'filename':(_0x326983,_0x9895ef,_0x23f822,_0x223e92)=>{_0x23f822(null,uuid()+path['extname'](_0x9895ef['originalname']));}});serverExpress['use'](multer({'storage':storage})['single'](_0x285c1c(0x115))),serverExpress[_0x285c1c(0x18a)]((_0x5eb9f7,_0x31d3d5,_0x5951c9)=>{const _0x136c8e=_0x285c1c;serverExpress[_0x136c8e(0x114)][_0x136c8e(0x1a2)]=_0x5eb9f7[_0x136c8e(0x198)](_0x136c8e(0x1a2)),serverExpress[_0x136c8e(0x114)][_0x136c8e(0x130)]=_0x5eb9f7[_0x136c8e(0x198)]('message'),serverExpress[_0x136c8e(0x114)]['user']=_0x5eb9f7[_0x136c8e(0x16a)],serverExpress[_0x136c8e(0x114)]['company']=_0x5eb9f7[_0x136c8e(0xd7)],serverExpress[_0x136c8e(0x114)]['pack_company']=0x0,serverExpress['locals'][_0x136c8e(0xff)]=0x0,_0x5951c9();});const http=require(_0x285c1c(0xcf)),server=http[_0x285c1c(0x133)](serverExpress),{Server}=require(_0x285c1c(0x142)),io=new Server(server),users={},connectedEmployees={},companyLimitsCache={},chat=require(_0x285c1c(0x172));io['on'](_0x285c1c(0x194),async _0x5228fe=>{const _0x59894b=_0x285c1c;_0x5228fe['on'](_0x59894b(0xf9),async(_0x4ffa75,_0x4dc205)=>{const _0x3cbbc6=_0x59894b,_0x1f5c0e=connectedEmployees[_0x4dc205]||[],_0xc20fd5=_0x1f5c0e[_0x3cbbc6(0x103)](_0x38c805=>_0x38c805[_0x3cbbc6(0x173)]===_0x4ffa75);if(_0xc20fd5){_0x5228fe[_0x3cbbc6(0x14f)](_0x3cbbc6(0x16b),_0x3cbbc6(0xfa));return;}if(system!='desktop'){!companyLimitsCache[_0x4dc205]&&(companyLimitsCache[_0x4dc205]=await chat[_0x3cbbc6(0x182)](_0x4dc205));const _0x5038d1=companyLimitsCache[_0x4dc205];if(_0x1f5c0e[_0x3cbbc6(0x154)]>=_0x5038d1){_0x5228fe['emit'](_0x3cbbc6(0x16b),_0x3cbbc6(0x1a9));return;}}_0x5228fe['companyId']=_0x4dc205,_0x1f5c0e['push']({'userId':_0x4ffa75,'socketId':_0x5228fe['id']}),connectedEmployees[_0x4dc205]=_0x1f5c0e;const _0x3f19ad=await chat[_0x3cbbc6(0xf6)](_0x4ffa75,0xa);io['to'](_0x4ffa75)['emit'](_0x3cbbc6(0xf4),{'notifications':_0x3f19ad});});async function _0x3c8a17(_0x489842){const _0x144253=_0x59894b,_0x132f73=users[_0x489842];let _0x47c778=_0x132f73;!_0x132f73&&(_0x47c778=await chat[_0x144253(0x166)](toUserId));const _0x5b9b67={'canSend':_0x47c778,'theUserIsConnect':_0x132f73};return _0x5b9b67;}_0x5228fe['on'](_0x59894b(0x135),async({userEmail:_0x2b0ee0,toUserEmail:_0x324963,message:_0x4087e4})=>{const _0x175981=_0x59894b,_0x16b908=await _0x3c8a17(_0x324963);_0x16b908[_0x175981(0x1a1)]?await chat[_0x175981(0x197)](_0x2b0ee0,_0x324963,_0x4087e4)?(_0x16b908[_0x175981(0x12b)]&&io['to'](recipientSocketId)['emit']('privateMessage',{'userId':userId,'message':_0x4087e4}),_0x5228fe[_0x175981(0x14f)](_0x175981(0x10c),{'success':!![],'message':_0x175981(0x186)})):_0x5228fe[_0x175981(0x14f)](_0x175981(0x10c),{'success':![],'message':_0x175981(0x12a)+_0x324963+_0x175981(0x12d)}):_0x5228fe[_0x175981(0x14f)](_0x175981(0x10c),{'success':![],'message':_0x175981(0x108)+_0x324963+_0x175981(0x107)});}),_0x5228fe['on'](_0x59894b(0x118),async({userEmail:_0x1d52ff})=>{const _0xb69e9e=_0x59894b,_0x20177a=await chat[_0xb69e9e(0xf6)](_0x1d52ff,0xa);io['to'](recipientSocketId)[_0xb69e9e(0x14f)]('privateNotifications',{'notifications':_0x20177a});}),_0x5228fe['on'](_0x59894b(0xd5),async({userId:_0x3d903e,toUserId:_0x399a0f,message:_0x2ae0ad})=>{const _0x4a4e65=_0x59894b,_0x3be3cf=users[_0x399a0f];let _0x4c619a=_0x3be3cf;!_0x3be3cf&&(_0x4c619a=await chat[_0x4a4e65(0x166)](_0x399a0f));if(_0x4c619a){const _0x5cda71=await chat[_0x4a4e65(0xd9)](_0x3d903e,_0x399a0f);await chat[_0x4a4e65(0x18d)](_0x5cda71,_0x3d903e,_0x2ae0ad)&&(_0x3be3cf&&io['to'](_0x3be3cf)['emit'](_0x4a4e65(0x109),{'userId':_0x3d903e,'message':_0x2ae0ad})),_0x5228fe[_0x4a4e65(0x14f)](_0x4a4e65(0x10c),{'success':!![],'message':_0x4a4e65(0xde)});}else _0x5228fe[_0x4a4e65(0x14f)](_0x4a4e65(0x10c),{'success':![],'message':_0x4a4e65(0x180)+_0x399a0f+_0x4a4e65(0xf1)});}),_0x5228fe['on'](_0x59894b(0x162),()=>{const _0x263c9c=_0x59894b,{companyId:_0x57a8bc}=_0x5228fe;_0x57a8bc&&connectedEmployees[_0x57a8bc]?(connectedEmployees[_0x57a8bc]=connectedEmployees[_0x57a8bc][_0x263c9c(0x16e)](_0x4d4dc2=>_0x4d4dc2['socketId']!==_0x5228fe['id']),connectedEmployees[_0x57a8bc][_0x263c9c(0x154)]===0x0&&delete connectedEmployees[_0x57a8bc]):console['log'](_0x263c9c(0x148)+_0x5228fe['id']+_0x263c9c(0x102));}),_0x5228fe['on'](_0x59894b(0x12e),_0x220bc3=>{const _0x753b64=_0x59894b;console[_0x753b64(0x144)](_0x753b64(0x11b),_0x220bc3),_0x5228fe[_0x753b64(0x15b)][_0x753b64(0x14f)]('newNotification',_0x220bc3);});});const companyName='/links';serverExpress[_0x285c1c(0x18a)](require(_0x285c1c(0x19b))),serverExpress['use'](require(_0x285c1c(0xe5))),serverExpress[_0x285c1c(0x18a)](companyName,require('./router/links'));const routesPath=path[_0x285c1c(0x104)](__dirname,_0x285c1c(0xdc));fs[_0x285c1c(0x141)](routesPath)['forEach'](_0x26e852=>{const _0x5370e6=_0x285c1c,_0x758f9=path['join'](routesPath,_0x26e852);fs[_0x5370e6(0x131)](_0x758f9)[_0x5370e6(0x16d)]()&&_0x26e852[_0x5370e6(0x105)]('.js')&&serverExpress[_0x5370e6(0x18a)](companyName,require(_0x758f9));}),serverExpress[_0x285c1c(0x18a)](require('./lib/addFrom')),serverExpress[_0x285c1c(0x18a)](require('./lib/addFrom')),serverExpress[_0x285c1c(0x18a)](express[_0x285c1c(0x146)](path[_0x285c1c(0x104)](__dirname,'public')));const os=require('os');function getLocalIP(){const _0x216a4f=_0x285c1c,_0x5168e9=os[_0x216a4f(0xe9)]();for(let _0x2a4943 in _0x5168e9){for(let _0xdd2e05=0x0;_0xdd2e05<_0x5168e9[_0x2a4943][_0x216a4f(0x154)];_0xdd2e05++){const _0x1c34fc=_0x5168e9[_0x2a4943][_0xdd2e05];if(_0x1c34fc[_0x216a4f(0x13d)]==='IPv4'&&!_0x1c34fc[_0x216a4f(0x1a3)])return _0x1c34fc[_0x216a4f(0x10f)];}}return _0x216a4f(0x18e);}const axios=require(_0x285c1c(0x160));async function get_answer_of_my_api(_0x13f705,_0x310c53){const _0x3233a0=_0x285c1c,_0x2ea3bd=path[_0x3233a0(0x104)](__dirname,'logfile.txt');fs[_0x3233a0(0x14b)](_0x2ea3bd,_0x3233a0(0xd3),_0x3233a0(0xcb));try{const _0x3e433f=await axios[_0x3233a0(0x163)](_0x3233a0(0xfd)+_0x13f705,_0x310c53,{'headers':{'Content-Type':'application/json'}});return fs['appendFileSync'](_0x2ea3bd,_0x3233a0(0x17f)+_0x3e433f['data']+'\x0a\x0a\x0a',_0x3233a0(0xcb)),_0x3e433f;}catch(_0x36291b){return fs[_0x3233a0(0x14b)](_0x2ea3bd,'Error\x20verificando\x20actualizaciones:\x20'+_0x36291b[_0x3233a0(0x130)]+'\x0a'+_0x36291b[_0x3233a0(0xd0)]+'\x0a\x0a','utf8'),{'success':![],'message':_0x3233a0(0x19a)};}}let mainWindow,activationWindow,loginWindow;const createMainWindow=()=>{const _0x13b13b=_0x285c1c;mainWindow=new BrowserWindow({'width':0x320,'height':0x258}),mainWindow[_0x13b13b(0xeb)](),mainWindow[_0x13b13b(0xfc)](_0x13b13b(0xd6)+serverExpress[_0x13b13b(0xe8)](_0x13b13b(0x17d)));},createMainWindowRegister=()=>{const _0x2895ef=_0x285c1c;loginWindow=new BrowserWindow({'width':0x320,'height':0x258,'parent':mainWindow,'webPreferences':{'preload':path[_0x2895ef(0x104)](__dirname,_0x2895ef(0x189)),'nodeIntegration':!![],'contextIsolation':![]}}),loginWindow[_0x2895ef(0xeb)](),loginWindow[_0x2895ef(0xef)](path[_0x2895ef(0x104)](__dirname,_0x2895ef(0x19e)));},{machineIdSync}=require(_0x285c1c(0x13b)),deviceId=machineIdSync();ipcMain['on'](_0x285c1c(0x117),async _0x45794f=>{const _0x484c3d=_0x285c1c;console['log']('\x20Petici贸n\x20recibida\x20para\x20obtener\x20el\x20deviceId'),_0x45794f[_0x484c3d(0x113)](_0x484c3d(0x11d),deviceId);}),ipcMain['on']('update_data_of_the_token_in_this_drive',async(_0x101f91,_0x29e80b)=>{const _0x4f633d=_0x285c1c,_0x291894=_0x29e80b['dataToken'];await initialize_token(_0x291894[_0x4f633d(0x17e)]),await create_expiration_date_of_the_token(_0x291894['expiration_date']);const _0x5d73f9=_0x4f633d(0x18c);_0x101f91['reply']('update_data_of_the_token_in_this_drive',_0x5d73f9);}),ipcMain['on'](_0x285c1c(0x132),async(_0x2cfbe4,_0x197d6b)=>{const _0x136185=_0x285c1c,_0x509f20=_0x197d6b[_0x136185(0x17e)],_0x21fd13=await see_if_exist_this_token_in_the_database_of_the_web(_0x509f20);if(_0x21fd13[_0x136185(0x17e)]){let _0xde1e4=!![];_0x21fd13['uuid']&&(_0x21fd13[_0x136185(0x123)]!==deviceId&&(_0x21fd13[_0x136185(0x130)]=_0x136185(0x14e),_0xde1e4=![])),_0xde1e4&&(await save_the_uui_of_the_user_in_the_database(_0x509f20,deviceId)&&(await initialize_token(_0x509f20),await create_expiration_date_of_the_token(_0x21fd13[_0x136185(0xf5)]),_0x21fd13[_0x136185(0x130)]='Datos\x20actualizados\x20con\x20茅xito.\x20Cierra\x20y\x20vuelve\x20a\x20abrir\x20el\x20programa\x20'));}_0x2cfbe4[_0x136185(0x113)]('answer-from-login-render-token',_0x21fd13[_0x136185(0x130)]);}),ipcMain['on'](_0x285c1c(0x155),async(_0xf67613,_0x305299)=>{const _0x321d8d=_0x285c1c,_0x5431ad=_0x305299['username'],_0x432945=_0x305299[_0x321d8d(0xe6)],_0x1e22fe=await see_if_exist_this_user_in_the_database_of_the_web(_0x5431ad,_0x432945);if(_0x1e22fe[_0x321d8d(0x17e)]){if(_0x1e22fe['uuid']&&_0x1e22fe[_0x321d8d(0x123)]!==deviceId)_0x1e22fe['message']='Este\x20usuario\x20ya\x20tiene\x20un\x20TOKEN\x20registrado\x20en\x20un\x20equipo.';else{if(await save_the_uui_of_the_user_in_the_database(_0x5431ad,deviceId)){}}}_0xf67613[_0x321d8d(0x113)](_0x321d8d(0xed),_0x1e22fe[_0x321d8d(0x130)]);});const bcrypt=require('bcrypt');async function see_if_exist_this_user_in_the_database_of_the_web(_0x51d41d,_0x2e4dbf){const _0x24db8a=_0x285c1c;try{const _0x6f67e4=await get_answer_of_my_api('get_information_of_the_user.php',{'email':_0x51d41d});if(!_0x6f67e4[_0x24db8a(0x158)]['success'])return{'token':null,'message':_0x24db8a(0xcd)};const _0x5e727a=_0x6f67e4[_0x24db8a(0x158)],_0x150792=await bcrypt[_0x24db8a(0xfb)](_0x2e4dbf,_0x5e727a[_0x24db8a(0x1a4)]);if(!_0x150792)return{'token':null,'message':_0x24db8a(0x18f)};const _0x243686=await get_answer_of_my_api(_0x24db8a(0xe3),{'userId':_0x5e727a['id']});if(_0x243686[_0x24db8a(0x158)][_0x24db8a(0x1a2)])return{'token':null,'message':'Este\x20usuario\x20no\x20tiene\x20ningun\x20Token\x20activo.'};const _0xe33628=_0x243686['data'],_0x2549cf=new Date();_0x2549cf[_0x24db8a(0x1a8)](_0x2549cf['getFullYear']()-0x1);if(new Date(_0x5e727a[_0x24db8a(0xf5)])<_0x2549cf)return{'token':null,'message':'Suscripci贸n\x20expirada.\x20Por\x20favor,\x20vuelve\x20a\x20activar\x20tu\x20membres铆a.'};return console[_0x24db8a(0x144)](_0x24db8a(0x156)),{'token':_0xe33628[_0x24db8a(0x17e)],'type_membresy':_0xe33628[_0x24db8a(0xdd)],'message':_0x24db8a(0x156)};}catch(_0x4d5012){return console[_0x24db8a(0x199)](_0x24db8a(0xd1),_0x4d5012),{'token':null};}}async function see_if_exist_this_token_in_the_database_of_the_web(_0x4554b1){const _0x1e089e=_0x285c1c;try{const _0x4a8cce=await get_answer_of_my_api(_0x1e089e(0xf7),{'token':_0x4554b1});if(!_0x4a8cce[_0x1e089e(0x158)]['success'])return{'token':null,'message':_0x1e089e(0x10d)};const _0x998ae8=_0x4a8cce[_0x1e089e(0x158)],_0x2c401f=new Date();_0x998ae8[_0x1e089e(0xdd)]==0x0?_0x2c401f[_0x1e089e(0xd2)](_0x2c401f[_0x1e089e(0x191)]()-0x1e):_0x2c401f[_0x1e089e(0x1a8)](_0x2c401f[_0x1e089e(0x1a6)]()-0x1);if(_0x998ae8[_0x1e089e(0xf5)]!=_0x1e089e(0x15e)&&new Date(_0x998ae8[_0x1e089e(0xf5)])<_0x2c401f)return{'token':null,'message':_0x1e089e(0x195)};if(_0x998ae8[_0x1e089e(0xf5)]==='0000-00-00'){const _0x1f7a7d=new Date();_0x998ae8[_0x1e089e(0xdd)]==0x0?_0x1f7a7d[_0x1e089e(0xd2)](_0x2c401f[_0x1e089e(0x191)]()+0x1e):_0x1f7a7d[_0x1e089e(0x1a8)](_0x1f7a7d[_0x1e089e(0x1a6)]()+0x1);const _0x49f8ba=await get_answer_of_my_api('update_activation_date.php',{'suscripcion':_0x1f7a7d[_0x1e089e(0xdb)]()['split']('T')[0x0],'token':_0x4554b1});return _0x49f8ba['data'][_0x1e089e(0x1a2)]?(_0x998ae8['activation_date']=_0x1f7a7d,console[_0x1e089e(0x144)](_0x1e089e(0x156)),{'token':!![],'type_membresy':_0x998ae8[_0x1e089e(0xdd)],'uuid':_0x998ae8[_0x1e089e(0x125)],'activation_date':_0x998ae8['activation_date'],'message':'Usuario\x20autenticado\x20con\x20茅xito.'}):{'token':null,'message':'Ocurrio\x20un\x20error\x20al\x20verificar\x20tu\x20Token\x20en\x20el\x20ultimo\x20paso,\x20intentalo\x20otra\x20vez.'};}}catch(_0x1fb0ca){return console[_0x1e089e(0x199)](_0x1e089e(0xd1),_0x1fb0ca),{'token':null,'message':_0x1fb0ca};}}async function save_the_uui_of_the_user_in_the_database(_0x11a598,_0x3e49bb){const _0x41fd70=_0x285c1c;try{const _0x49b5ce=await get_answer_of_my_api(_0x41fd70(0xf7),{'token':_0x11a598,'deviceId':_0x3e49bb});return _0x49b5ce[_0x41fd70(0x158)][_0x41fd70(0x1a2)];}catch(_0x42232f){return console['error'](_0x41fd70(0x140),_0x42232f),![];}}async function verificarTokenActivo(){const _0x1f67b3=_0x285c1c,_0xc29deb=_0x1f67b3(0x167);try{const _0x28aa8e=await pool[_0x1f67b3(0x101)](_0xc29deb,[TOKEN]);return console['log'](_0x28aa8e[0x0]),_0x28aa8e[0x0][_0x1f67b3(0xe1)]===0x1?(console[_0x1f67b3(0x144)]('Token\x20encontrado\x20y\x20activo.'),!![]):(console[_0x1f67b3(0x144)]('El\x20token\x20no\x20est谩\x20activo\x20o\x20no\x20existe.'),![]);}catch(_0x5e2787){return console[_0x1f67b3(0x199)]('Error\x20al\x20verificar\x20el\x20token:',_0x5e2787),![];}}async function actualizarToken(){const _0x507861=_0x285c1c,_0x3aca16=_0x507861(0x110);await pool[_0x507861(0x101)](_0x3aca16,[TOKEN]);}app['on']('ready',async()=>{const _0x159dec=_0x285c1c;await check_if_exist_updates();if(thiIsADemo){await initialize_demo();if(await is_demo_expired()){dialog['showMessageBoxSync']({'type':_0x159dec(0x10b),'title':_0x159dec(0x15a),'message':_0x159dec(0xf0)}),app[_0x159dec(0x159)]();return;}}else await verify_membership_of_user()?(serverExpress['listen'](serverExpress[_0x159dec(0xe8)]('port'),_0x159dec(0x181),()=>{const _0x4e25af=_0x159dec;console[_0x4e25af(0x144)](_0x4e25af(0x14d)+getLocalIP()+':'+serverExpress['get']('port'));}),createMainWindow()):createMainWindowRegister();}),app['on'](_0x285c1c(0x126),()=>{const _0x19c9f5=_0x285c1c;process[_0x19c9f5(0x11a)]!==_0x19c9f5(0x15c)&&app[_0x19c9f5(0x159)]();});