const _0x28f1ae=_0x4f4f;(function(_0x4f1ce7,_0x408970){const _0x3e39be=_0x4f4f,_0x3904ff=_0x4f1ce7();while(!![]){try{const _0x10d2a7=-parseInt(_0x3e39be(0x101))/0x1+parseInt(_0x3e39be(0xc1))/0x2*(-parseInt(_0x3e39be(0xae))/0x3)+-parseInt(_0x3e39be(0x12d))/0x4*(-parseInt(_0x3e39be(0xc8))/0x5)+parseInt(_0x3e39be(0x110))/0x6+parseInt(_0x3e39be(0x134))/0x7*(-parseInt(_0x3e39be(0x151))/0x8)+parseInt(_0x3e39be(0xf2))/0x9+parseInt(_0x3e39be(0x107))/0xa*(parseInt(_0x3e39be(0x120))/0xb);if(_0x10d2a7===_0x408970)break;else _0x3904ff['push'](_0x3904ff['shift']());}catch(_0x52b249){_0x3904ff['push'](_0x3904ff['shift']());}}}(_0x35da,0x432f2));const system=require('./lib/system'),thiIsADemo=![],{app,BrowserWindow,dialog,ipcMain}=require(_0x28f1ae(0x104)),express=require(_0x28f1ae(0x124)),morgan=require(_0x28f1ae(0xb0)),{engine}=require('express-handlebars'),multer=require(_0x28f1ae(0x9c)),flash=require('connect-flash'),session=require(_0x28f1ae(0xb4)),passport=require(_0x28f1ae(0xd2)),{database}=require(_0x28f1ae(0x8c)),{v4:uuid}=require(_0x28f1ae(0x161)),path=require(_0x28f1ae(0xe1)),{RecaptchaV2}=require(_0x28f1ae(0x92)),nodePersist=require(_0x28f1ae(0x109));nodePersist[_0x28f1ae(0x130)]({'dir':path[_0x28f1ae(0x15d)](__dirname,'data')});async function initialize_software(){const _0x476a5d=_0x28f1ae,_0x2901d5=await nodePersist[_0x476a5d(0x16a)](_0x476a5d(0x96));!_0x2901d5&&await nodePersist[_0x476a5d(0x14b)](_0x476a5d(0x96),_0x476a5d(0x157));}function _0x4f4f(_0x45cc91,_0xc12207){const _0x35da0c=_0x35da();return _0x4f4f=function(_0x4f4feb,_0x16c314){_0x4f4feb=_0x4f4feb-0x7b;let _0x5d8ef0=_0x35da0c[_0x4f4feb];return _0x5d8ef0;},_0x4f4f(_0x45cc91,_0xc12207);}async function the_software_have_a_token(){const _0x352c57=_0x28f1ae,_0x1906eb=await nodePersist[_0x352c57(0x16a)](_0x352c57(0x96));if(!_0x1906eb)return![];return _0x1906eb!=_0x352c57(0x157);}async function create_expiration_date_of_the_token(_0x28d09b){const _0x25f82c=_0x28f1ae,_0xabddcf=await nodePersist[_0x25f82c(0x16a)](_0x25f82c(0x9b));!_0xabddcf&&await nodePersist['set'](_0x25f82c(0x9b),_0x28d09b);}async function token_expired(){const _0x431830=_0x28f1ae,_0x43700d=await nodePersist[_0x431830(0x16a)](_0x431830(0x9b)),_0x3f46b8=new Date(_0x43700d),_0x2ba6c6=new Date();return _0x2ba6c6<_0x3f46b8;}async function remove_install_token(){const _0x2efb04=_0x28f1ae;await nodePersist[_0x2efb04(0xc9)](_0x2efb04(0x96)),await nodePersist[_0x2efb04(0xc9)](_0x2efb04(0x9b)),console['log'](_0x2efb04(0xb2));}async function initialize_token(_0x3514d9){const _0x1d0b0c=_0x28f1ae,_0xd889ec=await nodePersist[_0x1d0b0c(0x16a)](_0x1d0b0c(0x96));await nodePersist[_0x1d0b0c(0x14b)](_0x1d0b0c(0x96),_0x3514d9);}async function initialize_demo(){const _0x31c849=_0x28f1ae,_0x3ae315=await nodePersist[_0x31c849(0x16a)](_0x31c849(0x152));if(!_0x3ae315){const _0x100dfc=new Date()[_0x31c849(0x13b)]();await nodePersist[_0x31c849(0x14b)](_0x31c849(0xa3),_0x100dfc),console[_0x31c849(0x94)](_0x31c849(0x15a),_0x100dfc);}else console['log']('Fecha\x20de\x20instalación\x20existente:',_0x3ae315);}async function is_demo_expired(){const _0x441165=_0x28f1ae,_0x3064de=await nodePersist[_0x441165(0x16a)](_0x441165(0x152));if(!_0x3064de)return console[_0x441165(0x94)]('No\x20se\x20encontró\x20la\x20fecha\x20de\x20instalación'),![];const _0x46ef3b=new Date(_0x3064de),_0x22d768=new Date(),_0x1ff8eb=_0x22d768-_0x46ef3b,_0x98aa60=_0x1ff8eb/(0x3e8*0x3c*0x3c*0x18);return _0x98aa60>0x1e?(console['log']('La\x20demo\x20ha\x20expirado.'),!![]):(console[_0x441165(0x94)](_0x441165(0x80)),![]);}async function this_software_count_have_a_count(){}async function the_user_have_a_token_active_in_the_database(){}async function verify_membership_of_user(){initialize_software();if(await the_software_have_a_token())return await token_expired();return![];}const simpleGit=require(_0x28f1ae(0xad)),fs=require('fs'),repoPath=path['join'](__dirname),git=simpleGit(repoPath),repoURL=_0x28f1ae(0xf3),remote=_0x28f1ae(0x136);git[_0x28f1ae(0xe8)](remote,repoURL)['then'](()=>{const _0x5d750d=_0x28f1ae;console[_0x5d750d(0x94)]('Repositorio\x20remoto\x20configurado\x20correctamente');})['catch'](_0x30af8a=>{const _0x2b7ee6=_0x28f1ae;console[_0x2b7ee6(0x13c)](_0x2b7ee6(0x100),_0x30af8a);});async function check_if_exist_updates(){const _0xa0238d=_0x28f1ae;try{await git[_0xa0238d(0x16b)](remote);const _0xee87c7=await git['log']([remote+_0xa0238d(0x13d),'-1']),_0x286ec3=await git[_0xa0238d(0x94)]([_0xa0238d(0xeb),'-1']);_0xee87c7[_0xa0238d(0x121)][_0xa0238d(0xef)]!==_0x286ec3[_0xa0238d(0x121)][_0xa0238d(0xef)]?(console[_0xa0238d(0x94)](_0xa0238d(0x16c)),await git['raw']([_0xa0238d(0x13a),_0xa0238d(0xbe),remote+_0xa0238d(0x13d)]),await git[_0xa0238d(0xcd)](_0xa0238d(0x136),_0xa0238d(0xf1),{'--rebase':null}),dialog['showMessageBoxSync']({'type':_0xa0238d(0x155),'title':_0xa0238d(0x8f),'message':_0xa0238d(0x156),'buttons':[_0xa0238d(0xc4)]}),app[_0xa0238d(0xe9)](),app[_0xa0238d(0xbf)]()):console[_0xa0238d(0x94)](_0xa0238d(0x133));}catch(_0x3daa6f){const _0x47d829=path[_0xa0238d(0x15d)](__dirname,_0xa0238d(0x127));fs[_0xa0238d(0xdc)](_0x47d829,_0xa0238d(0xfc)+_0x3daa6f[_0xa0238d(0x7b)]+'\x0a'+_0x3daa6f[_0xa0238d(0x8e)]+'\x0a\x0a',_0xa0238d(0xac)),console[_0xa0238d(0x13c)](_0xa0238d(0x12e),_0x3daa6f),dialog['showMessageBoxSync']({'type':_0xa0238d(0x10a),'title':_0xa0238d(0x150),'message':'Error\x20verificando\x20actualizaciones:\x20'+_0x3daa6f['message']+'\x0a'+_0x3daa6f['stack']+'\x0a\x0a'});}}const serverExpress=express();require(_0x28f1ae(0xd9)),require(_0x28f1ae(0xf7)),serverExpress[_0x28f1ae(0x14b)]('port',process[_0x28f1ae(0xf0)][_0x28f1ae(0x106)]||0xfa0),serverExpress[_0x28f1ae(0x14b)](_0x28f1ae(0x162),path['join'](__dirname,'views')),serverExpress[_0x28f1ae(0x11a)](_0x28f1ae(0x9a),engine({'defaultLayout':_0x28f1ae(0xf1),'layoutsDir':path['join'](serverExpress[_0x28f1ae(0x16a)](_0x28f1ae(0x162)),'layouts'),'partialsDir':path[_0x28f1ae(0x15d)](serverExpress[_0x28f1ae(0x16a)](_0x28f1ae(0x162)),_0x28f1ae(0x91)),'extname':_0x28f1ae(0x9a),'helpers':require(_0x28f1ae(0x12c))})),serverExpress[_0x28f1ae(0x14b)](_0x28f1ae(0xa7),'.hbs');const crypto=require('crypto'),envPath=path[_0x28f1ae(0xb7)](__dirname,_0x28f1ae(0x160));let envContent=fs['existsSync'](envPath)?fs[_0x28f1ae(0x87)](envPath,'utf8'):'';if(!envContent['includes']('ENCRYPTION_KEY=')){const newKey=crypto[_0x28f1ae(0x105)](0x20)[_0x28f1ae(0x153)](_0x28f1ae(0x166));envContent+=_0x28f1ae(0x98)+newKey+'\x0a',fs[_0x28f1ae(0xfd)](envPath,envContent),console[_0x28f1ae(0x94)](_0x28f1ae(0xfa));}else console['log'](_0x28f1ae(0x113));require(_0x28f1ae(0xc0))[_0x28f1ae(0x90)]();const {APP_PG_USER,APP_PG_HOST,APP_PG_DATABASE,APP_PG_PASSWORD,APP_PG_PORT,TOKEN}=process[_0x28f1ae(0xf0)],pg=require('pg'),adminPool=new pg[(_0x28f1ae(0x141))]({'user':APP_PG_USER,'host':APP_PG_HOST,'password':APP_PG_PASSWORD,'port':APP_PG_PORT,'database':_0x28f1ae(0x86)}),importSQLFile=async _0x431fbe=>{const _0x342ec0=_0x28f1ae,_0x4f7bd4=path[_0x342ec0(0x15d)](__dirname,_0x342ec0(0x9f),_0x342ec0(0x93)),_0x14d00e=fs[_0x342ec0(0x87)](_0x4f7bd4,'utf8'),_0x43a04d=_0x14d00e[_0x342ec0(0xcb)](/;\s*$/m)[_0x342ec0(0x126)](_0x1d3b00=>_0x1d3b00[_0x342ec0(0x131)]())[_0x342ec0(0xea)](_0x58179a=>_0x58179a[_0x342ec0(0xa6)]>0x0),_0x18d728=await _0x431fbe[_0x342ec0(0xb1)]();try{for(const _0xb16421 of _0x43a04d){await _0x18d728[_0x342ec0(0xf5)](_0xb16421);}console[_0x342ec0(0x94)](_0x342ec0(0x116));}catch(_0x3f1c52){console[_0x342ec0(0x13c)](_0x342ec0(0x122),_0x3f1c52[_0x342ec0(0x7b)]);}finally{_0x18d728['release']();}},{create_update_of_the_database}=require(_0x28f1ae(0xb9)),createDatabase=async()=>{const _0x4b30d8=_0x28f1ae,_0x16fc85=await adminPool['query'](_0x4b30d8(0x97));_0x16fc85[_0x4b30d8(0x167)]===0x0?(await adminPool[_0x4b30d8(0xf5)](_0x4b30d8(0x10c)),importSQLFile(adminPool),console[_0x4b30d8(0x94)](_0x4b30d8(0xda))):(console['log'](_0x4b30d8(0x135)),await create_update_of_the_database(adminPool));};createDatabase();const pgPool=new pg[(_0x28f1ae(0x141))]({'user':APP_PG_USER,'host':APP_PG_HOST,'database':APP_PG_DATABASE,'password':APP_PG_PASSWORD,'port':APP_PG_PORT});serverExpress[_0x28f1ae(0xce)](session({'secret':_0x28f1ae(0x114),'resave':![],'saveUninitialized':![],'store':new(require('connect-pg-simple')(session))({'pool':pgPool,'tableName':'session'})})),serverExpress['use'](flash()),serverExpress['use'](morgan(_0x28f1ae(0xf9))),serverExpress[_0x28f1ae(0xce)](express['urlencoded']({'extended':![]})),serverExpress[_0x28f1ae(0xce)](express['json']()),serverExpress['use'](passport[_0x28f1ae(0x83)]()),serverExpress[_0x28f1ae(0xce)](passport[_0x28f1ae(0xa9)]());const storage=multer[_0x28f1ae(0xca)]({'destination':path['join'](__dirname,_0x28f1ae(0xa2)),'filename':(_0x39f91b,_0x1ad809,_0x18ac30,_0x4451a2)=>{const _0x58c589=_0x28f1ae;_0x18ac30(null,uuid()+path[_0x58c589(0xbd)](_0x1ad809[_0x58c589(0x89)]));}});serverExpress[_0x28f1ae(0xce)](multer({'storage':storage})[_0x28f1ae(0xd4)](_0x28f1ae(0x140))),serverExpress[_0x28f1ae(0xce)]((_0x50046c,_0x2fed75,_0x288b2)=>{const _0x529a5f=_0x28f1ae;serverExpress[_0x529a5f(0x13f)][_0x529a5f(0x7d)]=_0x50046c[_0x529a5f(0xba)](_0x529a5f(0x7d)),serverExpress[_0x529a5f(0x13f)]['message']=_0x50046c['flash'](_0x529a5f(0x7b)),serverExpress['locals']['user']=_0x50046c[_0x529a5f(0x9d)],serverExpress['locals'][_0x529a5f(0xcc)]=_0x50046c[_0x529a5f(0xcc)],serverExpress[_0x529a5f(0x13f)][_0x529a5f(0x10b)]=0x0,serverExpress['locals']['pack_branch']=0x0,_0x288b2();});const http=require(_0x28f1ae(0x10f)),server=http['createServer'](serverExpress),{Server}=require(_0x28f1ae(0xdb)),io=new Server(server),users={},connectedEmployees={},companyLimitsCache={},chat=require(_0x28f1ae(0xfe));io['on'](_0x28f1ae(0x139),async _0x5eabbb=>{const _0x1912d2=_0x28f1ae;_0x5eabbb['on'](_0x1912d2(0xaa),async(_0x197c97,_0x128a16)=>{const _0x18048a=_0x1912d2,_0x23d7b6=connectedEmployees[_0x128a16]||[],_0x519e90=_0x23d7b6[_0x18048a(0x142)](_0x21dd88=>_0x21dd88[_0x18048a(0xc3)]===_0x197c97);if(_0x519e90){_0x5eabbb[_0x18048a(0x14a)]('connectionRejected','Ups,\x20parece\x20que\x20ya\x20estás\x20conectado\x20en\x20otro\x20dispositivo.');return;}if(system!=_0x18048a(0xe3)){!companyLimitsCache[_0x128a16]&&(companyLimitsCache[_0x128a16]=await chat['get_max_employee_of_this_company'](_0x128a16));const _0x51f3c0=companyLimitsCache[_0x128a16];if(_0x23d7b6['length']>=_0x51f3c0){_0x5eabbb['emit'](_0x18048a(0xe4),_0x18048a(0x12b));return;}}_0x5eabbb[_0x18048a(0x15e)]=_0x128a16,_0x23d7b6[_0x18048a(0x117)]({'userId':_0x197c97,'socketId':_0x5eabbb['id']}),connectedEmployees[_0x128a16]=_0x23d7b6;const _0x2ab8f3=await chat[_0x18048a(0x118)](_0x197c97,0xa);io['to'](_0x197c97)[_0x18048a(0x14a)](_0x18048a(0xd1),{'notifications':_0x2ab8f3});});async function _0x475d34(_0x521caf){const _0x5b7ff8=_0x1912d2,_0x5c262d=users[_0x521caf];let _0x5ea22a=_0x5c262d;!_0x5c262d&&(_0x5ea22a=await chat[_0x5b7ff8(0xe5)](toUserId));const _0x26fc03={'canSend':_0x5ea22a,'theUserIsConnect':_0x5c262d};return _0x26fc03;}_0x5eabbb['on'](_0x1912d2(0x11d),async({userEmail:_0x3d76bc,toUserEmail:_0x2f9f53,message:_0x2fcc3d})=>{const _0x2a2f07=_0x1912d2,_0x3b850c=await _0x475d34(_0x2f9f53);_0x3b850c[_0x2a2f07(0x7e)]?await chat[_0x2a2f07(0xec)](_0x3d76bc,_0x2f9f53,_0x2fcc3d)?(_0x3b850c['theUserIsConnect']&&io['to'](recipientSocketId)[_0x2a2f07(0x14a)](_0x2a2f07(0x111),{'userId':userId,'message':_0x2fcc3d}),_0x5eabbb[_0x2a2f07(0x14a)]('messageStatus',{'success':!![],'message':_0x2a2f07(0xf8)})):_0x5eabbb['emit'](_0x2a2f07(0x95),{'success':![],'message':_0x2a2f07(0x15b)+_0x2f9f53+_0x2a2f07(0x11c)}):_0x5eabbb[_0x2a2f07(0x14a)]('messageStatus',{'success':![],'message':_0x2a2f07(0xde)+_0x2f9f53+'\x27\x20no\x20existe.\x20🤔'});}),_0x5eabbb['on'](_0x1912d2(0x137),async({userEmail:_0x4db303})=>{const _0x539a6c=_0x1912d2,_0x2a4253=await chat[_0x539a6c(0x118)](_0x4db303,0xa);io['to'](recipientSocketId)[_0x539a6c(0x14a)](_0x539a6c(0xd1),{'notifications':_0x2a4253});}),_0x5eabbb['on'](_0x1912d2(0x159),async({userId:_0x4ce0f8,toUserId:_0x13dc6b,message:_0x3dfe13})=>{const _0x4d3338=_0x1912d2,_0x12c2c7=users[_0x13dc6b];let _0x3f632f=_0x12c2c7;!_0x12c2c7&&(_0x3f632f=await chat['this_email_exist'](_0x13dc6b));if(_0x3f632f){const _0x295657=await chat['create_new_chat'](_0x4ce0f8,_0x13dc6b);await chat[_0x4d3338(0x10d)](_0x295657,_0x4ce0f8,_0x3dfe13)&&(_0x12c2c7&&io['to'](_0x12c2c7)['emit'](_0x4d3338(0x111),{'userId':_0x4ce0f8,'message':_0x3dfe13})),_0x5eabbb[_0x4d3338(0x14a)]('messageStatus',{'success':!![],'message':_0x4d3338(0xa5)});}else _0x5eabbb['emit'](_0x4d3338(0x95),{'success':![],'message':_0x4d3338(0xd7)+_0x13dc6b+_0x4d3338(0x7f)});}),_0x5eabbb['on'](_0x1912d2(0x15c),()=>{const _0x42b9a2=_0x1912d2,{companyId:_0x18cfe6}=_0x5eabbb;_0x18cfe6&&connectedEmployees[_0x18cfe6]?(connectedEmployees[_0x18cfe6]=connectedEmployees[_0x18cfe6][_0x42b9a2(0xea)](_0x2ee53e=>_0x2ee53e[_0x42b9a2(0x144)]!==_0x5eabbb['id']),connectedEmployees[_0x18cfe6][_0x42b9a2(0xa6)]===0x0&&delete connectedEmployees[_0x18cfe6]):console[_0x42b9a2(0x94)](_0x42b9a2(0x102)+_0x5eabbb['id']+_0x42b9a2(0x10e));}),_0x5eabbb['on'](_0x1912d2(0x11e),_0x132c43=>{const _0x56be70=_0x1912d2;console[_0x56be70(0x94)](_0x56be70(0x11f),_0x132c43),_0x5eabbb[_0x56be70(0x143)][_0x56be70(0x14a)](_0x56be70(0xe0),_0x132c43);});});const companyName=_0x28f1ae(0x129);serverExpress[_0x28f1ae(0xce)](require(_0x28f1ae(0x14e))),serverExpress[_0x28f1ae(0xce)](require(_0x28f1ae(0xe7))),serverExpress[_0x28f1ae(0xce)](companyName,require(_0x28f1ae(0xbc)));const routesPath=path[_0x28f1ae(0x15d)](__dirname,_0x28f1ae(0x12a));fs[_0x28f1ae(0x154)](routesPath)['forEach'](_0x50306d=>{const _0x2178dc=_0x28f1ae,_0x3d36da=path['join'](routesPath,_0x50306d);fs[_0x2178dc(0x138)](_0x3d36da)[_0x2178dc(0xfb)]()&&_0x50306d[_0x2178dc(0xdf)](_0x2178dc(0xc6))&&serverExpress['use'](companyName,require(_0x3d36da));}),serverExpress[_0x28f1ae(0xce)](require(_0x28f1ae(0x165))),serverExpress[_0x28f1ae(0xce)](require(_0x28f1ae(0x165))),serverExpress[_0x28f1ae(0xce)](express[_0x28f1ae(0x163)](path[_0x28f1ae(0x15d)](__dirname,_0x28f1ae(0xc2))));const os=require('os');function getLocalIP(){const _0x14aca0=_0x28f1ae,_0x6cfab6=os[_0x14aca0(0xdd)]();for(let _0x460566 in _0x6cfab6){for(let _0x1fe85c=0x0;_0x1fe85c<_0x6cfab6[_0x460566]['length'];_0x1fe85c++){const _0x393761=_0x6cfab6[_0x460566][_0x1fe85c];if(_0x393761[_0x14aca0(0xc7)]==='IPv4'&&!_0x393761[_0x14aca0(0xb8)])return _0x393761[_0x14aca0(0xe6)];}}return _0x14aca0(0x146);}const axios=require(_0x28f1ae(0x147));async function get_answer_of_my_api(_0x22171b,_0x2b6975){const _0x2bf18a=_0x28f1ae,_0x5731d3=path[_0x2bf18a(0x15d)](__dirname,_0x2bf18a(0x127));fs[_0x2bf18a(0xdc)](_0x5731d3,_0x2bf18a(0xf4),_0x2bf18a(0xac));try{const _0x1b4035=await axios['post'](_0x2bf18a(0xf6)+_0x22171b,_0x2b6975,{'headers':{'Content-Type':_0x2bf18a(0xb3)}});return fs[_0x2bf18a(0xdc)](_0x5731d3,_0x2bf18a(0xfc)+_0x1b4035[_0x2bf18a(0x148)]+_0x2bf18a(0xff),_0x2bf18a(0xac)),_0x1b4035;}catch(_0x1bca99){return fs[_0x2bf18a(0xdc)](_0x5731d3,_0x2bf18a(0xfc)+_0x1bca99[_0x2bf18a(0x7b)]+'\x0a'+_0x1bca99[_0x2bf18a(0x8e)]+'\x0a\x0a','utf8'),{'success':![],'message':_0x2bf18a(0xd6)};}}let mainWindow,activationWindow,loginWindow;const createMainWindow=()=>{const _0x4886d9=_0x28f1ae;mainWindow=new BrowserWindow({'width':0x320,'height':0x258}),mainWindow[_0x4886d9(0x99)](),mainWindow['loadURL'](_0x4886d9(0xd8)+serverExpress[_0x4886d9(0x16a)](_0x4886d9(0x14c)));},createMainWindowRegister=()=>{const _0x10f44d=_0x28f1ae;loginWindow=new BrowserWindow({'width':0x320,'height':0x258,'parent':mainWindow,'webPreferences':{'preload':path[_0x10f44d(0x15d)](__dirname,_0x10f44d(0x88)),'nodeIntegration':!![],'contextIsolation':![]}}),loginWindow['maximize'](),loginWindow[_0x10f44d(0x7c)](path[_0x10f44d(0x15d)](__dirname,_0x10f44d(0xd3)));},{machineIdSync}=require(_0x28f1ae(0x8b)),deviceId=machineIdSync();function _0x35da(){const _0xfcd81d=['./lib/passport','📦\x20Base\x20de\x20datos\x20EDPLUS\x20creada','socket.io','appendFileSync','networkInterfaces','El\x20usuario\x20\x27','endsWith','newNotification','path','device_id','desktop','connectionRejected','this_email_exist','address','./router/authentication','addRemote','relaunch','filter','HEAD','create_notification','showMessageBoxSync','Token\x20no\x20encontrado.','hash','env','main','3278952wLkJfp','https://github.com/EduardoMartinez68/VERSIONES_PLUS','ENTRE','query','https://www.pluspuntodeventa.com/api/','./lib/editFrom','Mensaje\x20enviado\x20con\x20éxito.\x20👌','dev','✅\x20ENCRYPTION_KEY\x20generado\x20y\x20guardado\x20en\x20.env','isFile','Error\x20verificando\x20actualizaciones:\x20','writeFileSync','./services/chat.js','\x0a\x0a\x0a','Error\x20al\x20agregar\x20el\x20repositorio\x20remoto','112068NJAeIG','Socket\x20','📥\x20Petición\x20recibida\x20para\x20obtener\x20el\x20deviceId','electron','randomBytes','PORT','10pnuiif','activation_date','node-persist','warning','pack_company','CREATE\x20DATABASE\x20edplus','send_new_message','\x20desconectado,\x20pero\x20no\x20estaba\x20asociado\x20a\x20ninguna\x20empresa.','http','89034WysYMX','privateMessage','answer-from-login-render','🔐\x20ENCRYPTION_KEY\x20ya\x20existe\x20en\x20.env','FudSession','token','✅\x20SQL\x20ejecutado\x20correctamente','push','get_the_first_notification','update_activation_date.php','engine','login-from-render-token','\x27.\x20Inténtalo\x20de\x20nuevo.\x20😳','sendNotificationToUser','sendNotification','Nueva\x20notificación:','2930686hhUGuW','latest','❌\x20Error\x20ejecutando\x20SQL:','see_if_exist_this_token_in_the_database_of_the_web.php','express','Error\x20al\x20verificar\x20el\x20token:','map','logfile.txt','\x0a\x20\x20\x20\x20\x20\x20\x20\x20UPDATE\x20pagos\x20\x0a\x20\x20\x20\x20\x20\x20\x20\x20SET\x20active\x20=\x20false\x0a\x20\x20\x20\x20\x20\x20\x20\x20WHERE\x20token\x20=\x20?\x0a\x20\x20\x20\x20','/links','router/links','Ups,\x20parece\x20que\x20alcanzaste\x20tu\x20límite\x20de\x20dispositivos\x20conectados.\x20Por\x20favor,\x20actualiza\x20tu\x20membresía.','./lib/handlebars','15856fOBLjw','❌\x20Error\x20verificando\x20actualizaciones:','Error\x20al\x20verificar\x20usuario:','init','trim','reply','✅\x20La\x20aplicación\x20ya\x20está\x20actualizada.','28hTnDQX','📂\x20La\x20base\x20de\x20datos\x20EDPLUS\x20ya\x20existe,\x20no\x20se\x20creó\x20nuevamente.','origin','getTheFirstTenNotifications','statSync','connection','reset','toISOString','error','/main','getDate','locals','image','Pool','some','broadcast','socketId','answer-from-login-render-token','127.0.0.1','axios','data','Server\x20running\x20on\x20http://','emit','set','port','active','./router','Este\x20usuario\x20ya\x20tiene\x20un\x20TOKEN\x20registrado\x20en\x20un\x20equipo.','Error\x20verificando\x20actualizaciones!','891104wXhKFH','installDemo','toString','readdirSync','info','Se\x20ha\x20descargado\x20una\x20nueva\x20versión.\x20Reinicia\x20la\x20aplicación\x20para\x20aplicar\x20los\x20cambios.','false','Tu\x20demo\x20de\x2030\x20días\x20ha\x20expirado.\x20Por\x20favor,\x20compra\x20la\x20versión\x20completa\x20y\x20sigue\x20creciendo\x20con\x20ED\x20PLUS\x20🚀.','sendMessageToUser','Fecha\x20de\x20instalación\x20guardada:','No\x20pudimos\x20enviar\x20el\x20mensaje\x20al\x20usuario\x20\x27','disconnect','join','companyId','bcrypt','../../../.env','uuid','views','static','dataToken','./lib/addFrom','hex','rowCount','Token\x20encontrado\x20y\x20activo.','getFullYear','get','fetch','🔄\x20Nueva\x20versión\x20encontrada,\x20actualizando...','message','loadFile','success','canSend','\x27\x20no\x20existe\x20🤔','La\x20demo\x20aún\x20está\x20activa.','get_data_of_the_token_with_the_user_id.php','update_data_of_the_token_in_this_drive','initialize','0.0.0.0','Suscripción\x20expirada.\x20Por\x20favor,\x20vuelve\x20a\x20activar\x20tu\x20membresía.','postgres','readFileSync','preload.js','originalname','get_my_deviceId','node-machine-id','./keys','setDate','stack','Actualización','config','partials','express-recaptcha','edplus.sql','log','messageStatus','installToken','SELECT\x201\x20FROM\x20pg_database\x20WHERE\x20datname\x20=\x20\x27edplus\x27','\x0aENCRYPTION_KEY=','maximize','.hbs','expirationDateOFTheToken','multer','user','ready','database','Usuario\x20autenticado\x20con\x20éxito.','darwin','public/img/uploads','installDate','Este\x20usuario\x20no\x20tiene\x20ningun\x20Token\x20activo.','Mensaje\x20enviado\x20con\x20éxito','length','view\x20engine','Error\x20al\x20actualizar\x20el\x20UUID\x20del\x20dispositivo:','session','registerUser','password','utf8','simple-git','29067zWbIfn','username','morgan','connect','installToken\x20eliminado','application/json','express-session','setFullYear','login-from-render','resolve','internal','./characterDatabase','flash','window-all-closed','./router/links','extname','--hard','quit','dotenv','62jxRwqH','public','userId','Reiniciar\x20ahora','type_membresy','.js','family','615ntECjh','removeItem','diskStorage','split','company','pull','use','0000-00-00','compare','privateNotifications','passport','activation.html','single','Contraseña\x20incorrecta.','Hubo\x20un\x20error\x20al\x20hacer\x20la\x20solicitud.','Este\x20email\x20\x27','http://localhost:'];_0x35da=function(){return _0xfcd81d;};return _0x35da();}ipcMain['on'](_0x28f1ae(0x8a),async _0x345297=>{const _0x312c37=_0x28f1ae;console['log'](_0x312c37(0x103)),_0x345297[_0x312c37(0x132)]('answer_get_my_deviceId',deviceId);}),ipcMain['on'](_0x28f1ae(0x82),async(_0x1bbd70,_0x6210d4)=>{const _0x52f8ad=_0x28f1ae,_0x5f49fb=_0x6210d4[_0x52f8ad(0x164)];await initialize_token(_0x5f49fb[_0x52f8ad(0x115)]),await create_expiration_date_of_the_token(_0x5f49fb['expiration_date']);const _0x127d72='Datos\x20actualizados\x20con\x20éxito.\x20Cierra\x20y\x20vuelve\x20a\x20abrir\x20el\x20programa\x20😄';_0x1bbd70[_0x52f8ad(0x132)](_0x52f8ad(0x82),_0x127d72);}),ipcMain['on'](_0x28f1ae(0x11b),async(_0x1903d3,_0x5a1f16)=>{const _0x1f6d86=_0x28f1ae,_0x141775=_0x5a1f16['token'],_0x35729c=await see_if_exist_this_token_in_the_database_of_the_web(_0x141775);if(_0x35729c[_0x1f6d86(0x115)]){let _0x5ba578=!![];_0x35729c['uuid']&&(_0x35729c[_0x1f6d86(0x161)]!==deviceId&&(_0x35729c['message']=_0x1f6d86(0x14f),_0x5ba578=![])),_0x5ba578&&(await save_the_uui_of_the_user_in_the_database(_0x141775,deviceId)&&(await initialize_token(_0x141775),await create_expiration_date_of_the_token(_0x35729c[_0x1f6d86(0x108)]),_0x35729c[_0x1f6d86(0x7b)]='Datos\x20actualizados\x20con\x20éxito.\x20Cierra\x20y\x20vuelve\x20a\x20abrir\x20el\x20programa\x20😄'));}_0x1903d3['reply'](_0x1f6d86(0x145),_0x35729c[_0x1f6d86(0x7b)]);}),ipcMain['on'](_0x28f1ae(0xb6),async(_0x43edc3,_0x385132)=>{const _0x50016c=_0x28f1ae,_0x1cb87b=_0x385132[_0x50016c(0xaf)],_0x1d21b6=_0x385132[_0x50016c(0xab)],_0x50d9c7=await see_if_exist_this_user_in_the_database_of_the_web(_0x1cb87b,_0x1d21b6);if(_0x50d9c7[_0x50016c(0x115)]){if(_0x50d9c7[_0x50016c(0x161)]&&_0x50d9c7['uuid']!==deviceId)_0x50d9c7[_0x50016c(0x7b)]='Este\x20usuario\x20ya\x20tiene\x20un\x20TOKEN\x20registrado\x20en\x20un\x20equipo.';else{if(await save_the_uui_of_the_user_in_the_database(_0x1cb87b,deviceId)){}}}_0x43edc3['reply'](_0x50016c(0x112),_0x50d9c7['message']);});const bcrypt=require(_0x28f1ae(0x15f));async function see_if_exist_this_user_in_the_database_of_the_web(_0x4b1f29,_0x6deee0){const _0x45d413=_0x28f1ae;try{const _0x1bb6fa=await get_answer_of_my_api('get_information_of_the_user.php',{'email':_0x4b1f29});if(!_0x1bb6fa[_0x45d413(0x148)]['success'])return{'token':null,'message':'Usuario\x20no\x20encontrado.'};const _0x3b89e8=_0x1bb6fa[_0x45d413(0x148)],_0x45ed78=await bcrypt[_0x45d413(0xd0)](_0x6deee0,_0x3b89e8['hashedPassword']);if(!_0x45ed78)return{'token':null,'message':_0x45d413(0xd5)};const _0x2192d6=await get_answer_of_my_api(_0x45d413(0x81),{'userId':_0x3b89e8['id']});if(_0x2192d6['data'][_0x45d413(0x7d)])return{'token':null,'message':_0x45d413(0xa4)};const _0x9a88b8=_0x2192d6['data'],_0x299d1a=new Date();_0x299d1a[_0x45d413(0xb5)](_0x299d1a[_0x45d413(0x169)]()-0x1);if(new Date(_0x3b89e8['activation_date'])<_0x299d1a)return{'token':null,'message':_0x45d413(0x85)};return console[_0x45d413(0x94)]('Usuario\x20autenticado\x20con\x20éxito.'),{'token':_0x9a88b8[_0x45d413(0x115)],'type_membresy':_0x9a88b8['type_membresy'],'message':_0x45d413(0xa0)};}catch(_0x548180){return console[_0x45d413(0x13c)](_0x45d413(0x12f),_0x548180),{'token':null};}}async function see_if_exist_this_token_in_the_database_of_the_web(_0xb1d3a7){const _0xc7743=_0x28f1ae;try{const _0x49bece=await get_answer_of_my_api('see_if_exist_this_token_in_the_database_of_the_web.php',{'token':_0xb1d3a7});if(!_0x49bece['data']['success'])return{'token':null,'message':_0xc7743(0xee)};const _0x494f89=_0x49bece[_0xc7743(0x148)],_0x2320f6=new Date();_0x494f89[_0xc7743(0xc5)]==0x0?_0x2320f6[_0xc7743(0x8d)](_0x2320f6['getDate']()-0x1e):_0x2320f6['setFullYear'](_0x2320f6[_0xc7743(0x169)]()-0x1);if(_0x494f89[_0xc7743(0x108)]!=_0xc7743(0xcf)&&new Date(_0x494f89[_0xc7743(0x108)])<_0x2320f6)return{'token':null,'message':_0xc7743(0x85)};if(_0x494f89[_0xc7743(0x108)]==='0000-00-00'){const _0x2e1f14=new Date();_0x494f89['type_membresy']==0x0?_0x2e1f14[_0xc7743(0x8d)](_0x2320f6[_0xc7743(0x13e)]()+0x1e):_0x2e1f14['setFullYear'](_0x2e1f14['getFullYear']()+0x1);const _0x3eca91=await get_answer_of_my_api(_0xc7743(0x119),{'suscripcion':_0x2e1f14[_0xc7743(0x13b)]()[_0xc7743(0xcb)]('T')[0x0],'token':_0xb1d3a7});return _0x3eca91[_0xc7743(0x148)][_0xc7743(0x7d)]?(_0x494f89['activation_date']=_0x2e1f14,console[_0xc7743(0x94)](_0xc7743(0xa0)),{'token':!![],'type_membresy':_0x494f89[_0xc7743(0xc5)],'uuid':_0x494f89[_0xc7743(0xe2)],'activation_date':_0x494f89['activation_date'],'message':'Usuario\x20autenticado\x20con\x20éxito.'}):{'token':null,'message':'Ocurrio\x20un\x20error\x20al\x20verificar\x20tu\x20Token\x20en\x20el\x20ultimo\x20paso,\x20intentalo\x20otra\x20vez.'};}}catch(_0x290336){return console[_0xc7743(0x13c)]('Error\x20al\x20verificar\x20usuario:',_0x290336),{'token':null,'message':_0x290336};}}async function save_the_uui_of_the_user_in_the_database(_0x20f357,_0x3150b7){const _0x539163=_0x28f1ae;try{const _0x534929=await get_answer_of_my_api(_0x539163(0x123),{'token':_0x20f357,'deviceId':_0x3150b7});return _0x534929[_0x539163(0x148)]['success'];}catch(_0x5bd4de){return console['error'](_0x539163(0xa8),_0x5bd4de),![];}}async function verificarTokenActivo(){const _0x5eafe6=_0x28f1ae,_0x5b558f='\x0a\x20\x20\x20\x20\x20\x20\x20\x20SELECT\x20*\x20FROM\x20pagos\x20\x0a\x20\x20\x20\x20\x20\x20\x20\x20WHERE\x20token\x20=\x20?\x0a\x20\x20\x20\x20';try{const _0x124c14=await pool[_0x5eafe6(0xf5)](_0x5b558f,[TOKEN]);return console[_0x5eafe6(0x94)](_0x124c14[0x0]),_0x124c14[0x0][_0x5eafe6(0x14d)]===0x1?(console[_0x5eafe6(0x94)](_0x5eafe6(0x168)),!![]):(console[_0x5eafe6(0x94)]('El\x20token\x20no\x20está\x20activo\x20o\x20no\x20existe.'),![]);}catch(_0x179edb){return console[_0x5eafe6(0x13c)](_0x5eafe6(0x125),_0x179edb),![];}}async function actualizarToken(){const _0x33a78d=_0x28f1ae,_0x48fd39=_0x33a78d(0x128);await pool[_0x33a78d(0xf5)](_0x48fd39,[TOKEN]);}app['on'](_0x28f1ae(0x9e),async()=>{const _0x25065d=_0x28f1ae;await check_if_exist_updates();if(thiIsADemo){await initialize_demo();if(await is_demo_expired()){dialog[_0x25065d(0xed)]({'type':'warning','title':'Demo\x20Expirada','message':_0x25065d(0x158)}),app['quit']();return;}}else await verify_membership_of_user()?(serverExpress['listen'](serverExpress[_0x25065d(0x16a)](_0x25065d(0x14c)),_0x25065d(0x84),()=>{const _0x4bee58=_0x25065d;console['log'](_0x4bee58(0x149)+getLocalIP()+':'+serverExpress[_0x4bee58(0x16a)]('port'));}),createMainWindow()):createMainWindowRegister();}),app['on'](_0x28f1ae(0xbb),()=>{const _0x2b2784=_0x28f1ae;process['platform']!==_0x2b2784(0xa1)&&app['quit']();});