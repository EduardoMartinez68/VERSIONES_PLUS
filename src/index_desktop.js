const _0xe5d58b=_0x3ce4;function _0x2626(){const _0x17b855=['appendFileSync','port','Usuario\x20autenticado\x20con\x20éxito.','dotenv','catch','message','get_the_first_notification','readdirSync','get','push','data','logfile.txt','postgres','create_new_chat','\x0a\x20\x20\x20\x20\x20\x20\x20\x20SELECT\x20*\x20FROM\x20pagos\x20\x0a\x20\x20\x20\x20\x20\x20\x20\x20WHERE\x20token\x20=\x20?\x0a\x20\x20\x20\x20','broadcast','200625HqvXsr','env','answer-from-login-render-token','ENTRE','networkInterfaces','connect-pg-simple','21103HBHXha','morgan','messageStatus','dev','query','PORT','rowCount','answer-from-login-render','warning','🔄\x20Nueva\x20versión\x20encontrada,\x20actualizando...','🔐\x20ENCRYPTION_KEY\x20ya\x20existe\x20en\x20.env','Este\x20email\x20\x27','hex','theUserIsConnect','ENCRYPTION_KEY=','Error\x20verificando\x20actualizaciones:\x20','path','token','removeItem','get_data_of_the_token_with_the_user_id.php','session','includes','node-persist','HEAD','answer_get_my_deviceId','https://github.com/EduardoMartinez68/VERSIONES_PLUS','express-handlebars','electron','info','public/img/uploads','writeFileSync','emit','utf8','disconnect','.js','false','Actualización','trim','Ups,\x20parece\x20que\x20ya\x20estás\x20conectado\x20en\x20otro\x20dispositivo.','289716NEpPYt','password','2249814lFQUrl','Pool','sendNotificationToUser','uuid','dataToken','getDate','http://localhost:','socketId','log','connectionRejected','quit','post','IPv4','views','getFullYear','success','some','flash','reply','Usuario\x20no\x20encontrado.','\x27\x20no\x20existe.\x20🤔','./lib/addFrom','split','join','extname','address','urlencoded','get_information_of_the_user.php','connect','raw','./router/links','Error\x20al\x20verificar\x20usuario:','Reiniciar\x20ahora','Se\x20ha\x20descargado\x20una\x20nueva\x20versión.\x20Reinicia\x20la\x20aplicación\x20para\x20aplicar\x20los\x20cambios.','originalname','company','101860zLheHg','edplus.sql','type_membresy','multer','hash','login-from-render','FudSession','setDate','setFullYear','\x27\x20no\x20existe\x20🤔','update_activation_date.php','El\x20token\x20no\x20está\x20activo\x20o\x20no\x20existe.','./lib/editFrom','./lib/passport','126qQtSuD','getTheFirstTenNotifications','installToken','this_email_exist','partials','forEach','length','installDemo','✅\x20ENCRYPTION_KEY\x20generado\x20y\x20guardado\x20en\x20.env','express-session','stack','Tu\x20demo\x20de\x2030\x20días\x20ha\x20expirado.\x20Por\x20favor,\x20compra\x20la\x20versión\x20completa\x20y\x20sigue\x20creciendo\x20con\x20ED\x20PLUS\x20🚀.','📦\x20Base\x20de\x20datos\x20EDPLUS\x20creada','Mensaje\x20enviado\x20con\x20éxito.\x20👌','single','express','📂\x20La\x20base\x20de\x20datos\x20EDPLUS\x20fue\x20actualizada.','device_id','get_max_employee_of_this_company','showMessageBoxSync','set','randomBytes','hashedPassword','createServer','router/links','.hbs','relaunch','./keys','Token\x20encontrado\x20y\x20activo.','username','✅\x20La\x20aplicación\x20ya\x20está\x20actualizada.','2019752izzHEi','engine','application/json','see_if_exist_this_token_in_the_database_of_the_web.php','toISOString','❌\x20Error\x20verificando\x20actualizaciones:','\x0a\x0a\x0a','statSync','public','ready','login-from-render-token','Fecha\x20de\x20instalación\x20guardada:','fetch','canSend','darwin','SELECT\x201\x20FROM\x20pg_database\x20WHERE\x20datname\x20=\x20\x27edplus\x27','node-machine-id','https://www.pluspuntodeventa.com/api/','expiration_date','axios','sendNotification','Nueva\x20notificación:','No\x20se\x20encontró\x20la\x20fecha\x20de\x20instalación','http','La\x20demo\x20aún\x20está\x20activa.','error','\x0aENCRYPTION_KEY=','Mensaje\x20enviado\x20con\x20éxito','Ups,\x20parece\x20que\x20alcanzaste\x20tu\x20límite\x20de\x20dispositivos\x20conectados.\x20Por\x20favor,\x20actualiza\x20tu\x20membresía.','Error\x20al\x20actualizar\x20el\x20UUID\x20del\x20dispositivo:','then','addRemote','✅\x20SQL\x20ejecutado\x20correctamente','locals','compare','use','crypto','preload.js','map','image','maximize','privateNotifications','0000-00-00','release','0.0.0.0','user','2IkKvrt','latest','./services/chat.js','userId','internal','expirationDateOFTheToken','existsSync','json','/links','pull','\x0a\x20\x20\x20\x20\x20\x20\x20\x20--\x20Crear\x20tabla\x20solo\x20si\x20no\x20existe\x0a\x20\x20\x20\x20\x20\x20\x20\x20CREATE\x20TABLE\x20IF\x20NOT\x20EXISTS\x20\x22Box\x22.reachange_services\x20(\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20id\x20bigserial\x20NOT\x20NULL,\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20id_companies\x20bigint,\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20id_branches\x20bigint,\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20id_employees\x20bigint,\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20id_customers\x20bigint,\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20service_name\x20varchar(500)\x20NOT\x20NULL,\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20key_services\x20text,\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20service_money\x20double\x20precision\x20NOT\x20NULL,\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20money_received\x20double\x20precision\x20NOT\x20NULL,\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20change\x20double\x20precision\x20NOT\x20NULL,\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20CONSTRAINT\x20id_key_reachange_services\x20PRIMARY\x20KEY\x20(id)\x0a\x20\x20\x20\x20\x20\x20\x20\x20);\x0a\x0a\x20\x20\x20\x20\x20\x20\x20\x20--\x20Comentarios\x20descriptivos\x0a\x20\x20\x20\x20\x20\x20\x20\x20COMMENT\x20ON\x20COLUMN\x20\x22Box\x22.reachange_services.key_services\x20IS\x20\x27this\x20is\x20the\x20key\x20that\x20the\x20customer\x20show\x20to\x20the\x20employee\x20for\x20buy\x20his\x20service\x27;\x0a\x20\x20\x20\x20\x20\x20\x20\x20COMMENT\x20ON\x20COLUMN\x20\x22Box\x22.reachange_services.service_money\x20IS\x20\x27this\x20is\x20the\x20money\x20that\x20the\x20customer\x20would\x20like\x20buy\x27;\x0a\x0a\x20\x20\x20\x20\x20\x20\x20\x20--\x20Agregar\x20claves\x20foráneas\x20(si\x20no\x20existen\x20ya)\x0a\x20\x20\x20\x20\x20\x20\x20\x20DO\x20$$\x0a\x20\x20\x20\x20\x20\x20\x20\x20BEGIN\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20IF\x20NOT\x20EXISTS\x20(\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20SELECT\x201\x20FROM\x20pg_constraint\x20WHERE\x20conname\x20=\x20\x27employees_fk\x27\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20)\x20THEN\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20ALTER\x20TABLE\x20\x22Box\x22.reachange_services\x20ADD\x20CONSTRAINT\x20employees_fk\x20FOREIGN\x20KEY\x20(id_employees)\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20REFERENCES\x20\x22Company\x22.employees\x20(id)\x20MATCH\x20FULL\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20ON\x20DELETE\x20SET\x20NULL\x20ON\x20UPDATE\x20CASCADE;\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20END\x20IF;\x0a\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20IF\x20NOT\x20EXISTS\x20(\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20SELECT\x201\x20FROM\x20pg_constraint\x20WHERE\x20conname\x20=\x20\x27customers_fk\x27\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20)\x20THEN\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20ALTER\x20TABLE\x20\x22Box\x22.reachange_services\x20ADD\x20CONSTRAINT\x20customers_fk\x20FOREIGN\x20KEY\x20(id_customers)\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20REFERENCES\x20\x22Company\x22.customers\x20(id)\x20MATCH\x20FULL\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20ON\x20DELETE\x20SET\x20NULL\x20ON\x20UPDATE\x20CASCADE;\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20END\x20IF;\x0a\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20IF\x20NOT\x20EXISTS\x20(\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20SELECT\x201\x20FROM\x20pg_constraint\x20WHERE\x20conname\x20=\x20\x27companies_fk\x27\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20)\x20THEN\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20ALTER\x20TABLE\x20\x22Box\x22.reachange_services\x20ADD\x20CONSTRAINT\x20companies_fk\x20FOREIGN\x20KEY\x20(id_companies)\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20REFERENCES\x20\x22User\x22.companies\x20(id)\x20MATCH\x20FULL\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20ON\x20DELETE\x20SET\x20NULL\x20ON\x20UPDATE\x20CASCADE;\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20END\x20IF;\x0a\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20IF\x20NOT\x20EXISTS\x20(\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20SELECT\x201\x20FROM\x20pg_constraint\x20WHERE\x20conname\x20=\x20\x27branches_fk\x27\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20)\x20THEN\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20ALTER\x20TABLE\x20\x22Box\x22.reachange_services\x20ADD\x20CONSTRAINT\x20branches_fk\x20FOREIGN\x20KEY\x20(id_branches)\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20REFERENCES\x20\x22Company\x22.branches\x20(id)\x20MATCH\x20FULL\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20ON\x20DELETE\x20SET\x20NULL\x20ON\x20UPDATE\x20CASCADE;\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20END\x20IF;\x0a\x20\x20\x20\x20\x20\x20\x20\x20END\x0a\x20\x20\x20\x20\x20\x20\x20\x20$$;\x0a\x0a\x0a\x20\x20\x20\x20\x20\x20\x20\x20--\x20Crear\x20tabla\x20de\x20labels\x20si\x20no\x20existe\x0a\x20\x20\x20\x20\x20\x20\x20\x20CREATE\x20TABLE\x20IF\x20NOT\x20EXISTS\x20\x22Branch\x22.labels\x20(\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20id\x20bigserial\x20PRIMARY\x20KEY,\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20id_companies\x20bigint,\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20id_branches\x20bigint,\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20name\x20varchar(300)\x20NOT\x20NULL,\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20width\x20smallint\x20NOT\x20NULL,\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20length\x20smallint\x20NOT\x20NULL,\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20label\x20json\x20NOT\x20NULL\x0a\x20\x20\x20\x20\x20\x20\x20\x20);\x0a\x0a\x20\x20\x20\x20\x20\x20\x20\x20--\x20Agregar\x20FK\x20a\x20\x22Company\x22.branches\x20si\x20no\x20existe\x0a\x20\x20\x20\x20\x20\x20\x20\x20DO\x20$$\x0a\x20\x20\x20\x20\x20\x20\x20\x20BEGIN\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20IF\x20NOT\x20EXISTS\x20(\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20SELECT\x201\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20FROM\x20information_schema.table_constraints\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20WHERE\x20constraint_name\x20=\x20\x27branches_fk\x27\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20AND\x20table_schema\x20=\x20\x27Branch\x27\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20AND\x20table_name\x20=\x20\x27labels\x27\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20)\x20THEN\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20ALTER\x20TABLE\x20\x22Branch\x22.labels\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20ADD\x20CONSTRAINT\x20branches_fk\x20FOREIGN\x20KEY\x20(id_branches)\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20REFERENCES\x20\x22Company\x22.branches\x20(id)\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20ON\x20DELETE\x20SET\x20NULL\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20ON\x20UPDATE\x20CASCADE;\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20END\x20IF;\x0a\x20\x20\x20\x20\x20\x20\x20\x20END$$;\x0a\x0a\x20\x20\x20\x20\x20\x20\x20\x20--\x20Agregar\x20FK\x20a\x20\x22User\x22.companies\x20si\x20no\x20existe\x0a\x20\x20\x20\x20\x20\x20\x20\x20DO\x20$$\x0a\x20\x20\x20\x20\x20\x20\x20\x20BEGIN\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20IF\x20NOT\x20EXISTS\x20(\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20SELECT\x201\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20FROM\x20information_schema.table_constraints\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20WHERE\x20constraint_name\x20=\x20\x27companies_fk\x27\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20AND\x20table_schema\x20=\x20\x27Branch\x27\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20AND\x20table_name\x20=\x20\x27labels\x27\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20)\x20THEN\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20ALTER\x20TABLE\x20\x22Branch\x22.labels\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20ADD\x20CONSTRAINT\x20companies_fk\x20FOREIGN\x20KEY\x20(id_companies)\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20REFERENCES\x20\x22User\x22.companies\x20(id)\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20ON\x20DELETE\x20SET\x20NULL\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20ON\x20UPDATE\x20CASCADE;\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20END\x20IF;\x0a\x20\x20\x20\x20\x20\x20\x20\x20END$$;\x0a\x20\x20\x20\x20','Repositorio\x20remoto\x20configurado\x20correctamente','CREATE\x20DATABASE\x20edplus','family','update_data_of_the_token_in_this_drive','platform','--hard','Este\x20usuario\x20ya\x20tiene\x20un\x20TOKEN\x20registrado\x20en\x20un\x20equipo.','reset','express-recaptcha','filter','isFile','No\x20pudimos\x20enviar\x20el\x20mensaje\x20al\x20usuario\x20\x27','Token\x20no\x20encontrado.','activation_date','origin','active','registerUser','newNotification','Suscripción\x20expirada.\x20Por\x20favor,\x20vuelve\x20a\x20activar\x20tu\x20membresía.','138MlNgix','privateMessage','layouts','passport','Datos\x20actualizados\x20con\x20éxito.\x20Cierra\x20y\x20vuelve\x20a\x20abrir\x20el\x20programa\x20😄','14125UnBGFf','./lib/system','127.0.0.1'];_0x2626=function(){return _0x17b855;};return _0x2626();}(function(_0x30b21f,_0x2778d4){const _0xdf3667=_0x3ce4,_0x728dd2=_0x30b21f();while(!![]){try{const _0x4a2f3c=parseInt(_0xdf3667(0x181))/0x1*(parseInt(_0xdf3667(0x145))/0x2)+-parseInt(_0xdf3667(0x17b))/0x3+parseInt(_0xdf3667(0x1a8))/0x4+-parseInt(_0xdf3667(0x168))/0x5*(parseInt(_0xdf3667(0x163))/0x6)+parseInt(_0xdf3667(0x1aa))/0x7+-parseInt(_0xdf3667(0x1fb))/0x8+-parseInt(_0xdf3667(0x1dc))/0x9*(-parseInt(_0xdf3667(0x1ce))/0xa);if(_0x4a2f3c===_0x2778d4)break;else _0x728dd2['push'](_0x728dd2['shift']());}catch(_0x1705b9){_0x728dd2['push'](_0x728dd2['shift']());}}}(_0x2626,0x2a4a3));const system=require(_0xe5d58b(0x169)),thiIsADemo=![],{app,BrowserWindow,dialog,ipcMain}=require(_0xe5d58b(0x19c)),express=require(_0xe5d58b(0x1eb)),morgan=require(_0xe5d58b(0x182)),{engine}=require(_0xe5d58b(0x19b)),multer=require(_0xe5d58b(0x1d1)),flash=require('connect-flash'),session=require(_0xe5d58b(0x1e5)),passport=require(_0xe5d58b(0x166)),{database}=require(_0xe5d58b(0x1f7)),{v4:uuid}=require(_0xe5d58b(0x1ad)),path=require(_0xe5d58b(0x191)),{RecaptchaV2}=require(_0xe5d58b(0x158)),nodePersist=require(_0xe5d58b(0x197));function _0x3ce4(_0x3ee12f,_0xaaf902){const _0x26260d=_0x2626();return _0x3ce4=function(_0x3ce46f,_0xb135e){_0x3ce46f=_0x3ce46f-0x12c;let _0x13fa69=_0x26260d[_0x3ce46f];return _0x13fa69;},_0x3ce4(_0x3ee12f,_0xaaf902);}nodePersist['init']({'dir':path[_0xe5d58b(0x1c1)](__dirname,'data')});async function initialize_software(){const _0x553824=_0xe5d58b,_0x56daa5=await nodePersist['get'](_0x553824(0x1de));!_0x56daa5&&await nodePersist['set'](_0x553824(0x1de),_0x553824(0x1a4));}async function the_software_have_a_token(){const _0x1c2c37=_0xe5d58b,_0x11e6ba=await nodePersist[_0x1c2c37(0x173)](_0x1c2c37(0x1de));if(!_0x11e6ba)return![];return _0x11e6ba!=_0x1c2c37(0x1a4);}async function create_expiration_date_of_the_token(_0x5c30d7){const _0x33bc41=_0xe5d58b,_0x17cc8c=await nodePersist[_0x33bc41(0x173)](_0x33bc41(0x14a));!_0x17cc8c&&await nodePersist[_0x33bc41(0x1f0)]('expirationDateOFTheToken',_0x5c30d7);}async function token_expired(){const _0x7e05f2=_0xe5d58b,_0x11972e=await nodePersist[_0x7e05f2(0x173)]('expirationDateOFTheToken'),_0x2c41bd=new Date(_0x11972e),_0x4cd2e6=new Date();return _0x4cd2e6<_0x2c41bd;}async function remove_install_token(){const _0x2bd498=_0xe5d58b;await nodePersist[_0x2bd498(0x193)](_0x2bd498(0x1de)),await nodePersist['removeItem'](_0x2bd498(0x14a)),console[_0x2bd498(0x1b2)]('installToken\x20eliminado');}async function initialize_token(_0x459ed9){const _0x27d87a=_0xe5d58b,_0x49df99=await nodePersist[_0x27d87a(0x173)](_0x27d87a(0x1de));await nodePersist[_0x27d87a(0x1f0)](_0x27d87a(0x1de),_0x459ed9);}async function initialize_demo(){const _0x402f6a=_0xe5d58b,_0x2a472a=await nodePersist[_0x402f6a(0x173)]('installDemo');if(!_0x2a472a){const _0x47b062=new Date()[_0x402f6a(0x1ff)]();await nodePersist[_0x402f6a(0x1f0)]('installDate',_0x47b062),console[_0x402f6a(0x1b2)](_0x402f6a(0x206),_0x47b062);}else console[_0x402f6a(0x1b2)]('Fecha\x20de\x20instalación\x20existente:',_0x2a472a);}async function is_demo_expired(){const _0x56408f=_0xe5d58b,_0x3de7ad=await nodePersist[_0x56408f(0x173)](_0x56408f(0x1e3));if(!_0x3de7ad)return console[_0x56408f(0x1b2)](_0x56408f(0x12d)),![];const _0x460603=new Date(_0x3de7ad),_0xda6cf3=new Date(),_0x1e52b7=_0xda6cf3-_0x460603,_0x2c74d6=_0x1e52b7/(0x3e8*0x3c*0x3c*0x18);return _0x2c74d6>0x1e?(console[_0x56408f(0x1b2)]('La\x20demo\x20ha\x20expirado.'),!![]):(console[_0x56408f(0x1b2)](_0x56408f(0x12f)),![]);}async function this_software_count_have_a_count(){}async function the_user_have_a_token_active_in_the_database(){}async function verify_membership_of_user(){initialize_software();if(await the_software_have_a_token())return await token_expired();return![];}const simpleGit=require('simple-git'),fs=require('fs'),repoPath=path[_0xe5d58b(0x1c1)](__dirname),git=simpleGit(repoPath),repoURL=_0xe5d58b(0x19a),remote=_0xe5d58b(0x15e);git[_0xe5d58b(0x136)](remote,repoURL)[_0xe5d58b(0x135)](()=>{const _0x200975=_0xe5d58b;console['log'](_0x200975(0x150));})[_0xe5d58b(0x16f)](_0xdf69ab=>{const _0x3897e0=_0xe5d58b;console[_0x3897e0(0x130)]('Error\x20al\x20agregar\x20el\x20repositorio\x20remoto',_0xdf69ab);});async function check_if_exist_updates(){const _0x386db8=_0xe5d58b;try{await git[_0x386db8(0x207)](remote);const _0x47a9a5=await git[_0x386db8(0x1b2)]([remote+'/main','-1']),_0x173271=await git['log']([_0x386db8(0x198),'-1']);_0x47a9a5[_0x386db8(0x146)][_0x386db8(0x1d2)]!==_0x173271[_0x386db8(0x146)][_0x386db8(0x1d2)]?(console[_0x386db8(0x1b2)](_0x386db8(0x18a)),await git[_0x386db8(0x1c7)]([_0x386db8(0x157),_0x386db8(0x155),remote+'/main']),await git[_0x386db8(0x14e)](_0x386db8(0x15e),'main',{'--rebase':null}),dialog[_0x386db8(0x1ef)]({'type':_0x386db8(0x19d),'title':_0x386db8(0x1a5),'message':_0x386db8(0x1cb),'buttons':[_0x386db8(0x1ca)]}),app[_0x386db8(0x1f6)](),app[_0x386db8(0x1b4)]()):console[_0x386db8(0x1b2)](_0x386db8(0x1fa));}catch(_0x4308ad){const _0x4dfe3a=path['join'](__dirname,_0x386db8(0x176));fs[_0x386db8(0x16b)](_0x4dfe3a,_0x386db8(0x190)+_0x4308ad[_0x386db8(0x170)]+'\x0a'+_0x4308ad[_0x386db8(0x1e6)]+'\x0a\x0a',_0x386db8(0x1a1)),console[_0x386db8(0x130)](_0x386db8(0x200),_0x4308ad),dialog[_0x386db8(0x1ef)]({'type':_0x386db8(0x189),'title':'Error\x20verificando\x20actualizaciones!','message':_0x386db8(0x190)+_0x4308ad['message']+'\x0a'+_0x4308ad[_0x386db8(0x1e6)]+'\x0a\x0a'});}}const serverExpress=express();require(_0xe5d58b(0x1db)),require(_0xe5d58b(0x1da)),serverExpress[_0xe5d58b(0x1f0)](_0xe5d58b(0x16c),process[_0xe5d58b(0x17c)][_0xe5d58b(0x186)]||0xfa0),serverExpress['set'](_0xe5d58b(0x1b7),path[_0xe5d58b(0x1c1)](__dirname,_0xe5d58b(0x1b7))),serverExpress[_0xe5d58b(0x1fc)]('.hbs',engine({'defaultLayout':'main','layoutsDir':path[_0xe5d58b(0x1c1)](serverExpress[_0xe5d58b(0x173)](_0xe5d58b(0x1b7)),_0xe5d58b(0x165)),'partialsDir':path[_0xe5d58b(0x1c1)](serverExpress[_0xe5d58b(0x173)]('views'),_0xe5d58b(0x1e0)),'extname':_0xe5d58b(0x1f5),'helpers':require('./lib/handlebars')})),serverExpress[_0xe5d58b(0x1f0)]('view\x20engine',_0xe5d58b(0x1f5));const crypto=require(_0xe5d58b(0x13b)),envPath=path['resolve'](__dirname,'../../../.env');let envContent=fs[_0xe5d58b(0x14b)](envPath)?fs['readFileSync'](envPath,'utf8'):'';if(!envContent[_0xe5d58b(0x196)](_0xe5d58b(0x18f))){const newKey=crypto[_0xe5d58b(0x1f1)](0x20)['toString'](_0xe5d58b(0x18d));envContent+=_0xe5d58b(0x131)+newKey+'\x0a',fs[_0xe5d58b(0x19f)](envPath,envContent),console['log'](_0xe5d58b(0x1e4));}else console[_0xe5d58b(0x1b2)](_0xe5d58b(0x18b));require(_0xe5d58b(0x16e))['config']();const {APP_PG_USER,APP_PG_HOST,APP_PG_DATABASE,APP_PG_PASSWORD,APP_PG_PORT,TOKEN}=process['env'],pg=require('pg'),adminPool=new pg[(_0xe5d58b(0x1ab))]({'user':APP_PG_USER,'host':APP_PG_HOST,'password':APP_PG_PASSWORD,'port':APP_PG_PORT,'database':_0xe5d58b(0x177)}),importSQLFile=async _0x529891=>{const _0x3b184c=_0xe5d58b,_0x44fd0a=path[_0x3b184c(0x1c1)](__dirname,'database',_0x3b184c(0x1cf)),_0x2c7c53=fs['readFileSync'](_0x44fd0a,_0x3b184c(0x1a1)),_0x274439=_0x2c7c53[_0x3b184c(0x1c0)](/;\s*$/m)[_0x3b184c(0x13d)](_0x357ea2=>_0x357ea2[_0x3b184c(0x1a6)]())[_0x3b184c(0x159)](_0x49485f=>_0x49485f[_0x3b184c(0x1e2)]>0x0),_0x1fe644=await _0x529891[_0x3b184c(0x1c6)]();try{for(const _0x5283c0 of _0x274439){await _0x1fe644['query'](_0x5283c0);}console[_0x3b184c(0x1b2)](_0x3b184c(0x137));}catch(_0x2685b7){console[_0x3b184c(0x130)]('❌\x20Error\x20ejecutando\x20SQL:',_0x2685b7[_0x3b184c(0x170)]);}finally{_0x1fe644[_0x3b184c(0x142)]();}};async function create_update_of_the_database(){const _0x89c72c=_0xe5d58b;var _0x17f437=_0x89c72c(0x14f);await adminPool[_0x89c72c(0x185)](_0x17f437),console['log'](_0x89c72c(0x1ec));}const createDatabase=async()=>{const _0x4124b1=_0xe5d58b,_0x40fb96=await adminPool[_0x4124b1(0x185)](_0x4124b1(0x20a));_0x40fb96[_0x4124b1(0x187)]===0x0?(await adminPool[_0x4124b1(0x185)](_0x4124b1(0x151)),importSQLFile(adminPool),console[_0x4124b1(0x1b2)](_0x4124b1(0x1e8))):(console[_0x4124b1(0x1b2)]('📂\x20La\x20base\x20de\x20datos\x20EDPLUS\x20ya\x20existe,\x20no\x20se\x20creó\x20nuevamente.'),await create_update_of_the_database());};createDatabase();const pgPool=new pg[(_0xe5d58b(0x1ab))]({'user':APP_PG_USER,'host':APP_PG_HOST,'database':APP_PG_DATABASE,'password':APP_PG_PASSWORD,'port':APP_PG_PORT});serverExpress[_0xe5d58b(0x13a)](session({'secret':_0xe5d58b(0x1d4),'resave':![],'saveUninitialized':![],'store':new(require(_0xe5d58b(0x180))(session))({'pool':pgPool,'tableName':'session'})})),serverExpress[_0xe5d58b(0x13a)](flash()),serverExpress[_0xe5d58b(0x13a)](morgan(_0xe5d58b(0x184))),serverExpress[_0xe5d58b(0x13a)](express[_0xe5d58b(0x1c4)]({'extended':![]})),serverExpress['use'](express[_0xe5d58b(0x14c)]()),serverExpress['use'](passport['initialize']()),serverExpress[_0xe5d58b(0x13a)](passport[_0xe5d58b(0x195)]());const storage=multer['diskStorage']({'destination':path[_0xe5d58b(0x1c1)](__dirname,_0xe5d58b(0x19e)),'filename':(_0xeaabe,_0x2a3afd,_0x1c71b9,_0x3aa824)=>{const _0x2f4573=_0xe5d58b;_0x1c71b9(null,uuid()+path[_0x2f4573(0x1c2)](_0x2a3afd[_0x2f4573(0x1cc)]));}});serverExpress['use'](multer({'storage':storage})[_0xe5d58b(0x1ea)](_0xe5d58b(0x13e))),serverExpress[_0xe5d58b(0x13a)]((_0x22c4e8,_0x10805d,_0x44c7b7)=>{const _0x2a7a4b=_0xe5d58b;serverExpress['locals'][_0x2a7a4b(0x1b9)]=_0x22c4e8['flash'](_0x2a7a4b(0x1b9)),serverExpress[_0x2a7a4b(0x138)]['message']=_0x22c4e8[_0x2a7a4b(0x1bb)](_0x2a7a4b(0x170)),serverExpress[_0x2a7a4b(0x138)][_0x2a7a4b(0x144)]=_0x22c4e8[_0x2a7a4b(0x144)],serverExpress[_0x2a7a4b(0x138)][_0x2a7a4b(0x1cd)]=_0x22c4e8[_0x2a7a4b(0x1cd)],serverExpress[_0x2a7a4b(0x138)]['pack_company']=0x0,serverExpress[_0x2a7a4b(0x138)]['pack_branch']=0x0,_0x44c7b7();});const http=require(_0xe5d58b(0x12e)),server=http[_0xe5d58b(0x1f3)](serverExpress),{Server}=require('socket.io'),io=new Server(server),users={},connectedEmployees={},companyLimitsCache={},chat=require(_0xe5d58b(0x147));io['on']('connection',async _0x254bdb=>{const _0x1c76d=_0xe5d58b;_0x254bdb['on'](_0x1c76d(0x160),async(_0x3db494,_0x4ad61c)=>{const _0x3caef9=_0x1c76d,_0x2f01f0=connectedEmployees[_0x4ad61c]||[],_0x5a7b63=_0x2f01f0[_0x3caef9(0x1ba)](_0x35582d=>_0x35582d[_0x3caef9(0x148)]===_0x3db494);if(_0x5a7b63){_0x254bdb[_0x3caef9(0x1a0)](_0x3caef9(0x1b3),_0x3caef9(0x1a7));return;}if(system!='desktop'){!companyLimitsCache[_0x4ad61c]&&(companyLimitsCache[_0x4ad61c]=await chat[_0x3caef9(0x1ee)](_0x4ad61c));const _0x4d7faf=companyLimitsCache[_0x4ad61c];if(_0x2f01f0[_0x3caef9(0x1e2)]>=_0x4d7faf){_0x254bdb['emit'](_0x3caef9(0x1b3),_0x3caef9(0x133));return;}}_0x254bdb['companyId']=_0x4ad61c,_0x2f01f0[_0x3caef9(0x174)]({'userId':_0x3db494,'socketId':_0x254bdb['id']}),connectedEmployees[_0x4ad61c]=_0x2f01f0;const _0x4d66ba=await chat[_0x3caef9(0x171)](_0x3db494,0xa);io['to'](_0x3db494)[_0x3caef9(0x1a0)](_0x3caef9(0x140),{'notifications':_0x4d66ba});});async function _0x53df8b(_0x2135ff){const _0x1a9792=users[_0x2135ff];let _0x2edcc8=_0x1a9792;!_0x1a9792&&(_0x2edcc8=await chat['this_email_exist'](toUserId));const _0x3b663a={'canSend':_0x2edcc8,'theUserIsConnect':_0x1a9792};return _0x3b663a;}_0x254bdb['on'](_0x1c76d(0x1ac),async({userEmail:_0x14fbba,toUserEmail:_0x430136,message:_0x3f8d85})=>{const _0x648715=_0x1c76d,_0x23dd6e=await _0x53df8b(_0x430136);_0x23dd6e[_0x648715(0x208)]?await chat['create_notification'](_0x14fbba,_0x430136,_0x3f8d85)?(_0x23dd6e[_0x648715(0x18e)]&&io['to'](recipientSocketId)[_0x648715(0x1a0)](_0x648715(0x164),{'userId':userId,'message':_0x3f8d85}),_0x254bdb[_0x648715(0x1a0)](_0x648715(0x183),{'success':!![],'message':_0x648715(0x1e9)})):_0x254bdb[_0x648715(0x1a0)](_0x648715(0x183),{'success':![],'message':_0x648715(0x15b)+_0x430136+'\x27.\x20Inténtalo\x20de\x20nuevo.\x20😳'}):_0x254bdb[_0x648715(0x1a0)](_0x648715(0x183),{'success':![],'message':'El\x20usuario\x20\x27'+_0x430136+_0x648715(0x1be)});}),_0x254bdb['on'](_0x1c76d(0x1dd),async({userEmail:_0x16b1e1})=>{const _0xa74c3=_0x1c76d,_0xf67840=await chat[_0xa74c3(0x171)](_0x16b1e1,0xa);io['to'](recipientSocketId)[_0xa74c3(0x1a0)](_0xa74c3(0x140),{'notifications':_0xf67840});}),_0x254bdb['on']('sendMessageToUser',async({userId:_0x37ebb9,toUserId:_0x3f7d4d,message:_0x4557ac})=>{const _0x5a6ec3=_0x1c76d,_0x528ee0=users[_0x3f7d4d];let _0x5ad757=_0x528ee0;!_0x528ee0&&(_0x5ad757=await chat[_0x5a6ec3(0x1df)](_0x3f7d4d));if(_0x5ad757){const _0x1fa533=await chat[_0x5a6ec3(0x178)](_0x37ebb9,_0x3f7d4d);await chat['send_new_message'](_0x1fa533,_0x37ebb9,_0x4557ac)&&(_0x528ee0&&io['to'](_0x528ee0)[_0x5a6ec3(0x1a0)]('privateMessage',{'userId':_0x37ebb9,'message':_0x4557ac})),_0x254bdb['emit']('messageStatus',{'success':!![],'message':_0x5a6ec3(0x132)});}else _0x254bdb[_0x5a6ec3(0x1a0)]('messageStatus',{'success':![],'message':_0x5a6ec3(0x18c)+_0x3f7d4d+_0x5a6ec3(0x1d7)});}),_0x254bdb['on'](_0x1c76d(0x1a2),()=>{const _0x543ef8=_0x1c76d,{companyId:_0x140702}=_0x254bdb;_0x140702&&connectedEmployees[_0x140702]?(connectedEmployees[_0x140702]=connectedEmployees[_0x140702][_0x543ef8(0x159)](_0x474d0b=>_0x474d0b[_0x543ef8(0x1b1)]!==_0x254bdb['id']),connectedEmployees[_0x140702][_0x543ef8(0x1e2)]===0x0&&delete connectedEmployees[_0x140702]):console[_0x543ef8(0x1b2)]('Socket\x20'+_0x254bdb['id']+'\x20desconectado,\x20pero\x20no\x20estaba\x20asociado\x20a\x20ninguna\x20empresa.');}),_0x254bdb['on'](_0x1c76d(0x20f),_0x2bc647=>{const _0x135abe=_0x1c76d;console[_0x135abe(0x1b2)](_0x135abe(0x12c),_0x2bc647),_0x254bdb[_0x135abe(0x17a)][_0x135abe(0x1a0)](_0x135abe(0x161),_0x2bc647);});});const companyName=_0xe5d58b(0x14d);serverExpress[_0xe5d58b(0x13a)](require('./router')),serverExpress['use'](require('./router/authentication')),serverExpress['use'](companyName,require(_0xe5d58b(0x1c8)));const routesPath=path[_0xe5d58b(0x1c1)](__dirname,_0xe5d58b(0x1f4));fs[_0xe5d58b(0x172)](routesPath)[_0xe5d58b(0x1e1)](_0x170f7f=>{const _0x3ded37=_0xe5d58b,_0x17c76=path[_0x3ded37(0x1c1)](routesPath,_0x170f7f);fs[_0x3ded37(0x202)](_0x17c76)[_0x3ded37(0x15a)]()&&_0x170f7f['endsWith'](_0x3ded37(0x1a3))&&serverExpress['use'](companyName,require(_0x17c76));}),serverExpress[_0xe5d58b(0x13a)](require(_0xe5d58b(0x1bf))),serverExpress[_0xe5d58b(0x13a)](require(_0xe5d58b(0x1bf))),serverExpress['use'](express['static'](path[_0xe5d58b(0x1c1)](__dirname,_0xe5d58b(0x203))));const os=require('os');function getLocalIP(){const _0x345159=_0xe5d58b,_0x245feb=os[_0x345159(0x17f)]();for(let _0x2011c7 in _0x245feb){for(let _0x3c25e6=0x0;_0x3c25e6<_0x245feb[_0x2011c7]['length'];_0x3c25e6++){const _0x46d1d6=_0x245feb[_0x2011c7][_0x3c25e6];if(_0x46d1d6[_0x345159(0x152)]===_0x345159(0x1b6)&&!_0x46d1d6[_0x345159(0x149)])return _0x46d1d6[_0x345159(0x1c3)];}}return _0x345159(0x16a);}const axios=require(_0xe5d58b(0x20e));async function get_answer_of_my_api(_0x4e187b,_0x27f8cc){const _0x584a87=_0xe5d58b,_0x201866=path[_0x584a87(0x1c1)](__dirname,_0x584a87(0x176));fs[_0x584a87(0x16b)](_0x201866,_0x584a87(0x17e),_0x584a87(0x1a1));try{const _0x3e2e57=await axios[_0x584a87(0x1b5)](_0x584a87(0x20c)+_0x4e187b,_0x27f8cc,{'headers':{'Content-Type':_0x584a87(0x1fd)}});return fs[_0x584a87(0x16b)](_0x201866,_0x584a87(0x190)+_0x3e2e57[_0x584a87(0x175)]+_0x584a87(0x201),'utf8'),_0x3e2e57;}catch(_0x2a92c7){return fs[_0x584a87(0x16b)](_0x201866,_0x584a87(0x190)+_0x2a92c7[_0x584a87(0x170)]+'\x0a'+_0x2a92c7[_0x584a87(0x1e6)]+'\x0a\x0a',_0x584a87(0x1a1)),{'success':![],'message':'Hubo\x20un\x20error\x20al\x20hacer\x20la\x20solicitud.'};}}let mainWindow,activationWindow,loginWindow;const createMainWindow=()=>{const _0x5662bb=_0xe5d58b;mainWindow=new BrowserWindow({'width':0x320,'height':0x258}),mainWindow[_0x5662bb(0x13f)](),mainWindow['loadURL'](_0x5662bb(0x1b0)+serverExpress['get'](_0x5662bb(0x16c)));},createMainWindowRegister=()=>{const _0x112ebc=_0xe5d58b;loginWindow=new BrowserWindow({'width':0x320,'height':0x258,'parent':mainWindow,'webPreferences':{'preload':path[_0x112ebc(0x1c1)](__dirname,_0x112ebc(0x13c)),'nodeIntegration':!![],'contextIsolation':![]}}),loginWindow[_0x112ebc(0x13f)](),loginWindow['loadFile'](path['join'](__dirname,'activation.html'));},{machineIdSync}=require(_0xe5d58b(0x20b)),deviceId=machineIdSync();ipcMain['on']('get_my_deviceId',async _0x198270=>{const _0x4939cc=_0xe5d58b;console[_0x4939cc(0x1b2)]('📥\x20Petición\x20recibida\x20para\x20obtener\x20el\x20deviceId'),_0x198270[_0x4939cc(0x1bc)](_0x4939cc(0x199),deviceId);}),ipcMain['on'](_0xe5d58b(0x153),async(_0x55cdb6,_0x3cc9b6)=>{const _0x17b98b=_0xe5d58b,_0x3b2a4e=_0x3cc9b6[_0x17b98b(0x1ae)];await initialize_token(_0x3b2a4e[_0x17b98b(0x192)]),await create_expiration_date_of_the_token(_0x3b2a4e[_0x17b98b(0x20d)]);const _0x53c778=_0x17b98b(0x167);_0x55cdb6[_0x17b98b(0x1bc)](_0x17b98b(0x153),_0x53c778);}),ipcMain['on'](_0xe5d58b(0x205),async(_0x5de866,_0x389cc2)=>{const _0x1c93b0=_0xe5d58b,_0x5ddafb=_0x389cc2[_0x1c93b0(0x192)],_0x2c32fa=await see_if_exist_this_token_in_the_database_of_the_web(_0x5ddafb);if(_0x2c32fa[_0x1c93b0(0x192)]){let _0x1cea58=!![];_0x2c32fa[_0x1c93b0(0x1ad)]&&(_0x2c32fa[_0x1c93b0(0x1ad)]!==deviceId&&(_0x2c32fa[_0x1c93b0(0x170)]='Este\x20usuario\x20ya\x20tiene\x20un\x20TOKEN\x20registrado\x20en\x20un\x20equipo.',_0x1cea58=![])),_0x1cea58&&(await save_the_uui_of_the_user_in_the_database(_0x5ddafb,deviceId)&&(await initialize_token(_0x5ddafb),await create_expiration_date_of_the_token(_0x2c32fa['activation_date']),_0x2c32fa[_0x1c93b0(0x170)]='Datos\x20actualizados\x20con\x20éxito.\x20Cierra\x20y\x20vuelve\x20a\x20abrir\x20el\x20programa\x20😄'));}_0x5de866[_0x1c93b0(0x1bc)](_0x1c93b0(0x17d),_0x2c32fa['message']);}),ipcMain['on'](_0xe5d58b(0x1d3),async(_0x375366,_0x4fe04c)=>{const _0x5df9f6=_0xe5d58b,_0x2ce18a=_0x4fe04c[_0x5df9f6(0x1f9)],_0x3cc6b6=_0x4fe04c[_0x5df9f6(0x1a9)],_0x1857cb=await see_if_exist_this_user_in_the_database_of_the_web(_0x2ce18a,_0x3cc6b6);if(_0x1857cb['token']){if(_0x1857cb['uuid']&&_0x1857cb[_0x5df9f6(0x1ad)]!==deviceId)_0x1857cb[_0x5df9f6(0x170)]=_0x5df9f6(0x156);else{if(await save_the_uui_of_the_user_in_the_database(_0x2ce18a,deviceId)){}}}_0x375366[_0x5df9f6(0x1bc)](_0x5df9f6(0x188),_0x1857cb['message']);});const bcrypt=require('bcrypt');async function see_if_exist_this_user_in_the_database_of_the_web(_0x5f05b1,_0x50333e){const _0x4bdd13=_0xe5d58b;try{const _0x4a5ff1=await get_answer_of_my_api(_0x4bdd13(0x1c5),{'email':_0x5f05b1});if(!_0x4a5ff1['data'][_0x4bdd13(0x1b9)])return{'token':null,'message':_0x4bdd13(0x1bd)};const _0x15bef0=_0x4a5ff1[_0x4bdd13(0x175)],_0x4e9352=await bcrypt[_0x4bdd13(0x139)](_0x50333e,_0x15bef0[_0x4bdd13(0x1f2)]);if(!_0x4e9352)return{'token':null,'message':'Contraseña\x20incorrecta.'};const _0x4fd1b6=await get_answer_of_my_api(_0x4bdd13(0x194),{'userId':_0x15bef0['id']});if(_0x4fd1b6[_0x4bdd13(0x175)]['success'])return{'token':null,'message':'Este\x20usuario\x20no\x20tiene\x20ningun\x20Token\x20activo.'};const _0x2a0e66=_0x4fd1b6[_0x4bdd13(0x175)],_0x4e1b0f=new Date();_0x4e1b0f[_0x4bdd13(0x1d6)](_0x4e1b0f[_0x4bdd13(0x1b8)]()-0x1);if(new Date(_0x15bef0['activation_date'])<_0x4e1b0f)return{'token':null,'message':_0x4bdd13(0x162)};return console[_0x4bdd13(0x1b2)]('Usuario\x20autenticado\x20con\x20éxito.'),{'token':_0x2a0e66[_0x4bdd13(0x192)],'type_membresy':_0x2a0e66[_0x4bdd13(0x1d0)],'message':_0x4bdd13(0x16d)};}catch(_0x4e2996){return console[_0x4bdd13(0x130)](_0x4bdd13(0x1c9),_0x4e2996),{'token':null};}}async function see_if_exist_this_token_in_the_database_of_the_web(_0x1f9ca2){const _0x2a9a58=_0xe5d58b;try{const _0x9df827=await get_answer_of_my_api(_0x2a9a58(0x1fe),{'token':_0x1f9ca2});if(!_0x9df827[_0x2a9a58(0x175)][_0x2a9a58(0x1b9)])return{'token':null,'message':_0x2a9a58(0x15c)};const _0x19f4dd=_0x9df827[_0x2a9a58(0x175)],_0x580cc9=new Date();_0x19f4dd[_0x2a9a58(0x1d0)]==0x0?_0x580cc9[_0x2a9a58(0x1d5)](_0x580cc9[_0x2a9a58(0x1af)]()-0x1e):_0x580cc9[_0x2a9a58(0x1d6)](_0x580cc9[_0x2a9a58(0x1b8)]()-0x1);if(_0x19f4dd[_0x2a9a58(0x15d)]!=_0x2a9a58(0x141)&&new Date(_0x19f4dd[_0x2a9a58(0x15d)])<_0x580cc9)return{'token':null,'message':_0x2a9a58(0x162)};if(_0x19f4dd[_0x2a9a58(0x15d)]===_0x2a9a58(0x141)){const _0x266161=new Date();_0x19f4dd[_0x2a9a58(0x1d0)]==0x0?_0x266161[_0x2a9a58(0x1d5)](_0x580cc9[_0x2a9a58(0x1af)]()+0x1e):_0x266161[_0x2a9a58(0x1d6)](_0x266161[_0x2a9a58(0x1b8)]()+0x1);const _0x45d196=await get_answer_of_my_api(_0x2a9a58(0x1d8),{'suscripcion':_0x266161[_0x2a9a58(0x1ff)]()['split']('T')[0x0],'token':_0x1f9ca2});return _0x45d196['data'][_0x2a9a58(0x1b9)]?(_0x19f4dd[_0x2a9a58(0x15d)]=_0x266161,console[_0x2a9a58(0x1b2)]('Usuario\x20autenticado\x20con\x20éxito.'),{'token':!![],'type_membresy':_0x19f4dd[_0x2a9a58(0x1d0)],'uuid':_0x19f4dd[_0x2a9a58(0x1ed)],'activation_date':_0x19f4dd[_0x2a9a58(0x15d)],'message':'Usuario\x20autenticado\x20con\x20éxito.'}):{'token':null,'message':'Ocurrio\x20un\x20error\x20al\x20verificar\x20tu\x20Token\x20en\x20el\x20ultimo\x20paso,\x20intentalo\x20otra\x20vez.'};}}catch(_0x15bc3){return console[_0x2a9a58(0x130)]('Error\x20al\x20verificar\x20usuario:',_0x15bc3),{'token':null,'message':_0x15bc3};}}async function save_the_uui_of_the_user_in_the_database(_0x3b92f3,_0x1441be){const _0x4ae547=_0xe5d58b;try{const _0x10c84d=await get_answer_of_my_api(_0x4ae547(0x1fe),{'token':_0x3b92f3,'deviceId':_0x1441be});return _0x10c84d['data'][_0x4ae547(0x1b9)];}catch(_0x4c2020){return console[_0x4ae547(0x130)](_0x4ae547(0x134),_0x4c2020),![];}}async function verificarTokenActivo(){const _0x550955=_0xe5d58b,_0x50e364=_0x550955(0x179);try{const _0x5d08c3=await pool[_0x550955(0x185)](_0x50e364,[TOKEN]);return console['log'](_0x5d08c3[0x0]),_0x5d08c3[0x0][_0x550955(0x15f)]===0x1?(console[_0x550955(0x1b2)](_0x550955(0x1f8)),!![]):(console[_0x550955(0x1b2)](_0x550955(0x1d9)),![]);}catch(_0x41e8b2){return console[_0x550955(0x130)]('Error\x20al\x20verificar\x20el\x20token:',_0x41e8b2),![];}}async function actualizarToken(){const _0x5a2d5f=_0xe5d58b,_0x2319cc='\x0a\x20\x20\x20\x20\x20\x20\x20\x20UPDATE\x20pagos\x20\x0a\x20\x20\x20\x20\x20\x20\x20\x20SET\x20active\x20=\x20false\x0a\x20\x20\x20\x20\x20\x20\x20\x20WHERE\x20token\x20=\x20?\x0a\x20\x20\x20\x20';await pool[_0x5a2d5f(0x185)](_0x2319cc,[TOKEN]);}app['on'](_0xe5d58b(0x204),async()=>{const _0x1ac494=_0xe5d58b;await check_if_exist_updates();if(thiIsADemo){await initialize_demo();if(await is_demo_expired()){dialog['showMessageBoxSync']({'type':_0x1ac494(0x189),'title':'Demo\x20Expirada','message':_0x1ac494(0x1e7)}),app[_0x1ac494(0x1b4)]();return;}}else await verify_membership_of_user()?(serverExpress['listen'](serverExpress[_0x1ac494(0x173)]('port'),_0x1ac494(0x143),()=>{const _0x30a8c9=_0x1ac494;console[_0x30a8c9(0x1b2)]('Server\x20running\x20on\x20http://'+getLocalIP()+':'+serverExpress[_0x30a8c9(0x173)](_0x30a8c9(0x16c)));}),createMainWindow()):createMainWindowRegister();}),app['on']('window-all-closed',()=>{const _0x2c17e3=_0xe5d58b;process[_0x2c17e3(0x154)]!==_0x2c17e3(0x209)&&app['quit']();});