const _0x3444b7=_0x40f3;(function(_0x5af5d8,_0x5699d9){const _0x31ba18=_0x40f3,_0x398b58=_0x5af5d8();while(!![]){try{const _0x3dc48a=parseInt(_0x31ba18(0x16b))/0x1*(parseInt(_0x31ba18(0x1a6))/0x2)+-parseInt(_0x31ba18(0x1b3))/0x3+-parseInt(_0x31ba18(0x127))/0x4*(-parseInt(_0x31ba18(0x178))/0x5)+-parseInt(_0x31ba18(0x171))/0x6+parseInt(_0x31ba18(0x1b9))/0x7*(parseInt(_0x31ba18(0x1ce))/0x8)+-parseInt(_0x31ba18(0x17a))/0x9+parseInt(_0x31ba18(0x116))/0xa;if(_0x3dc48a===_0x5699d9)break;else _0x398b58['push'](_0x398b58['shift']());}catch(_0x3d1534){_0x398b58['push'](_0x398b58['shift']());}}}(_0x514f,0xa2dfd));const system=require(_0x3444b7(0x10c)),thiIsADemo=![],{app,BrowserWindow,dialog,ipcMain}=require(_0x3444b7(0x16c)),express=require(_0x3444b7(0x15b)),morgan=require(_0x3444b7(0x139)),{engine}=require('express-handlebars'),multer=require('multer'),flash=require(_0x3444b7(0x1c3)),session=require(_0x3444b7(0x1bd)),passport=require(_0x3444b7(0x1d7)),{database}=require(_0x3444b7(0x13b)),{v4:uuid}=require(_0x3444b7(0x133)),path=require(_0x3444b7(0x132)),{RecaptchaV2}=require('express-recaptcha'),nodePersist=require(_0x3444b7(0x14d));nodePersist[_0x3444b7(0x1e1)]({'dir':path['join'](__dirname,_0x3444b7(0x169))});async function initialize_software(){const _0x505bb5=_0x3444b7,_0x5bbb33=await nodePersist[_0x505bb5(0x1ba)](_0x505bb5(0x16e));!_0x5bbb33&&await nodePersist['set'](_0x505bb5(0x16e),_0x505bb5(0x1b6));}async function the_software_have_a_token(){const _0x43ea4d=_0x3444b7,_0x1ce68b=await nodePersist[_0x43ea4d(0x1ba)](_0x43ea4d(0x16e));if(!_0x1ce68b)return![];return _0x1ce68b!=_0x43ea4d(0x1b6);}function _0x40f3(_0x2f8595,_0x4fa9a3){const _0x514f91=_0x514f();return _0x40f3=function(_0x40f3a0,_0x210a1f){_0x40f3a0=_0x40f3a0-0x10b;let _0x5cef87=_0x514f91[_0x40f3a0];return _0x5cef87;},_0x40f3(_0x2f8595,_0x4fa9a3);}async function create_expiration_date_of_the_token(_0x54ee55){const _0x18b7f1=_0x3444b7,_0x28b2bd=await nodePersist['get'](_0x18b7f1(0x111));!_0x28b2bd&&await nodePersist[_0x18b7f1(0x12e)]('expirationDateOFTheToken',_0x54ee55);}async function token_expired(){const _0x3e4cd9=_0x3444b7,_0x559f01=await nodePersist[_0x3e4cd9(0x1ba)]('expirationDateOFTheToken'),_0x196155=new Date(_0x559f01),_0x1234bf=new Date();return _0x1234bf<_0x196155;}async function remove_install_token(){const _0x311533=_0x3444b7;await nodePersist[_0x311533(0x15f)](_0x311533(0x16e)),await nodePersist[_0x311533(0x15f)]('expirationDateOFTheToken'),console[_0x311533(0x15e)]('installToken\x20eliminado');}async function initialize_token(_0x5548e3){const _0x1e2136=_0x3444b7,_0xe367dd=await nodePersist[_0x1e2136(0x1ba)](_0x1e2136(0x16e));await nodePersist[_0x1e2136(0x12e)](_0x1e2136(0x16e),_0x5548e3);}async function initialize_demo(){const _0xfe9e35=_0x3444b7,_0x4956da=await nodePersist[_0xfe9e35(0x1ba)]('installDemo');if(!_0x4956da){const _0x2b873c=new Date()[_0xfe9e35(0x150)]();await nodePersist['set']('installDate',_0x2b873c),console[_0xfe9e35(0x15e)]('Fecha\x20de\x20instalación\x20guardada:',_0x2b873c);}else console[_0xfe9e35(0x15e)](_0xfe9e35(0x177),_0x4956da);}async function is_demo_expired(){const _0x5c4cff=_0x3444b7,_0x16ddc4=await nodePersist[_0x5c4cff(0x1ba)](_0x5c4cff(0x196));if(!_0x16ddc4)return console[_0x5c4cff(0x15e)]('No\x20se\x20encontró\x20la\x20fecha\x20de\x20instalación'),![];const _0x62c390=new Date(_0x16ddc4),_0x2b8b8b=new Date(),_0x385d5a=_0x2b8b8b-_0x62c390,_0x42831a=_0x385d5a/(0x3e8*0x3c*0x3c*0x18);return _0x42831a>0x1e?(console[_0x5c4cff(0x15e)]('La\x20demo\x20ha\x20expirado.'),!![]):(console[_0x5c4cff(0x15e)](_0x5c4cff(0x11c)),![]);}async function this_software_count_have_a_count(){}async function the_user_have_a_token_active_in_the_database(){}async function verify_membership_of_user(){initialize_software();if(await the_software_have_a_token())return await token_expired();return![];}const simpleGit=require(_0x3444b7(0x1c5)),fs=require('fs'),repoPath=path['join'](__dirname),git=simpleGit(repoPath),repoURL='https://github.com/EduardoMartinez68/VERSIONES_PLUS',remote=_0x3444b7(0x13e);git[_0x3444b7(0x191)](remote,repoURL)[_0x3444b7(0x1bb)](()=>{const _0x3ae436=_0x3444b7;console['log'](_0x3ae436(0x1dc));})['catch'](_0x1bb824=>{const _0x427955=_0x3444b7;console[_0x427955(0x1ca)]('Error\x20al\x20agregar\x20el\x20repositorio\x20remoto',_0x1bb824);});async function check_if_exist_updates(){const _0x44d71d=_0x3444b7;try{await git['fetch'](remote);const _0x2b512c=await git[_0x44d71d(0x15e)]([remote+'/main','-1']),_0x4bf8d=await git[_0x44d71d(0x15e)]([_0x44d71d(0x170),'-1']);_0x2b512c[_0x44d71d(0x130)][_0x44d71d(0x17f)]!==_0x4bf8d['latest'][_0x44d71d(0x17f)]?(console[_0x44d71d(0x15e)](_0x44d71d(0x1d8)),await git[_0x44d71d(0x18b)](['reset',_0x44d71d(0x180),remote+'/main']),await git[_0x44d71d(0x1dd)](_0x44d71d(0x13e),_0x44d71d(0x152),{'--rebase':null}),dialog[_0x44d71d(0x1d3)]({'type':_0x44d71d(0x1bc),'title':_0x44d71d(0x148),'message':_0x44d71d(0x10e),'buttons':['Reiniciar\x20ahora']}),app['relaunch'](),app[_0x44d71d(0x1cf)]()):console[_0x44d71d(0x15e)](_0x44d71d(0x1c6));}catch(_0x11895f){const _0x2fc19d=path[_0x44d71d(0x1b2)](__dirname,'logfile.txt');fs[_0x44d71d(0x198)](_0x2fc19d,_0x44d71d(0x172)+_0x11895f['message']+'\x0a'+_0x11895f['stack']+'\x0a\x0a',_0x44d71d(0x1a8)),console[_0x44d71d(0x1ca)](_0x44d71d(0x14b),_0x11895f),dialog[_0x44d71d(0x1d3)]({'type':_0x44d71d(0x1d5),'title':'Error\x20verificando\x20actualizaciones!','message':_0x44d71d(0x172)+_0x11895f[_0x44d71d(0x1a1)]+'\x0a'+_0x11895f[_0x44d71d(0x11a)]+'\x0a\x0a'});}}const serverExpress=express();require('./lib/passport'),require('./lib/editFrom'),serverExpress[_0x3444b7(0x12e)](_0x3444b7(0x1d4),process['env'][_0x3444b7(0x18c)]||0xfa0),serverExpress[_0x3444b7(0x12e)](_0x3444b7(0x1b4),path[_0x3444b7(0x1b2)](__dirname,'views')),serverExpress[_0x3444b7(0x1df)]('.hbs',engine({'defaultLayout':_0x3444b7(0x152),'layoutsDir':path[_0x3444b7(0x1b2)](serverExpress[_0x3444b7(0x1ba)](_0x3444b7(0x1b4)),_0x3444b7(0x140)),'partialsDir':path[_0x3444b7(0x1b2)](serverExpress[_0x3444b7(0x1ba)]('views'),'partials'),'extname':_0x3444b7(0x182),'helpers':require(_0x3444b7(0x17e))})),serverExpress['set'](_0x3444b7(0x157),_0x3444b7(0x182)),require(_0x3444b7(0x161))[_0x3444b7(0x1cd)]();const {APP_PG_USER,APP_PG_HOST,APP_PG_DATABASE,APP_PG_PASSWORD,APP_PG_PORT,TOKEN}=process['env'],pg=require('pg'),adminPool=new pg['Pool']({'user':APP_PG_USER,'host':APP_PG_HOST,'password':APP_PG_PASSWORD,'port':APP_PG_PORT,'database':_0x3444b7(0x166)}),importSQLFile=async _0xe9494e=>{const _0x5a9c6d=_0x3444b7,_0x43b7b4=path[_0x5a9c6d(0x1b2)](__dirname,_0x5a9c6d(0x165),_0x5a9c6d(0x1b5)),_0x236773=fs[_0x5a9c6d(0x183)](_0x43b7b4,'utf8'),_0x70dd18=_0x236773['split'](/;\s*$/m)[_0x5a9c6d(0x15a)](_0x2afc49=>_0x2afc49[_0x5a9c6d(0x1c9)]())['filter'](_0x4806da=>_0x4806da[_0x5a9c6d(0x1a9)]>0x0),_0x12a03c=await _0xe9494e[_0x5a9c6d(0x1d2)]();try{for(const _0x4bea3d of _0x70dd18){await _0x12a03c[_0x5a9c6d(0x179)](_0x4bea3d);}console['log']('✅\x20SQL\x20ejecutado\x20correctamente');}catch(_0x464c99){console[_0x5a9c6d(0x1ca)](_0x5a9c6d(0x1e2),_0x464c99[_0x5a9c6d(0x1a1)]);}finally{_0x12a03c[_0x5a9c6d(0x13a)]();}};async function create_update_of_the_database(){const _0x50781c=_0x3444b7;var _0x3e6ad5='\x0a\x20\x20\x20\x20\x20\x20\x20\x20--\x20Crear\x20tabla\x20solo\x20si\x20no\x20existe\x0a\x20\x20\x20\x20\x20\x20\x20\x20CREATE\x20TABLE\x20IF\x20NOT\x20EXISTS\x20\x22Box\x22.reachange_services\x20(\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20id\x20bigserial\x20NOT\x20NULL,\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20id_companies\x20bigint,\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20id_branches\x20bigint,\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20id_employees\x20bigint,\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20id_customers\x20bigint,\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20service_name\x20varchar(500)\x20NOT\x20NULL,\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20key_services\x20text,\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20service_money\x20double\x20precision\x20NOT\x20NULL,\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20money_received\x20double\x20precision\x20NOT\x20NULL,\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20change\x20double\x20precision\x20NOT\x20NULL,\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20CONSTRAINT\x20id_key_reachange_services\x20PRIMARY\x20KEY\x20(id)\x0a\x20\x20\x20\x20\x20\x20\x20\x20);\x0a\x0a\x20\x20\x20\x20\x20\x20\x20\x20--\x20Comentarios\x20descriptivos\x0a\x20\x20\x20\x20\x20\x20\x20\x20COMMENT\x20ON\x20COLUMN\x20\x22Box\x22.reachange_services.key_services\x20IS\x20\x27this\x20is\x20the\x20key\x20that\x20the\x20customer\x20show\x20to\x20the\x20employee\x20for\x20buy\x20his\x20service\x27;\x0a\x20\x20\x20\x20\x20\x20\x20\x20COMMENT\x20ON\x20COLUMN\x20\x22Box\x22.reachange_services.service_money\x20IS\x20\x27this\x20is\x20the\x20money\x20that\x20the\x20customer\x20would\x20like\x20buy\x27;\x0a\x0a\x20\x20\x20\x20\x20\x20\x20\x20--\x20Agregar\x20claves\x20foráneas\x20(si\x20no\x20existen\x20ya)\x0a\x20\x20\x20\x20\x20\x20\x20\x20DO\x20$$\x0a\x20\x20\x20\x20\x20\x20\x20\x20BEGIN\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20IF\x20NOT\x20EXISTS\x20(\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20SELECT\x201\x20FROM\x20pg_constraint\x20WHERE\x20conname\x20=\x20\x27employees_fk\x27\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20)\x20THEN\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20ALTER\x20TABLE\x20\x22Box\x22.reachange_services\x20ADD\x20CONSTRAINT\x20employees_fk\x20FOREIGN\x20KEY\x20(id_employees)\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20REFERENCES\x20\x22Company\x22.employees\x20(id)\x20MATCH\x20FULL\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20ON\x20DELETE\x20SET\x20NULL\x20ON\x20UPDATE\x20CASCADE;\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20END\x20IF;\x0a\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20IF\x20NOT\x20EXISTS\x20(\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20SELECT\x201\x20FROM\x20pg_constraint\x20WHERE\x20conname\x20=\x20\x27customers_fk\x27\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20)\x20THEN\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20ALTER\x20TABLE\x20\x22Box\x22.reachange_services\x20ADD\x20CONSTRAINT\x20customers_fk\x20FOREIGN\x20KEY\x20(id_customers)\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20REFERENCES\x20\x22Company\x22.customers\x20(id)\x20MATCH\x20FULL\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20ON\x20DELETE\x20SET\x20NULL\x20ON\x20UPDATE\x20CASCADE;\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20END\x20IF;\x0a\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20IF\x20NOT\x20EXISTS\x20(\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20SELECT\x201\x20FROM\x20pg_constraint\x20WHERE\x20conname\x20=\x20\x27companies_fk\x27\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20)\x20THEN\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20ALTER\x20TABLE\x20\x22Box\x22.reachange_services\x20ADD\x20CONSTRAINT\x20companies_fk\x20FOREIGN\x20KEY\x20(id_companies)\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20REFERENCES\x20\x22User\x22.companies\x20(id)\x20MATCH\x20FULL\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20ON\x20DELETE\x20SET\x20NULL\x20ON\x20UPDATE\x20CASCADE;\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20END\x20IF;\x0a\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20IF\x20NOT\x20EXISTS\x20(\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20SELECT\x201\x20FROM\x20pg_constraint\x20WHERE\x20conname\x20=\x20\x27branches_fk\x27\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20)\x20THEN\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20ALTER\x20TABLE\x20\x22Box\x22.reachange_services\x20ADD\x20CONSTRAINT\x20branches_fk\x20FOREIGN\x20KEY\x20(id_branches)\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20REFERENCES\x20\x22Company\x22.branches\x20(id)\x20MATCH\x20FULL\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20ON\x20DELETE\x20SET\x20NULL\x20ON\x20UPDATE\x20CASCADE;\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20END\x20IF;\x0a\x20\x20\x20\x20\x20\x20\x20\x20END\x0a\x20\x20\x20\x20\x20\x20\x20\x20$$;\x0a\x0a\x20\x20\x20\x20';await adminPool[_0x50781c(0x179)](_0x3e6ad5),console[_0x50781c(0x15e)](_0x50781c(0x164));}const createDatabase=async()=>{const _0x2f9cc7=_0x3444b7,_0x6fb85d=await adminPool[_0x2f9cc7(0x179)]('SELECT\x201\x20FROM\x20pg_database\x20WHERE\x20datname\x20=\x20\x27edplus\x27');_0x6fb85d[_0x2f9cc7(0x187)]===0x0?(await adminPool[_0x2f9cc7(0x179)](_0x2f9cc7(0x11e)),importSQLFile(adminPool),console['log'](_0x2f9cc7(0x1b0))):(console[_0x2f9cc7(0x15e)]('📂\x20La\x20base\x20de\x20datos\x20EDPLUS\x20ya\x20existe,\x20no\x20se\x20creó\x20nuevamente.'),await create_update_of_the_database());};createDatabase();const pgPool=new pg[(_0x3444b7(0x145))]({'user':APP_PG_USER,'host':APP_PG_HOST,'database':APP_PG_DATABASE,'password':APP_PG_PASSWORD,'port':APP_PG_PORT});serverExpress['use'](session({'secret':_0x3444b7(0x1af),'resave':![],'saveUninitialized':![],'store':new(require(_0x3444b7(0x1db))(session))({'pool':pgPool,'tableName':_0x3444b7(0x186)})})),serverExpress[_0x3444b7(0x134)](flash()),serverExpress[_0x3444b7(0x134)](morgan(_0x3444b7(0x146))),serverExpress['use'](express[_0x3444b7(0x163)]({'extended':![]})),serverExpress[_0x3444b7(0x134)](express[_0x3444b7(0x114)]()),serverExpress[_0x3444b7(0x134)](passport['initialize']()),serverExpress[_0x3444b7(0x134)](passport['session']());const storage=multer['diskStorage']({'destination':path[_0x3444b7(0x1b2)](__dirname,_0x3444b7(0x1a2)),'filename':(_0x780614,_0x44530b,_0x19099d,_0x204087)=>{const _0x2101e3=_0x3444b7;_0x19099d(null,uuid()+path[_0x2101e3(0x128)](_0x44530b[_0x2101e3(0x143)]));}});serverExpress[_0x3444b7(0x134)](multer({'storage':storage})[_0x3444b7(0x110)]('image')),serverExpress['use']((_0x451551,_0x2a1a51,_0x294d1a)=>{const _0x55d911=_0x3444b7;serverExpress[_0x55d911(0x1d0)][_0x55d911(0x193)]=_0x451551['flash'](_0x55d911(0x193)),serverExpress[_0x55d911(0x1d0)][_0x55d911(0x1a1)]=_0x451551[_0x55d911(0x16a)](_0x55d911(0x1a1)),serverExpress[_0x55d911(0x1d0)][_0x55d911(0x15c)]=_0x451551['user'],serverExpress[_0x55d911(0x1d0)][_0x55d911(0x120)]=_0x451551['company'],serverExpress[_0x55d911(0x1d0)][_0x55d911(0x18e)]=0x0,serverExpress[_0x55d911(0x1d0)][_0x55d911(0x1c8)]=0x0,_0x294d1a();});const http=require(_0x3444b7(0x112)),server=http['createServer'](serverExpress),{Server}=require('socket.io'),io=new Server(server),users={},connectedEmployees={},companyLimitsCache={},chat=require(_0x3444b7(0x115));io['on'](_0x3444b7(0x199),async _0x1284f6=>{const _0x7e4676=_0x3444b7;_0x1284f6['on'](_0x7e4676(0x113),async(_0x1efacb,_0x2a6a67)=>{const _0x387806=_0x7e4676,_0x556da7=connectedEmployees[_0x2a6a67]||[],_0x40970f=_0x556da7[_0x387806(0x16d)](_0x4c70fb=>_0x4c70fb['userId']===_0x1efacb);if(_0x40970f){_0x1284f6['emit']('connectionRejected',_0x387806(0x1c2));return;}if(system!=_0x387806(0x19f)){!companyLimitsCache[_0x2a6a67]&&(companyLimitsCache[_0x2a6a67]=await chat[_0x387806(0x190)](_0x2a6a67));const _0x4ea802=companyLimitsCache[_0x2a6a67];if(_0x556da7['length']>=_0x4ea802){_0x1284f6[_0x387806(0x13f)]('connectionRejected','Ups,\x20parece\x20que\x20alcanzaste\x20tu\x20límite\x20de\x20dispositivos\x20conectados.\x20Por\x20favor,\x20actualiza\x20tu\x20membresía.');return;}}_0x1284f6[_0x387806(0x144)]=_0x2a6a67,_0x556da7[_0x387806(0x167)]({'userId':_0x1efacb,'socketId':_0x1284f6['id']}),connectedEmployees[_0x2a6a67]=_0x556da7;const _0x188f3e=await chat['get_the_first_notification'](_0x1efacb,0xa);io['to'](_0x1efacb)[_0x387806(0x13f)](_0x387806(0x1c1),{'notifications':_0x188f3e});});async function _0x406ed9(_0x5a34ba){const _0xce2e9b=_0x7e4676,_0x49b0f9=users[_0x5a34ba];let _0xfc9936=_0x49b0f9;!_0x49b0f9&&(_0xfc9936=await chat[_0xce2e9b(0x168)](toUserId));const _0x4805d3={'canSend':_0xfc9936,'theUserIsConnect':_0x49b0f9};return _0x4805d3;}_0x1284f6['on'](_0x7e4676(0x12a),async({userEmail:_0x33a20c,toUserEmail:_0x1defb1,message:_0x46b6ce})=>{const _0x139b26=_0x7e4676,_0x30b6e9=await _0x406ed9(_0x1defb1);_0x30b6e9[_0x139b26(0x185)]?await chat[_0x139b26(0x16f)](_0x33a20c,_0x1defb1,_0x46b6ce)?(_0x30b6e9[_0x139b26(0x121)]&&io['to'](recipientSocketId)[_0x139b26(0x13f)](_0x139b26(0x141),{'userId':userId,'message':_0x46b6ce}),_0x1284f6['emit'](_0x139b26(0x17b),{'success':!![],'message':_0x139b26(0x14e)})):_0x1284f6[_0x139b26(0x13f)](_0x139b26(0x17b),{'success':![],'message':_0x139b26(0x142)+_0x1defb1+_0x139b26(0x1da)}):_0x1284f6[_0x139b26(0x13f)](_0x139b26(0x17b),{'success':![],'message':'El\x20usuario\x20\x27'+_0x1defb1+_0x139b26(0x12b)});}),_0x1284f6['on']('getTheFirstTenNotifications',async({userEmail:_0x37fbaa})=>{const _0x5a0f32=_0x7e4676,_0x4ad150=await chat[_0x5a0f32(0x1b8)](_0x37fbaa,0xa);io['to'](recipientSocketId)[_0x5a0f32(0x13f)](_0x5a0f32(0x1c1),{'notifications':_0x4ad150});}),_0x1284f6['on'](_0x7e4676(0x1d9),async({userId:_0x486f27,toUserId:_0x52e060,message:_0x424fca})=>{const _0x411fc0=_0x7e4676,_0x4dbc6=users[_0x52e060];let _0x5eebb6=_0x4dbc6;!_0x4dbc6&&(_0x5eebb6=await chat[_0x411fc0(0x168)](_0x52e060));if(_0x5eebb6){const _0x11ce33=await chat[_0x411fc0(0x12f)](_0x486f27,_0x52e060);await chat[_0x411fc0(0x194)](_0x11ce33,_0x486f27,_0x424fca)&&(_0x4dbc6&&io['to'](_0x4dbc6)['emit'](_0x411fc0(0x141),{'userId':_0x486f27,'message':_0x424fca})),_0x1284f6[_0x411fc0(0x13f)]('messageStatus',{'success':!![],'message':_0x411fc0(0x136)});}else _0x1284f6[_0x411fc0(0x13f)](_0x411fc0(0x17b),{'success':![],'message':_0x411fc0(0x122)+_0x52e060+_0x411fc0(0x135)});}),_0x1284f6['on'](_0x7e4676(0x13c),()=>{const _0x1a9f8d=_0x7e4676,{companyId:_0x4aa23d}=_0x1284f6;_0x4aa23d&&connectedEmployees[_0x4aa23d]?(connectedEmployees[_0x4aa23d]=connectedEmployees[_0x4aa23d][_0x1a9f8d(0x12c)](_0x456247=>_0x456247[_0x1a9f8d(0x173)]!==_0x1284f6['id']),connectedEmployees[_0x4aa23d]['length']===0x0&&delete connectedEmployees[_0x4aa23d]):console[_0x1a9f8d(0x15e)]('Socket\x20'+_0x1284f6['id']+_0x1a9f8d(0x137));}),_0x1284f6['on']('sendNotification',_0xb048e8=>{const _0x1af2e1=_0x7e4676;console[_0x1af2e1(0x15e)](_0x1af2e1(0x1ab),_0xb048e8),_0x1284f6[_0x1af2e1(0x129)][_0x1af2e1(0x13f)](_0x1af2e1(0x1cb),_0xb048e8);});});const companyName=_0x3444b7(0x1c7);serverExpress[_0x3444b7(0x134)](require('./router')),serverExpress[_0x3444b7(0x134)](require(_0x3444b7(0x17c))),serverExpress[_0x3444b7(0x134)](companyName,require(_0x3444b7(0x149)));const routesPath=path[_0x3444b7(0x1b2)](__dirname,_0x3444b7(0x17d));fs[_0x3444b7(0x184)](routesPath)[_0x3444b7(0x19d)](_0x48b7e8=>{const _0x543d2a=_0x3444b7,_0x3de29e=path[_0x543d2a(0x1b2)](routesPath,_0x48b7e8);fs[_0x543d2a(0x151)](_0x3de29e)[_0x543d2a(0x10f)]()&&_0x48b7e8[_0x543d2a(0x138)]('.js')&&serverExpress[_0x543d2a(0x134)](companyName,require(_0x3de29e));}),serverExpress[_0x3444b7(0x134)](require(_0x3444b7(0x123))),serverExpress[_0x3444b7(0x134)](require('./lib/addFrom')),serverExpress[_0x3444b7(0x134)](express[_0x3444b7(0x11d)](path['join'](__dirname,_0x3444b7(0x1a5))));const os=require('os');function getLocalIP(){const _0x9b6f55=_0x3444b7,_0x2d68d9=os[_0x9b6f55(0x1d6)]();for(let _0x3ba0f7 in _0x2d68d9){for(let _0x45852a=0x0;_0x45852a<_0x2d68d9[_0x3ba0f7][_0x9b6f55(0x1a9)];_0x45852a++){const _0x552912=_0x2d68d9[_0x3ba0f7][_0x45852a];if(_0x552912[_0x9b6f55(0x12d)]===_0x9b6f55(0x18d)&&!_0x552912[_0x9b6f55(0x15d)])return _0x552912[_0x9b6f55(0x14a)];}}return _0x9b6f55(0x1ae);}const axios=require('axios');async function get_answer_of_my_api(_0x463d7a,_0x3ab5a8){const _0x565e71=_0x3444b7,_0x5eed40=path[_0x565e71(0x1b2)](__dirname,_0x565e71(0x1b7));fs[_0x565e71(0x198)](_0x5eed40,_0x565e71(0x176),_0x565e71(0x1a8));try{const _0x168deb=await axios[_0x565e71(0x1bf)](_0x565e71(0x1cc)+_0x463d7a,_0x3ab5a8,{'headers':{'Content-Type':_0x565e71(0x175)}});return fs[_0x565e71(0x198)](_0x5eed40,'Error\x20verificando\x20actualizaciones:\x20'+_0x168deb[_0x565e71(0x169)]+_0x565e71(0x1d1),_0x565e71(0x1a8)),_0x168deb;}catch(_0x3af779){return fs[_0x565e71(0x198)](_0x5eed40,_0x565e71(0x172)+_0x3af779[_0x565e71(0x1a1)]+'\x0a'+_0x3af779[_0x565e71(0x11a)]+'\x0a\x0a',_0x565e71(0x1a8)),{'success':![],'message':'Hubo\x20un\x20error\x20al\x20hacer\x20la\x20solicitud.'};}}let mainWindow,activationWindow,loginWindow;const createMainWindow=()=>{const _0x5c2c8f=_0x3444b7;mainWindow=new BrowserWindow({'width':0x320,'height':0x258}),mainWindow[_0x5c2c8f(0x1ac)](),mainWindow[_0x5c2c8f(0x14c)]('http://localhost:'+serverExpress['get']('port'));},createMainWindowRegister=()=>{const _0x4b9a90=_0x3444b7;loginWindow=new BrowserWindow({'width':0x320,'height':0x258,'parent':mainWindow,'webPreferences':{'preload':path['join'](__dirname,_0x4b9a90(0x10d)),'nodeIntegration':!![],'contextIsolation':![]}}),loginWindow[_0x4b9a90(0x1ac)](),loginWindow[_0x4b9a90(0x1de)](path['join'](__dirname,_0x4b9a90(0x1be)));},{machineIdSync}=require('node-machine-id'),deviceId=machineIdSync();ipcMain['on'](_0x3444b7(0x18a),async _0x189c2b=>{const _0x47e8db=_0x3444b7;console['log'](_0x47e8db(0x117)),_0x189c2b[_0x47e8db(0x13d)](_0x47e8db(0x1c0),deviceId);}),ipcMain['on'](_0x3444b7(0x188),async(_0x3f20d7,_0x1b5658)=>{const _0x3a7a74=_0x3444b7,_0x19c5e7=_0x1b5658[_0x3a7a74(0x189)];await initialize_token(_0x19c5e7[_0x3a7a74(0x131)]),await create_expiration_date_of_the_token(_0x19c5e7[_0x3a7a74(0x1aa)]);const _0x1455c9=_0x3a7a74(0x19e);_0x3f20d7[_0x3a7a74(0x13d)](_0x3a7a74(0x188),_0x1455c9);}),ipcMain['on'](_0x3444b7(0x119),async(_0x5e8ddb,_0x5293d8)=>{const _0x418016=_0x3444b7,_0x2241cc=_0x5293d8[_0x418016(0x131)],_0x5080c7=await see_if_exist_this_token_in_the_database_of_the_web(_0x2241cc);if(_0x5080c7[_0x418016(0x131)]){let _0x341257=!![];_0x5080c7[_0x418016(0x133)]&&(_0x5080c7[_0x418016(0x133)]!==deviceId&&(_0x5080c7[_0x418016(0x1a1)]=_0x418016(0x19b),_0x341257=![])),_0x341257&&(await save_the_uui_of_the_user_in_the_database(_0x2241cc,deviceId)&&(await initialize_token(_0x2241cc),await create_expiration_date_of_the_token(_0x5080c7[_0x418016(0x118)]),_0x5080c7[_0x418016(0x1a1)]='Datos\x20actualizados\x20con\x20éxito.\x20Cierra\x20y\x20vuelve\x20a\x20abrir\x20el\x20programa\x20😄'));}_0x5e8ddb['reply'](_0x418016(0x18f),_0x5080c7['message']);}),ipcMain['on'](_0x3444b7(0x1a7),async(_0x287e23,_0x57822b)=>{const _0x25b366=_0x3444b7,_0x270367=_0x57822b[_0x25b366(0x19c)],_0x40775c=_0x57822b[_0x25b366(0x160)],_0x229b0f=await see_if_exist_this_user_in_the_database_of_the_web(_0x270367,_0x40775c);if(_0x229b0f[_0x25b366(0x131)]){if(_0x229b0f[_0x25b366(0x133)]&&_0x229b0f['uuid']!==deviceId)_0x229b0f[_0x25b366(0x1a1)]=_0x25b366(0x19b);else{if(await save_the_uui_of_the_user_in_the_database(_0x270367,deviceId)){}}}_0x287e23[_0x25b366(0x13d)](_0x25b366(0x1b1),_0x229b0f[_0x25b366(0x1a1)]);});const bcrypt=require(_0x3444b7(0x158));function _0x514f(){const _0x5c7c0f=['utf8','length','expiration_date','Nueva\x20notificación:','maximize','update_activation_date.php','127.0.0.1','FudSession','📦\x20Base\x20de\x20datos\x20EDPLUS\x20creada','answer-from-login-render','join','428349RXzVZL','views','edplus.sql','false','logfile.txt','get_the_first_notification','14Mmcyge','get','then','info','express-session','activation.html','post','answer_get_my_deviceId','privateNotifications','Ups,\x20parece\x20que\x20ya\x20estás\x20conectado\x20en\x20otro\x20dispositivo.','connect-flash','Tu\x20demo\x20de\x2030\x20días\x20ha\x20expirado.\x20Por\x20favor,\x20compra\x20la\x20versión\x20completa\x20y\x20sigue\x20creciendo\x20con\x20ED\x20PLUS\x20🚀.','simple-git','✅\x20La\x20aplicación\x20ya\x20está\x20actualizada.','/links','pack_branch','trim','error','newNotification','https://www.pluspuntodeventa.com/api/','config','88224OwqdpZ','quit','locals','\x0a\x0a\x0a','connect','showMessageBoxSync','port','warning','networkInterfaces','passport','🔄\x20Nueva\x20versión\x20encontrada,\x20actualizando...','sendMessageToUser','\x27.\x20Inténtalo\x20de\x20nuevo.\x20😳','connect-pg-simple','Repositorio\x20remoto\x20configurado\x20correctamente','pull','loadFile','engine','setFullYear','init','❌\x20Error\x20ejecutando\x20SQL:','Error\x20al\x20verificar\x20usuario:','./lib/system','preload.js','Se\x20ha\x20descargado\x20una\x20nueva\x20versión.\x20Reinicia\x20la\x20aplicación\x20para\x20aplicar\x20los\x20cambios.','isFile','single','expirationDateOFTheToken','http','registerUser','json','./services/chat.js','15149570gNTlFm','📥\x20Petición\x20recibida\x20para\x20obtener\x20el\x20deviceId','activation_date','login-from-render-token','stack','Usuario\x20autenticado\x20con\x20éxito.','La\x20demo\x20aún\x20está\x20activa.','static','CREATE\x20DATABASE\x20edplus','getDate','company','theUserIsConnect','Este\x20email\x20\x27','./lib/addFrom','0.0.0.0','\x0a\x20\x20\x20\x20\x20\x20\x20\x20UPDATE\x20pagos\x20\x0a\x20\x20\x20\x20\x20\x20\x20\x20SET\x20active\x20=\x20false\x0a\x20\x20\x20\x20\x20\x20\x20\x20WHERE\x20token\x20=\x20?\x0a\x20\x20\x20\x20','Demo\x20Expirada','24xmvouU','extname','broadcast','sendNotificationToUser','\x27\x20no\x20existe.\x20🤔','filter','family','set','create_new_chat','latest','token','path','uuid','use','\x27\x20no\x20existe\x20🤔','Mensaje\x20enviado\x20con\x20éxito','\x20desconectado,\x20pero\x20no\x20estaba\x20asociado\x20a\x20ninguna\x20empresa.','endsWith','morgan','release','./keys','disconnect','reply','origin','emit','layouts','privateMessage','No\x20pudimos\x20enviar\x20el\x20mensaje\x20al\x20usuario\x20\x27','originalname','companyId','Pool','dev','device_id','Actualización','./router/links','address','❌\x20Error\x20verificando\x20actualizaciones:','loadURL','node-persist','Mensaje\x20enviado\x20con\x20éxito.\x20👌','\x0a\x20\x20\x20\x20\x20\x20\x20\x20SELECT\x20*\x20FROM\x20pagos\x20\x0a\x20\x20\x20\x20\x20\x20\x20\x20WHERE\x20token\x20=\x20?\x0a\x20\x20\x20\x20','toISOString','statSync','main','getFullYear','Usuario\x20no\x20encontrado.','get_information_of_the_user.php','Token\x20no\x20encontrado.','view\x20engine','bcrypt','Suscripción\x20expirada.\x20Por\x20favor,\x20vuelve\x20a\x20activar\x20tu\x20membresía.','map','express','user','internal','log','removeItem','password','dotenv','window-all-closed','urlencoded','📂\x20La\x20base\x20de\x20datos\x20EDPLUS\x20fue\x20actualizada.','database','postgres','push','this_email_exist','data','flash','79tfNdtW','electron','some','installToken','create_notification','HEAD','6724962VcqECs','Error\x20verificando\x20actualizaciones:\x20','socketId','Server\x20running\x20on\x20http://','application/json','ENTRE','Fecha\x20de\x20instalación\x20existente:','112480mysCtI','query','5977827tkMKNA','messageStatus','./router/authentication','router/links','./lib/handlebars','hash','--hard','Ocurrio\x20un\x20error\x20al\x20verificar\x20tu\x20Token\x20en\x20el\x20ultimo\x20paso,\x20intentalo\x20otra\x20vez.','.hbs','readFileSync','readdirSync','canSend','session','rowCount','update_data_of_the_token_in_this_drive','dataToken','get_my_deviceId','raw','PORT','IPv4','pack_company','answer-from-login-render-token','get_max_employee_of_this_company','addRemote','active','success','send_new_message','setDate','installDemo','split','appendFileSync','connection','0000-00-00','Este\x20usuario\x20ya\x20tiene\x20un\x20TOKEN\x20registrado\x20en\x20un\x20equipo.','username','forEach','Datos\x20actualizados\x20con\x20éxito.\x20Cierra\x20y\x20vuelve\x20a\x20abrir\x20el\x20programa\x20😄','desktop','hashedPassword','message','public/img/uploads','see_if_exist_this_token_in_the_database_of_the_web.php','type_membresy','public','23366jhBOPN','login-from-render'];_0x514f=function(){return _0x5c7c0f;};return _0x514f();}async function see_if_exist_this_user_in_the_database_of_the_web(_0x2f2997,_0x27c11e){const _0x40651a=_0x3444b7;try{const _0x2a4279=await get_answer_of_my_api(_0x40651a(0x155),{'email':_0x2f2997});if(!_0x2a4279[_0x40651a(0x169)][_0x40651a(0x193)])return{'token':null,'message':_0x40651a(0x154)};const _0x3321c2=_0x2a4279[_0x40651a(0x169)],_0x432a91=await bcrypt['compare'](_0x27c11e,_0x3321c2[_0x40651a(0x1a0)]);if(!_0x432a91)return{'token':null,'message':'Contraseña\x20incorrecta.'};const _0x471412=await get_answer_of_my_api('get_data_of_the_token_with_the_user_id.php',{'userId':_0x3321c2['id']});if(_0x471412[_0x40651a(0x169)][_0x40651a(0x193)])return{'token':null,'message':'Este\x20usuario\x20no\x20tiene\x20ningun\x20Token\x20activo.'};const _0x53fdb2=_0x471412['data'],_0x464bb2=new Date();_0x464bb2[_0x40651a(0x1e0)](_0x464bb2[_0x40651a(0x153)]()-0x1);if(new Date(_0x3321c2[_0x40651a(0x118)])<_0x464bb2)return{'token':null,'message':_0x40651a(0x159)};return console['log']('Usuario\x20autenticado\x20con\x20éxito.'),{'token':_0x53fdb2[_0x40651a(0x131)],'type_membresy':_0x53fdb2[_0x40651a(0x1a4)],'message':_0x40651a(0x11b)};}catch(_0x8fbaa6){return console[_0x40651a(0x1ca)](_0x40651a(0x10b),_0x8fbaa6),{'token':null};}}async function see_if_exist_this_token_in_the_database_of_the_web(_0x23bd13){const _0xb252c9=_0x3444b7;try{const _0x30c7dd=await get_answer_of_my_api(_0xb252c9(0x1a3),{'token':_0x23bd13});if(!_0x30c7dd[_0xb252c9(0x169)][_0xb252c9(0x193)])return{'token':null,'message':_0xb252c9(0x156)};const _0x468742=_0x30c7dd[_0xb252c9(0x169)],_0x5f433c=new Date();_0x468742[_0xb252c9(0x1a4)]==0x0?_0x5f433c[_0xb252c9(0x195)](_0x5f433c[_0xb252c9(0x11f)]()-0x1e):_0x5f433c[_0xb252c9(0x1e0)](_0x5f433c[_0xb252c9(0x153)]()-0x1);if(_0x468742['activation_date']!=_0xb252c9(0x19a)&&new Date(_0x468742[_0xb252c9(0x118)])<_0x5f433c)return{'token':null,'message':_0xb252c9(0x159)};if(_0x468742[_0xb252c9(0x118)]==='0000-00-00'){const _0x38d4f6=new Date();_0x468742[_0xb252c9(0x1a4)]==0x0?_0x38d4f6[_0xb252c9(0x195)](_0x5f433c['getDate']()+0x1e):_0x38d4f6[_0xb252c9(0x1e0)](_0x38d4f6['getFullYear']()+0x1);const _0x3c67bd=await get_answer_of_my_api(_0xb252c9(0x1ad),{'suscripcion':_0x38d4f6['toISOString']()[_0xb252c9(0x197)]('T')[0x0],'token':_0x23bd13});return _0x3c67bd['data'][_0xb252c9(0x193)]?(_0x468742[_0xb252c9(0x118)]=_0x38d4f6,console[_0xb252c9(0x15e)](_0xb252c9(0x11b)),{'token':!![],'type_membresy':_0x468742[_0xb252c9(0x1a4)],'uuid':_0x468742[_0xb252c9(0x147)],'activation_date':_0x468742[_0xb252c9(0x118)],'message':_0xb252c9(0x11b)}):{'token':null,'message':_0xb252c9(0x181)};}}catch(_0x52286f){return console[_0xb252c9(0x1ca)](_0xb252c9(0x10b),_0x52286f),{'token':null,'message':_0x52286f};}}async function save_the_uui_of_the_user_in_the_database(_0x228749,_0x4dd409){const _0xa76c45=_0x3444b7;try{const _0x5543e8=await get_answer_of_my_api(_0xa76c45(0x1a3),{'token':_0x228749,'deviceId':_0x4dd409});return _0x5543e8[_0xa76c45(0x169)][_0xa76c45(0x193)];}catch(_0x594ae2){return console[_0xa76c45(0x1ca)]('Error\x20al\x20actualizar\x20el\x20UUID\x20del\x20dispositivo:',_0x594ae2),![];}}async function verificarTokenActivo(){const _0x383458=_0x3444b7,_0x249890=_0x383458(0x14f);try{const _0x2b893a=await pool[_0x383458(0x179)](_0x249890,[TOKEN]);return console['log'](_0x2b893a[0x0]),_0x2b893a[0x0][_0x383458(0x192)]===0x1?(console[_0x383458(0x15e)]('Token\x20encontrado\x20y\x20activo.'),!![]):(console[_0x383458(0x15e)]('El\x20token\x20no\x20está\x20activo\x20o\x20no\x20existe.'),![]);}catch(_0x8ee689){return console[_0x383458(0x1ca)]('Error\x20al\x20verificar\x20el\x20token:',_0x8ee689),![];}}async function actualizarToken(){const _0x26f45b=_0x3444b7,_0x4e7aac=_0x26f45b(0x125);await pool[_0x26f45b(0x179)](_0x4e7aac,[TOKEN]);}app['on']('ready',async()=>{const _0x37d2cb=_0x3444b7;await check_if_exist_updates();if(thiIsADemo){await initialize_demo();if(await is_demo_expired()){dialog[_0x37d2cb(0x1d3)]({'type':'warning','title':_0x37d2cb(0x126),'message':_0x37d2cb(0x1c4)}),app[_0x37d2cb(0x1cf)]();return;}}else await verify_membership_of_user()?(serverExpress['listen'](serverExpress['get'](_0x37d2cb(0x1d4)),_0x37d2cb(0x124),()=>{const _0x1da9c9=_0x37d2cb;console['log'](_0x1da9c9(0x174)+getLocalIP()+':'+serverExpress[_0x1da9c9(0x1ba)](_0x1da9c9(0x1d4)));}),createMainWindow()):createMainWindowRegister();}),app['on'](_0x3444b7(0x162),()=>{const _0x5b45bd=_0x3444b7;process['platform']!=='darwin'&&app[_0x5b45bd(0x1cf)]();});