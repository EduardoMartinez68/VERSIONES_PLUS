const _0x356515=_0x12e1;(function(_0x4c27d2,_0x1e92b8){const _0x43d0e1=_0x12e1,_0x4d316a=_0x4c27d2();while(!![]){try{const _0x51b707=parseInt(_0x43d0e1(0x105))/0x1+-parseInt(_0x43d0e1(0x12e))/0x2+parseInt(_0x43d0e1(0xb6))/0x3+-parseInt(_0x43d0e1(0xfd))/0x4*(parseInt(_0x43d0e1(0x126))/0x5)+-parseInt(_0x43d0e1(0xc0))/0x6+-parseInt(_0x43d0e1(0xf4))/0x7+-parseInt(_0x43d0e1(0x141))/0x8*(-parseInt(_0x43d0e1(0x115))/0x9);if(_0x51b707===_0x1e92b8)break;else _0x4d316a['push'](_0x4d316a['shift']());}catch(_0x36359e){_0x4d316a['push'](_0x4d316a['shift']());}}}(_0x1277,0x71861));const system=require(_0x356515(0x8f)),thiIsADemo=![],{app,BrowserWindow,dialog,ipcMain}=require('electron'),express=require('express'),morgan=require(_0x356515(0xec)),{engine}=require(_0x356515(0xe4)),multer=require(_0x356515(0x113)),flash=require(_0x356515(0xa1)),session=require(_0x356515(0xdc)),passport=require(_0x356515(0x88)),{database}=require(_0x356515(0xac)),{v4:uuid}=require(_0x356515(0xa4)),path=require(_0x356515(0x9c)),{RecaptchaV2}=require(_0x356515(0xeb)),nodePersist=require('node-persist');nodePersist[_0x356515(0x9d)]({'dir':path[_0x356515(0x97)](__dirname,_0x356515(0xcb))});async function initialize_software(){const _0x983c66=_0x356515,_0x474839=await nodePersist['get'](_0x983c66(0xd8));!_0x474839&&await nodePersist[_0x983c66(0x112)]('installToken','false');}async function the_software_have_a_token(){const _0x4c58d8=_0x356515,_0x5b98ad=await nodePersist[_0x4c58d8(0x111)](_0x4c58d8(0xd8));if(!_0x5b98ad)return![];return _0x5b98ad!=_0x4c58d8(0xe3);}async function create_expiration_date_of_the_token(_0x27a4b8){const _0x58b553=_0x356515,_0x2c8fc7=await nodePersist['get'](_0x58b553(0x81));!_0x2c8fc7&&await nodePersist[_0x58b553(0x112)](_0x58b553(0x81),_0x27a4b8);}function _0x12e1(_0x2eaf8a,_0x2a012f){const _0x127788=_0x1277();return _0x12e1=function(_0x12e121,_0x298f64){_0x12e121=_0x12e121-0x7c;let _0x4bd13c=_0x127788[_0x12e121];return _0x4bd13c;},_0x12e1(_0x2eaf8a,_0x2a012f);}async function token_expired(){const _0x44eb70=_0x356515,_0x18d781=await nodePersist[_0x44eb70(0x111)](_0x44eb70(0x81)),_0x9d9a63=new Date(_0x18d781),_0x3858b3=new Date();return _0x3858b3<_0x9d9a63;}async function remove_install_token(){const _0x39012c=_0x356515;await nodePersist[_0x39012c(0xb7)](_0x39012c(0xd8)),await nodePersist[_0x39012c(0xb7)](_0x39012c(0x81)),console[_0x39012c(0xbd)](_0x39012c(0x134));}async function initialize_token(_0x708a73){const _0x2a4486=_0x356515,_0x294f46=await nodePersist[_0x2a4486(0x111)]('installToken');await nodePersist[_0x2a4486(0x112)](_0x2a4486(0xd8),_0x708a73);}async function initialize_demo(){const _0x21b2de=_0x356515,_0x3bc500=await nodePersist[_0x21b2de(0x111)](_0x21b2de(0xee));if(!_0x3bc500){const _0x3cff6f=new Date()[_0x21b2de(0x7f)]();await nodePersist[_0x21b2de(0x112)]('installDate',_0x3cff6f),console[_0x21b2de(0xbd)]('Fecha\x20de\x20instalación\x20guardada:',_0x3cff6f);}else console[_0x21b2de(0xbd)](_0x21b2de(0x120),_0x3bc500);}async function is_demo_expired(){const _0x5659d5=_0x356515,_0x4af297=await nodePersist['get'](_0x5659d5(0xee));if(!_0x4af297)return console[_0x5659d5(0xbd)]('No\x20se\x20encontró\x20la\x20fecha\x20de\x20instalación'),![];const _0x4a704e=new Date(_0x4af297),_0x465312=new Date(),_0x5ba13f=_0x465312-_0x4a704e,_0x240c8b=_0x5ba13f/(0x3e8*0x3c*0x3c*0x18);return _0x240c8b>0x1e?(console['log'](_0x5659d5(0xb0)),!![]):(console['log'](_0x5659d5(0x84)),![]);}async function this_software_count_have_a_count(){}async function the_user_have_a_token_active_in_the_database(){}async function verify_membership_of_user(){initialize_software();if(await the_software_have_a_token())return await token_expired();return![];}const simpleGit=require('simple-git'),fs=require('fs'),repoPath=path['join'](__dirname),git=simpleGit(repoPath),repoURL=_0x356515(0xd0),remote=_0x356515(0xe8);git['addRemote'](remote,repoURL)['then'](()=>{const _0x596f87=_0x356515;console[_0x596f87(0xbd)](_0x596f87(0x10e));})[_0x356515(0xc4)](_0x5c4b3c=>{const _0x5de6b6=_0x356515;console[_0x5de6b6(0xa2)](_0x5de6b6(0x11e),_0x5c4b3c);});async function check_if_exist_updates(){const _0x3858ed=_0x356515;try{await git[_0x3858ed(0x106)](remote);const _0x5c03ae=await git[_0x3858ed(0xbd)]([remote+_0x3858ed(0x127),'-1']),_0x199c9c=await git[_0x3858ed(0xbd)]([_0x3858ed(0xfb),'-1']);_0x5c03ae[_0x3858ed(0x83)]['hash']!==_0x199c9c[_0x3858ed(0x83)][_0x3858ed(0xe9)]?(console[_0x3858ed(0xbd)](_0x3858ed(0x10b)),await git[_0x3858ed(0x140)]([_0x3858ed(0x11f),_0x3858ed(0xed),remote+_0x3858ed(0x127)]),await git['pull']('origin',_0x3858ed(0x8e),{'--rebase':null}),dialog[_0x3858ed(0xb9)]({'type':'info','title':_0x3858ed(0x129),'message':'Se\x20ha\x20descargado\x20una\x20nueva\x20versión.\x20Reinicia\x20la\x20aplicación\x20para\x20aplicar\x20los\x20cambios.','buttons':[_0x3858ed(0xf5)]}),app[_0x3858ed(0xaf)](),app['quit']()):console[_0x3858ed(0xbd)](_0x3858ed(0x102));}catch(_0x54debe){const _0xd243c5=path[_0x3858ed(0x97)](__dirname,'logfile.txt');fs[_0x3858ed(0xda)](_0xd243c5,_0x3858ed(0x9a)+_0x54debe[_0x3858ed(0x98)]+'\x0a'+_0x54debe[_0x3858ed(0x130)]+'\x0a\x0a',_0x3858ed(0x143)),console[_0x3858ed(0xa2)]('❌\x20Error\x20verificando\x20actualizaciones:',_0x54debe),dialog[_0x3858ed(0xb9)]({'type':_0x3858ed(0xe0),'title':_0x3858ed(0x94),'message':_0x3858ed(0x9a)+_0x54debe['message']+'\x0a'+_0x54debe[_0x3858ed(0x130)]+'\x0a\x0a'});}}const serverExpress=express();require(_0x356515(0x146)),require(_0x356515(0x93)),serverExpress[_0x356515(0x112)](_0x356515(0x116),process[_0x356515(0xce)][_0x356515(0xf0)]||0xfa0),serverExpress[_0x356515(0x112)]('views',path[_0x356515(0x97)](__dirname,_0x356515(0x107))),serverExpress[_0x356515(0xba)](_0x356515(0xb8),engine({'defaultLayout':_0x356515(0x8e),'layoutsDir':path['join'](serverExpress[_0x356515(0x111)]('views'),_0x356515(0xf2)),'partialsDir':path[_0x356515(0x97)](serverExpress[_0x356515(0x111)]('views'),_0x356515(0x109)),'extname':_0x356515(0xb8),'helpers':require('./lib/handlebars')})),serverExpress[_0x356515(0x112)]('view\x20engine',_0x356515(0xb8)),require(_0x356515(0x124))[_0x356515(0xff)]();function _0x1277(){const _0x30d498=['--hard','installDemo','family','PORT','locals','layouts','Token\x20encontrado\x20y\x20activo.','1810347jcalxi','Reiniciar\x20ahora','sendNotification','127.0.0.1','\x0a\x20\x20\x20\x20\x20\x20\x20\x20SELECT\x20token,\x20type_membresy,\x20activation_date\x20,\x20device_id\x0a\x20\x20\x20\x20\x20\x20\x20\x20FROM\x20pagos\x20\x0a\x20\x20\x20\x20\x20\x20\x20\x20WHERE\x20token\x20=\x20?\x0a\x20\x20\x20\x20','bcrypt','length','HEAD','token','4xxdKdE','maximize','config','static','some','✅\x20La\x20aplicación\x20ya\x20está\x20actualizada.','http','login-from-render-token','422024QpRYeq','fetch','views','\x0a\x20\x20\x20\x20\x20\x20\x20\x20UPDATE\x20pagos\x20\x0a\x20\x20\x20\x20\x20\x20\x20\x20SET\x20active\x20=\x20false\x0a\x20\x20\x20\x20\x20\x20\x20\x20WHERE\x20token\x20=\x20?\x0a\x20\x20\x20\x20','partials','query','🔄\x20Nueva\x20versión\x20encontrada,\x20actualizando...','createPool','Contraseña\x20incorrecta.','Repositorio\x20remoto\x20configurado\x20correctamente','extname','desktop','get','set','multer','Mensaje\x20enviado\x20con\x20éxito.\x20👌','296748ppRlpL','port','IPv4','disconnect','./router/links/CRM','\x27\x20no\x20existe.\x20🤔','./router/links/boutique','./router/links/branch','create_notification','Error\x20al\x20agregar\x20el\x20repositorio\x20remoto','reset','Fecha\x20de\x20instalación\x20existente:','quit','internal','listen','dotenv','./router/links/delivery','172960ZhRCdQ','/main','session','Actualización','Demo\x20Expirada','theUserIsConnect','public/img/uploads','user','1217498LSMHah','originalname','stack','device_id','reply','\x27.\x20Inténtalo\x20de\x20nuevo.\x20😳','installToken\x20eliminado','socketId','pack_company','connect-pg-simple','sendNotificationToUser','split','\x0a\x20\x20\x20\x20\x20\x20\x20\x20SELECT\x20token,\x20type_membresy,\x20password\x20AS\x20hashedPassword,\x20activation_date\x20\x0a\x20\x20\x20\x20\x20\x20\x20\x20FROM\x20users\x20\x0a\x20\x20\x20\x20\x20\x20\x20\x20WHERE\x20email\x20=\x20?\x0a\x20\x20\x20\x20','Token\x20no\x20encontrado.','./router/authentication','release','./router/links/ceo','create_new_chat','raw','288aoDXql','initialize','utf8','canSend','Error\x20al\x20verificar\x20el\x20token:','./lib/passport','password','getFullYear','active','FudSession','toISOString','public','expirationDateOFTheToken','success','latest','La\x20demo\x20aún\x20está\x20activa.','this_email_exist','socket.io','Error\x20al\x20verificar\x20usuario:','passport','./router/links/fudone','privateMessage','0000-00-00','getConnection','El\x20token\x20no\x20está\x20activo\x20o\x20no\x20existe.','main','./lib/system','./router/links/store','/links','Este\x20usuario\x20ya\x20tiene\x20un\x20TOKEN\x20registrado\x20en\x20un\x20equipo.','./lib/editFrom','Error\x20verificando\x20actualizaciones!','ready','El\x20usuario\x20\x27','join','message','Tu\x20demo\x20de\x2030\x20días\x20ha\x20expirado.\x20Por\x20favor,\x20compra\x20la\x20versión\x20completa\x20y\x20sigue\x20creciendo\x20con\x20ED\x20PLUS\x20🚀.','Error\x20verificando\x20actualizaciones:\x20','company','path','init','setFullYear','PROTOCOL_CONNECTION_LOST','diskStorage','connect-flash','error','La\x20conexión\x20a\x20la\x20base\x20de\x20datos\x20fue\x20rechazada.','uuid','answer-from-login-render','\x0a\x20\x20\x20\x20\x20\x20\x20\x20UPDATE\x20pagos\x20\x0a\x20\x20\x20\x20\x20\x20\x20\x20SET\x20device_id\x20=\x20?\x20,\x20active\x20=\x20false\x0a\x20\x20\x20\x20\x20\x20\x20\x20WHERE\x20token\x20=\x20?\x0a\x20\x20\x20\x20','json','u995592926_bestpoint','ECONNREFUSED','\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20UPDATE\x20users\x20\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20SET\x20activation_date\x20=\x20?\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20WHERE\x20token\x20=\x20?\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20','registerUser','./keys','flash','answer-from-login-render-token','relaunch','La\x20demo\x20ha\x20expirado.','0.0.0.0','ER_CON_COUNT_ERROR','mysql','address','http://localhost:','664095dUZqjY','removeItem','.hbs','showMessageBoxSync','engine','node-machine-id','newNotification','log','./router/links/app','Error\x20al\x20actualizar\x20el\x20UUID\x20del\x20dispositivo:','2780556SxhSIv','preload.js','broadcast','Socket\x20','catch','use','\x20desconectado,\x20pero\x20no\x20estaba\x20asociado\x20a\x20ninguna\x20empresa.','loadFile','userId','messageStatus','./router/links/subscription','data','privateNotifications','loadURL','env','\x0a\x20\x20\x20\x20\x20\x20\x20\x20SELECT\x20*\x20FROM\x20pagos\x20\x0a\x20\x20\x20\x20\x20\x20\x20\x20WHERE\x20token\x20=\x20?\x0a\x20\x20\x20\x20','https://github.com/EduardoMartinez68/VERSIONES_PLUS','Bobesponja48*','darwin','Este\x20email\x20\x27','./router/links/desktop','login-from-render','push','activation_date','installToken','Usuario\x20autenticado\x20con\x20éxito.','appendFileSync','./router/links/cashCut','express-session','get_the_first_notification','hashedPassword','send_new_message','warning','./router','Server\x20running\x20on\x20http://','false','express-handlebars','emit','Datos\x20actualizados\x20con\x20éxito.\x20Cierra\x20y\x20vuelve\x20a\x20abrir\x20el\x20programa\x20😄','code','origin','hash','Pool','express-recaptcha','morgan'];_0x1277=function(){return _0x30d498;};return _0x1277();}const {APP_PG_USER,APP_PG_HOST,APP_PG_DATABASE,APP_PG_PASSWORD,APP_PG_PORT,TOKEN}=process[_0x356515(0xce)],pg=require('pg'),pgPool=new pg[(_0x356515(0xea))]({'user':APP_PG_USER,'host':APP_PG_HOST,'database':APP_PG_DATABASE,'password':APP_PG_PASSWORD,'port':APP_PG_PORT});serverExpress['use'](session({'secret':_0x356515(0x7e),'resave':![],'saveUninitialized':![],'store':new(require(_0x356515(0x137))(session))({'pool':pgPool,'tableName':_0x356515(0x128)})})),serverExpress['use'](flash()),serverExpress[_0x356515(0xc5)](morgan('dev')),serverExpress[_0x356515(0xc5)](express['urlencoded']({'extended':![]})),serverExpress[_0x356515(0xc5)](express[_0x356515(0xa7)]()),serverExpress[_0x356515(0xc5)](passport[_0x356515(0x142)]()),serverExpress['use'](passport[_0x356515(0x128)]());const storage=multer[_0x356515(0xa0)]({'destination':path[_0x356515(0x97)](__dirname,_0x356515(0x12c)),'filename':(_0x6a2f43,_0x172990,_0x26b79d,_0x370f1e)=>{const _0xe4b24a=_0x356515;_0x26b79d(null,uuid()+path[_0xe4b24a(0x10f)](_0x172990[_0xe4b24a(0x12f)]));}});serverExpress[_0x356515(0xc5)](multer({'storage':storage})['single']('image')),serverExpress[_0x356515(0xc5)]((_0x4577a7,_0x5ee65d,_0x4f38dc)=>{const _0x189e63=_0x356515;serverExpress['locals'][_0x189e63(0x82)]=_0x4577a7['flash']('success'),serverExpress['locals'][_0x189e63(0x98)]=_0x4577a7[_0x189e63(0xad)](_0x189e63(0x98)),serverExpress['locals'][_0x189e63(0x12d)]=_0x4577a7[_0x189e63(0x12d)],serverExpress['locals']['company']=_0x4577a7[_0x189e63(0x9b)],serverExpress[_0x189e63(0xf1)][_0x189e63(0x136)]=0x0,serverExpress[_0x189e63(0xf1)]['pack_branch']=0x0,_0x4f38dc();});const http=require(_0x356515(0x103)),server=http['createServer'](serverExpress),{Server}=require(_0x356515(0x86)),io=new Server(server),users={},connectedEmployees={},companyLimitsCache={},chat=require('./services/chat.js');io['on']('connection',async _0x171a86=>{const _0x506760=_0x356515;_0x171a86['on'](_0x506760(0xab),async(_0x53bceb,_0x471a44)=>{const _0x5e12ac=_0x506760,_0x518410=connectedEmployees[_0x471a44]||[],_0x13e877=_0x518410[_0x5e12ac(0x101)](_0x446aa1=>_0x446aa1[_0x5e12ac(0xc8)]===_0x53bceb);if(_0x13e877){_0x171a86[_0x5e12ac(0xe5)]('connectionRejected','Ups,\x20parece\x20que\x20ya\x20estás\x20conectado\x20en\x20otro\x20dispositivo.');return;}if(system!=_0x5e12ac(0x110)){!companyLimitsCache[_0x471a44]&&(companyLimitsCache[_0x471a44]=await chat['get_max_employee_of_this_company'](_0x471a44));const _0x6112ba=companyLimitsCache[_0x471a44];if(_0x518410[_0x5e12ac(0xfa)]>=_0x6112ba){_0x171a86[_0x5e12ac(0xe5)]('connectionRejected','Ups,\x20parece\x20que\x20alcanzaste\x20tu\x20límite\x20de\x20dispositivos\x20conectados.\x20Por\x20favor,\x20actualiza\x20tu\x20membresía.');return;}}_0x171a86['companyId']=_0x471a44,_0x518410[_0x5e12ac(0xd6)]({'userId':_0x53bceb,'socketId':_0x171a86['id']}),connectedEmployees[_0x471a44]=_0x518410;const _0x1414ce=await chat[_0x5e12ac(0xdd)](_0x53bceb,0xa);io['to'](_0x53bceb)[_0x5e12ac(0xe5)](_0x5e12ac(0xcc),{'notifications':_0x1414ce});});async function _0x135f50(_0x2d5f17){const _0x4b150d=_0x506760,_0x52a2d5=users[_0x2d5f17];let _0x514393=_0x52a2d5;!_0x52a2d5&&(_0x514393=await chat[_0x4b150d(0x85)](toUserId));const _0x4af14b={'canSend':_0x514393,'theUserIsConnect':_0x52a2d5};return _0x4af14b;}_0x171a86['on'](_0x506760(0x138),async({userEmail:_0x34115a,toUserEmail:_0x151831,message:_0x6f3616})=>{const _0x41bec5=_0x506760,_0x224735=await _0x135f50(_0x151831);_0x224735[_0x41bec5(0x144)]?await chat[_0x41bec5(0x11d)](_0x34115a,_0x151831,_0x6f3616)?(_0x224735[_0x41bec5(0x12b)]&&io['to'](recipientSocketId)[_0x41bec5(0xe5)](_0x41bec5(0x8a),{'userId':userId,'message':_0x6f3616}),_0x171a86['emit'](_0x41bec5(0xc9),{'success':!![],'message':_0x41bec5(0x114)})):_0x171a86[_0x41bec5(0xe5)]('messageStatus',{'success':![],'message':'No\x20pudimos\x20enviar\x20el\x20mensaje\x20al\x20usuario\x20\x27'+_0x151831+_0x41bec5(0x133)}):_0x171a86['emit'](_0x41bec5(0xc9),{'success':![],'message':_0x41bec5(0x96)+_0x151831+_0x41bec5(0x11a)});}),_0x171a86['on']('getTheFirstTenNotifications',async({userEmail:_0x1130b0})=>{const _0x5c7f66=_0x506760,_0x1af29e=await chat[_0x5c7f66(0xdd)](_0x1130b0,0xa);io['to'](recipientSocketId)['emit'](_0x5c7f66(0xcc),{'notifications':_0x1af29e});}),_0x171a86['on']('sendMessageToUser',async({userId:_0x4bc891,toUserId:_0x4a1666,message:_0x285d4e})=>{const _0x2cddff=_0x506760,_0xa5cc88=users[_0x4a1666];let _0x2420bc=_0xa5cc88;!_0xa5cc88&&(_0x2420bc=await chat[_0x2cddff(0x85)](_0x4a1666));if(_0x2420bc){const _0x23a4d1=await chat[_0x2cddff(0x13f)](_0x4bc891,_0x4a1666);await chat[_0x2cddff(0xdf)](_0x23a4d1,_0x4bc891,_0x285d4e)&&(_0xa5cc88&&io['to'](_0xa5cc88)[_0x2cddff(0xe5)]('privateMessage',{'userId':_0x4bc891,'message':_0x285d4e})),_0x171a86[_0x2cddff(0xe5)](_0x2cddff(0xc9),{'success':!![],'message':'Mensaje\x20enviado\x20con\x20éxito'});}else _0x171a86[_0x2cddff(0xe5)]('messageStatus',{'success':![],'message':_0x2cddff(0xd3)+_0x4a1666+'\x27\x20no\x20existe\x20🤔'});}),_0x171a86['on'](_0x506760(0x118),()=>{const _0x373e94=_0x506760,{companyId:_0x51a642}=_0x171a86;_0x51a642&&connectedEmployees[_0x51a642]?(connectedEmployees[_0x51a642]=connectedEmployees[_0x51a642]['filter'](_0x262c4d=>_0x262c4d[_0x373e94(0x135)]!==_0x171a86['id']),connectedEmployees[_0x51a642]['length']===0x0&&delete connectedEmployees[_0x51a642]):console[_0x373e94(0xbd)](_0x373e94(0xc3)+_0x171a86['id']+_0x373e94(0xc6));}),_0x171a86['on'](_0x506760(0xf6),_0x452a67=>{const _0x5d1763=_0x506760;console[_0x5d1763(0xbd)]('Nueva\x20notificación:',_0x452a67),_0x171a86[_0x5d1763(0xc2)][_0x5d1763(0xe5)](_0x5d1763(0xbc),_0x452a67);});});const companyName=_0x356515(0x91);serverExpress['use'](require(_0x356515(0xe1))),serverExpress[_0x356515(0xc5)](require(_0x356515(0x13c))),serverExpress['use'](companyName,require('./router/links')),serverExpress[_0x356515(0xc5)](companyName,require(_0x356515(0x89))),serverExpress[_0x356515(0xc5)](companyName,require(_0x356515(0x13e))),serverExpress[_0x356515(0xc5)](companyName,require(_0x356515(0x11c))),serverExpress[_0x356515(0xc5)](companyName,require(_0x356515(0xca))),serverExpress[_0x356515(0xc5)](companyName,require(_0x356515(0x90))),serverExpress[_0x356515(0xc5)](companyName,require(_0x356515(0x125))),serverExpress['use'](companyName,require(_0x356515(0xbe))),serverExpress[_0x356515(0xc5)](companyName,require(_0x356515(0x119))),serverExpress[_0x356515(0xc5)](companyName,require(_0x356515(0xd4))),serverExpress[_0x356515(0xc5)](companyName,require(_0x356515(0x11b))),serverExpress[_0x356515(0xc5)](companyName,require(_0x356515(0xdb))),serverExpress[_0x356515(0xc5)](require('./lib/addFrom')),serverExpress[_0x356515(0xc5)](express[_0x356515(0x100)](path[_0x356515(0x97)](__dirname,_0x356515(0x80))));const os=require('os');function getLocalIP(){const _0x2ac5b3=_0x356515,_0x2213c4=os['networkInterfaces']();for(let _0x36f1cd in _0x2213c4){for(let _0x147aee=0x0;_0x147aee<_0x2213c4[_0x36f1cd]['length'];_0x147aee++){const _0x266b93=_0x2213c4[_0x36f1cd][_0x147aee];if(_0x266b93[_0x2ac5b3(0xef)]===_0x2ac5b3(0x117)&&!_0x266b93[_0x2ac5b3(0x122)])return _0x266b93[_0x2ac5b3(0xb4)];}}return _0x2ac5b3(0xf7);}const mysql=require(_0x356515(0xb3)),{promisify}=require('util'),pool=mysql[_0x356515(0x10c)]({'host':'193.203.166.165','user':'u995592926_bestpoint','password':_0x356515(0xd1),'database':_0x356515(0xa8),'waitForConnections':!![],'connectionLimit':0xa,'queueLimit':0x0});pool[_0x356515(0x8c)]((_0x221905,_0x30b8e6)=>{const _0x46a4ef=_0x356515;_0x221905&&(_0x221905['code']===_0x46a4ef(0x9f)&&console[_0x46a4ef(0xa2)]('La\x20conexión\x20a\x20la\x20base\x20de\x20datos\x20fue\x20cerrada.'),_0x221905[_0x46a4ef(0xe7)]===_0x46a4ef(0xb2)&&console[_0x46a4ef(0xa2)]('La\x20base\x20de\x20datos\x20tiene\x20muchas\x20conexiones.'),_0x221905[_0x46a4ef(0xe7)]===_0x46a4ef(0xa9)&&console[_0x46a4ef(0xa2)](_0x46a4ef(0xa3)));_0x30b8e6&&(_0x30b8e6[_0x46a4ef(0x13d)](),console[_0x46a4ef(0xbd)]('Conexión\x20a\x20la\x20base\x20de\x20datos\x20exitosa\x20MYSQL.'));return;}),pool['query']=promisify(pool['query']);let mainWindow,activationWindow,loginWindow;const createMainWindow=()=>{const _0x570daf=_0x356515;mainWindow=new BrowserWindow({'width':0x320,'height':0x258}),mainWindow[_0x570daf(0xfe)](),mainWindow[_0x570daf(0xcd)](_0x570daf(0xb5)+serverExpress[_0x570daf(0x111)](_0x570daf(0x116)));},createMainWindowRegister=()=>{const _0x163835=_0x356515;loginWindow=new BrowserWindow({'width':0x320,'height':0x258,'parent':mainWindow,'webPreferences':{'preload':path['join'](__dirname,_0x163835(0xc1)),'nodeIntegration':!![],'contextIsolation':![]}}),loginWindow[_0x163835(0xfe)](),loginWindow[_0x163835(0xc7)](path[_0x163835(0x97)](__dirname,'activation.html'));},{machineIdSync}=require(_0x356515(0xbb)),deviceId=machineIdSync();ipcMain['on'](_0x356515(0x104),async(_0x239bbd,_0x23214a)=>{const _0x5c35dd=_0x356515,_0x74dc91=_0x23214a[_0x5c35dd(0xfc)],_0x276b0e=await see_if_exist_this_token_in_the_database_of_the_web(_0x74dc91);if(_0x276b0e['token']){let _0x5b8454=!![];_0x276b0e[_0x5c35dd(0xa4)]&&(_0x276b0e[_0x5c35dd(0xa4)]!==deviceId&&(_0x276b0e['message']=_0x5c35dd(0x92),_0x5b8454=![])),_0x5b8454&&(await save_the_uui_of_the_user_in_the_database(_0x74dc91,deviceId)&&(await initialize_token(_0x74dc91),await create_expiration_date_of_the_token(_0x276b0e[_0x5c35dd(0xd7)]),_0x276b0e['message']=_0x5c35dd(0xe6)));}_0x239bbd[_0x5c35dd(0x132)](_0x5c35dd(0xae),_0x276b0e[_0x5c35dd(0x98)]);}),ipcMain['on'](_0x356515(0xd5),async(_0x331ad7,_0x3b179c)=>{const _0x586ba1=_0x356515,_0xe06722=_0x3b179c['username'],_0x2c59ee=_0x3b179c[_0x586ba1(0x147)],_0x1a7571=await see_if_exist_this_user_in_the_database_of_the_web(_0xe06722,_0x2c59ee);if(_0x1a7571[_0x586ba1(0xfc)]){if(_0x1a7571['uuid']&&_0x1a7571['uuid']!==deviceId)_0x1a7571['message']=_0x586ba1(0x92);else{if(await save_the_uui_of_the_user_in_the_database(_0xe06722,deviceId)){}}}_0x331ad7[_0x586ba1(0x132)](_0x586ba1(0xa5),_0x1a7571[_0x586ba1(0x98)]);});const bcrypt=require(_0x356515(0xf9));async function see_if_exist_this_user_in_the_database_of_the_web(_0x11ce80,_0x35836b){const _0xe2d024=_0x356515,_0x48d58e=_0xe2d024(0x13a);try{const _0xfd7d2a=await pool[_0xe2d024(0x10a)](_0x48d58e,[_0x11ce80]);if(_0xfd7d2a[_0xe2d024(0xfa)]===0x0)return{'token':null,'message':'Usuario\x20no\x20encontrado.'};const _0xc147a8=_0xfd7d2a[0x0],_0x206784=await bcrypt['compare'](_0x35836b,_0xc147a8[_0xe2d024(0xde)]);if(!_0x206784)return{'token':null,'message':_0xe2d024(0x10d)};const _0x1e225a=new Date();_0x1e225a[_0xe2d024(0x9e)](_0x1e225a['getFullYear']()-0x1);if(new Date(_0xc147a8[_0xe2d024(0xd7)])<_0x1e225a)return{'token':null,'message':'Suscripción\x20expirada.\x20Por\x20favor,\x20vuelve\x20a\x20activar\x20tu\x20membresía.'};return console[_0xe2d024(0xbd)](_0xe2d024(0xd9)),{'token':_0xc147a8[_0xe2d024(0xfc)],'type_membresy':_0xc147a8['type_membresy'],'message':'Usuario\x20autenticado\x20con\x20éxito.'};}catch(_0x54d81f){return console[_0xe2d024(0xa2)](_0xe2d024(0x87),_0x54d81f),{'token':null};}}async function see_if_exist_this_token_in_the_database_of_the_web(_0x3bb712){const _0x1cd342=_0x356515,_0x40cf1d=_0x1cd342(0xf8);try{const _0x3ed0d2=await pool[_0x1cd342(0x10a)](_0x40cf1d,[_0x3bb712]);if(_0x3ed0d2[_0x1cd342(0xfa)]===0x0)return{'token':null,'message':_0x1cd342(0x13b)};const _0x5f5856=_0x3ed0d2[0x0],_0x222d46=new Date();_0x222d46[_0x1cd342(0x9e)](_0x222d46['getFullYear']()-0x1);if(_0x5f5856[_0x1cd342(0xd7)]!=_0x1cd342(0x8b)&&new Date(_0x5f5856[_0x1cd342(0xd7)])<_0x222d46)return{'token':null,'message':'Suscripción\x20expirada.\x20Por\x20favor,\x20vuelve\x20a\x20activar\x20tu\x20membresía.'};if(_0x5f5856[_0x1cd342(0xd7)]==='0000-00-00'){const _0x31050c=new Date();_0x31050c[_0x1cd342(0x9e)](_0x31050c[_0x1cd342(0x7c)]()+0x1);const _0x278b93=_0x1cd342(0xaa);await pool[_0x1cd342(0x10a)](_0x278b93,[_0x31050c[_0x1cd342(0x7f)]()[_0x1cd342(0x139)]('T')[0x0],_0x5f5856[_0x1cd342(0xfc)]]),_0x5f5856[_0x1cd342(0xd7)]=_0x31050c;}return console[_0x1cd342(0xbd)](_0x1cd342(0xd9)),{'token':!![],'type_membresy':_0x5f5856['type_membresy'],'uuid':_0x5f5856[_0x1cd342(0x131)],'activation_date':_0x5f5856['activation_date'],'message':'Usuario\x20autenticado\x20con\x20éxito.'};}catch(_0xc15c6a){return console[_0x1cd342(0xa2)](_0x1cd342(0x87),_0xc15c6a),{'token':null};}}async function save_the_uui_of_the_user_in_the_database(_0x52d464,_0x3e854f){const _0x1d4f53=_0x356515,_0x34eef0=_0x1d4f53(0xa6);try{const _0x262334=await pool['query'](_0x34eef0,[_0x3e854f,_0x52d464]);return!![];}catch(_0x2059eb){return console[_0x1d4f53(0xa2)](_0x1d4f53(0xbf),_0x2059eb),![];}}async function verificarTokenActivo(){const _0x5f0340=_0x356515,_0x4763ab=_0x5f0340(0xcf);try{const _0x2818c8=await pool['query'](_0x4763ab,[TOKEN]);return console[_0x5f0340(0xbd)](_0x2818c8[0x0]),_0x2818c8[0x0][_0x5f0340(0x7d)]===0x1?(console[_0x5f0340(0xbd)](_0x5f0340(0xf3)),!![]):(console['log'](_0x5f0340(0x8d)),![]);}catch(_0x2e8aca){return console[_0x5f0340(0xa2)](_0x5f0340(0x145),_0x2e8aca),![];}}async function actualizarToken(){const _0x6f5d55=_0x356515,_0x522eda=_0x6f5d55(0x108);await pool['query'](_0x522eda,[TOKEN]);}app['on'](_0x356515(0x95),async()=>{const _0x48bf0c=_0x356515;await check_if_exist_updates();if(thiIsADemo){await initialize_demo();if(await is_demo_expired()){dialog[_0x48bf0c(0xb9)]({'type':_0x48bf0c(0xe0),'title':_0x48bf0c(0x12a),'message':_0x48bf0c(0x99)}),app[_0x48bf0c(0x121)]();return;}}else await verify_membership_of_user()?(serverExpress[_0x48bf0c(0x123)](serverExpress['get'](_0x48bf0c(0x116)),_0x48bf0c(0xb1),()=>{const _0x4411df=_0x48bf0c;console['log'](_0x4411df(0xe2)+getLocalIP()+':'+serverExpress[_0x4411df(0x111)](_0x4411df(0x116)));}),createMainWindow()):createMainWindowRegister();}),app['on']('window-all-closed',()=>{const _0xc42b1e=_0x356515;process['platform']!==_0xc42b1e(0xd2)&&app[_0xc42b1e(0x121)]();});