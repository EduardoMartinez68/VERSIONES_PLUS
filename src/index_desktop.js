const _0x426b7a=_0x4695;function _0x1057(){const _0x266fa2=['Error\x20al\x20agregar\x20el\x20repositorio\x20remoto','device_id','loadURL','Se\x20ha\x20descargado\x20una\x20nueva\x20versión.\x20Reinicia\x20la\x20aplicación\x20para\x20aplicar\x20los\x20cambios.','filter','false','express','connect-flash','engine','views','family','locals','send_new_message','La\x20conexión\x20a\x20la\x20base\x20de\x20datos\x20fue\x20cerrada.','sendNotification','public','image','Error\x20al\x20verificar\x20el\x20token:','No\x20pudimos\x20enviar\x20el\x20mensaje\x20al\x20usuario\x20\x27','ready','Reiniciar\x20ahora','55FnCHSL','PORT','./router/links/CRM','Este\x20email\x20\x27','./router/authentication','newNotification','privateMessage','Token\x20encontrado\x20y\x20activo.','20EMhcti','0000-00-00','layouts','La\x20demo\x20ha\x20expirado.','length','Conexión\x20a\x20la\x20base\x20de\x20datos\x20exitosa\x20MYSQL.','reply','808225upXJvj','initialize','activation.html','./router/links','socketId','Bobesponja48*','active','get_max_employee_of_this_company','225354KZTUsM','networkInterfaces','node-machine-id','company','init','./router/links/delivery','https://github.com/EduardoMartinez68/VERSIONES_PLUS','static','platform','✅\x20La\x20aplicación\x20ya\x20está\x20actualizada.','Error\x20al\x20actualizar\x20el\x20UUID\x20del\x20dispositivo:','socket.io','code','Ups,\x20parece\x20que\x20alcanzaste\x20tu\x20límite\x20de\x20dispositivos\x20conectados.\x20Por\x20favor,\x20actualiza\x20tu\x20membresía.','Nueva\x20notificación:','origin','getFullYear','multer','./router','./router/links/cashCut','Suscripción\x20expirada.\x20Por\x20favor,\x20vuelve\x20a\x20activar\x20tu\x20membresía.','express-recaptcha','compare','quit','addRemote','\x27\x20no\x20existe\x20🤔','activation_date','installDemo','relaunch','./router/links/app','partials','login-from-render','extname','./lib/editFrom','stack','/main','use','messageStatus','./router/links/branch','listen','PROTOCOL_CONNECTION_LOST','user','\x20desconectado,\x20pero\x20no\x20estaba\x20asociado\x20a\x20ninguna\x20empresa.','./router/links/ceo','uuid','16XEeJvU','env','sendNotificationToUser','type_membresy','main','expirationDateOFTheToken','Error\x20al\x20verificar\x20usuario:','1100FOHzUM','\x0a\x20\x20\x20\x20\x20\x20\x20\x20UPDATE\x20pagos\x20\x0a\x20\x20\x20\x20\x20\x20\x20\x20SET\x20active\x20=\x20false\x0a\x20\x20\x20\x20\x20\x20\x20\x20WHERE\x20token\x20=\x20?\x0a\x20\x20\x20\x20','./lib/system','Pool','set','session','data','213353nxrwBc','urlencoded','catch','emit','createServer','Contraseña\x20incorrecta.','removeItem','join','latest','dotenv','Actualización','installDate','\x0a\x20\x20\x20\x20\x20\x20\x20\x20SELECT\x20*\x20FROM\x20pagos\x20\x0a\x20\x20\x20\x20\x20\x20\x20\x20WHERE\x20token\x20=\x20?\x0a\x20\x20\x20\x20','simple-git','No\x20se\x20encontró\x20la\x20fecha\x20de\x20instalación','reset','Socket\x20','Mensaje\x20enviado\x20con\x20éxito.\x20👌','query','ECONNREFUSED','desktop','Datos\x20actualizados\x20con\x20éxito.\x20Cierra\x20y\x20vuelve\x20a\x20abrir\x20el\x20programa\x20😄','Token\x20no\x20encontrado.','flash','1605990HdcVKI','port','window-all-closed','error','./services/chat.js','El\x20usuario\x20\x27','Error\x20verificando\x20actualizaciones:\x20','El\x20token\x20no\x20está\x20activo\x20o\x20no\x20existe.','La\x20demo\x20aún\x20está\x20activa.','canSend','1268190gDDnuh','pack_company','this_email_exist','address','http','Este\x20usuario\x20ya\x20tiene\x20un\x20TOKEN\x20registrado\x20en\x20un\x20equipo.','connect-pg-simple','answer-from-login-render-token','hash','login-from-render-token','utf8','--hard','release','some','2361MBbQru','getTheFirstTenNotifications','setFullYear','view\x20engine','loadFile','installToken','success','toISOString','IPv4','\x27\x20no\x20existe.\x20🤔','❌\x20Error\x20verificando\x20actualizaciones:','info','u995592926_bestpoint','privateNotifications','Usuario\x20autenticado\x20con\x20éxito.','3517lLTxig','diskStorage','token','username','./router/links/subscription','util','maximize','Tu\x20demo\x20de\x2030\x20días\x20ha\x20expirado.\x20Por\x20favor,\x20compra\x20la\x20versión\x20completa\x20y\x20sigue\x20creciendo\x20con\x20ED\x20PLUS\x20🚀.','express-session','Ups,\x20parece\x20que\x20ya\x20estás\x20conectado\x20en\x20otro\x20dispositivo.','installToken\x20eliminado','split','.hbs','Demo\x20Expirada','./router/links/desktop','sendMessageToUser','./keys','log','\x0a\x20\x20\x20\x20\x20\x20\x20\x20SELECT\x20token,\x20type_membresy,\x20password\x20AS\x20hashedPassword,\x20activation_date\x20\x0a\x20\x20\x20\x20\x20\x20\x20\x20FROM\x20users\x20\x0a\x20\x20\x20\x20\x20\x20\x20\x20WHERE\x20email\x20=\x20?\x0a\x20\x20\x20\x20','193.203.166.165','get_the_first_notification','message','internal','hashedPassword','get','create_notification','answer-from-login-render','companyId','Fecha\x20de\x20instalación\x20guardada:','127.0.0.1','warning','logfile.txt','connectionRejected','Error\x20verificando\x20actualizaciones!','🔄\x20Nueva\x20versión\x20encontrada,\x20actualizando...'];_0x1057=function(){return _0x266fa2;};return _0x1057();}(function(_0xa15f46,_0xe2add0){const _0x41c58f=_0x4695,_0x58e48a=_0xa15f46();while(!![]){try{const _0x1f01b9=parseInt(_0x41c58f(0xeb))/0x1*(parseInt(_0x41c58f(0x12b))/0x2)+-parseInt(_0x41c58f(0xdc))/0x3*(-parseInt(_0x41c58f(0x16e))/0x4)+parseInt(_0x41c58f(0x123))/0x5*(parseInt(_0x41c58f(0x13a))/0x6)+-parseInt(_0x41c58f(0x175))/0x7*(parseInt(_0x41c58f(0x167))/0x8)+-parseInt(_0x41c58f(0xce))/0x9+-parseInt(_0x41c58f(0x18d))/0xa+-parseInt(_0x41c58f(0x132))/0xb;if(_0x1f01b9===_0xe2add0)break;else _0x58e48a['push'](_0x58e48a['shift']());}catch(_0x27d3a1){_0x58e48a['push'](_0x58e48a['shift']());}}}(_0x1057,0x37dc2));const system=require(_0x426b7a(0x170)),thiIsADemo=![],{app,BrowserWindow,dialog,ipcMain}=require('electron'),express=require(_0x426b7a(0x114)),morgan=require('morgan'),{engine}=require('express-handlebars'),multer=require(_0x426b7a(0x14b)),flash=require(_0x426b7a(0x115)),session=require(_0x426b7a(0xf3)),passport=require('passport'),{database}=require(_0x426b7a(0xfb)),{v4:uuid}=require(_0x426b7a(0x166)),path=require('path'),{RecaptchaV2}=require(_0x426b7a(0x14f)),nodePersist=require('node-persist');nodePersist[_0x426b7a(0x13e)]({'dir':path[_0x426b7a(0x17c)](__dirname,_0x426b7a(0x174))});async function initialize_software(){const _0x203dcc=_0x426b7a,_0x30cb27=await nodePersist[_0x203dcc(0x103)](_0x203dcc(0xe1));!_0x30cb27&&await nodePersist[_0x203dcc(0x172)]('installToken',_0x203dcc(0x113));}async function the_software_have_a_token(){const _0x4f8364=_0x426b7a,_0x27493c=await nodePersist['get'](_0x4f8364(0xe1));if(!_0x27493c)return![];return _0x27493c!=_0x4f8364(0x113);}async function create_expiration_date_of_the_token(_0x1989f7){const _0x28d59f=_0x426b7a,_0x18453e=await nodePersist['get'](_0x28d59f(0x16c));!_0x18453e&&await nodePersist['set']('expirationDateOFTheToken',_0x1989f7);}async function token_expired(){const _0x2b1682=_0x426b7a,_0x5bdfe5=await nodePersist[_0x2b1682(0x103)](_0x2b1682(0x16c)),_0x13f5a2=new Date(_0x5bdfe5),_0x91cabf=new Date();return _0x91cabf<_0x13f5a2;}async function remove_install_token(){const _0x26f4ca=_0x426b7a;await nodePersist[_0x26f4ca(0x17b)](_0x26f4ca(0xe1)),await nodePersist[_0x26f4ca(0x17b)](_0x26f4ca(0x16c)),console[_0x26f4ca(0xfc)](_0x26f4ca(0xf5));}async function initialize_token(_0x5697f8){const _0x2e156f=_0x426b7a,_0x5a8eec=await nodePersist[_0x2e156f(0x103)](_0x2e156f(0xe1));await nodePersist[_0x2e156f(0x172)](_0x2e156f(0xe1),_0x5697f8);}async function initialize_demo(){const _0x1c0634=_0x426b7a,_0x235658=await nodePersist[_0x1c0634(0x103)]('installDemo');if(!_0x235658){const _0x5a17c2=new Date()[_0x1c0634(0xe3)]();await nodePersist[_0x1c0634(0x172)](_0x1c0634(0x180),_0x5a17c2),console[_0x1c0634(0xfc)](_0x1c0634(0x107),_0x5a17c2);}else console[_0x1c0634(0xfc)]('Fecha\x20de\x20instalación\x20existente:',_0x235658);}async function is_demo_expired(){const _0x4eb8f0=_0x426b7a,_0x253565=await nodePersist[_0x4eb8f0(0x103)](_0x4eb8f0(0x155));if(!_0x253565)return console[_0x4eb8f0(0xfc)](_0x4eb8f0(0x183)),![];const _0x59360c=new Date(_0x253565),_0x28927c=new Date(),_0x4a0fcd=_0x28927c-_0x59360c,_0x2c2b21=_0x4a0fcd/(0x3e8*0x3c*0x3c*0x18);return _0x2c2b21>0x1e?(console['log'](_0x4eb8f0(0x12e)),!![]):(console[_0x4eb8f0(0xfc)](_0x4eb8f0(0xcc)),![]);}async function this_software_count_have_a_count(){}async function the_user_have_a_token_active_in_the_database(){}async function verify_membership_of_user(){initialize_software();if(await the_software_have_a_token())return await token_expired();return![];}const simpleGit=require(_0x426b7a(0x182)),fs=require('fs'),repoPath=path[_0x426b7a(0x17c)](__dirname),git=simpleGit(repoPath),repoURL=_0x426b7a(0x140),remote='origin';git[_0x426b7a(0x152)](remote,repoURL)['then'](()=>{const _0x445554=_0x426b7a;console[_0x445554(0xfc)]('Repositorio\x20remoto\x20configurado\x20correctamente');})[_0x426b7a(0x177)](_0x2772e2=>{const _0x46b48f=_0x426b7a;console[_0x46b48f(0x190)](_0x46b48f(0x10e),_0x2772e2);});async function check_if_exist_updates(){const _0x15b27a=_0x426b7a;try{await git['fetch'](remote);const _0x387245=await git[_0x15b27a(0xfc)]([remote+_0x15b27a(0x15d),'-1']),_0x46ddef=await git['log'](['HEAD','-1']);_0x387245['latest'][_0x15b27a(0xd6)]!==_0x46ddef[_0x15b27a(0x17d)][_0x15b27a(0xd6)]?(console[_0x15b27a(0xfc)](_0x15b27a(0x10d)),await git['raw']([_0x15b27a(0x184),_0x15b27a(0xd9),remote+_0x15b27a(0x15d)]),await git['pull'](_0x15b27a(0x149),_0x15b27a(0x16b),{'--rebase':null}),dialog['showMessageBoxSync']({'type':_0x15b27a(0xe7),'title':_0x15b27a(0x17f),'message':_0x15b27a(0x111),'buttons':[_0x15b27a(0x122)]}),app[_0x15b27a(0x156)](),app['quit']()):console['log'](_0x15b27a(0x143));}catch(_0x84493e){const _0x51d168=path[_0x15b27a(0x17c)](__dirname,_0x15b27a(0x10a));fs['appendFileSync'](_0x51d168,_0x15b27a(0x193)+_0x84493e[_0x15b27a(0x100)]+'\x0a'+_0x84493e[_0x15b27a(0x15c)]+'\x0a\x0a',_0x15b27a(0xd8)),console[_0x15b27a(0x190)](_0x15b27a(0xe6),_0x84493e),dialog['showMessageBoxSync']({'type':_0x15b27a(0x109),'title':_0x15b27a(0x10c),'message':_0x15b27a(0x193)+_0x84493e[_0x15b27a(0x100)]+'\x0a'+_0x84493e[_0x15b27a(0x15c)]+'\x0a\x0a'});}}const serverExpress=express();require('./lib/passport'),require(_0x426b7a(0x15b)),serverExpress[_0x426b7a(0x172)](_0x426b7a(0x18e),process[_0x426b7a(0x168)][_0x426b7a(0x124)]||0xfa0),serverExpress['set'](_0x426b7a(0x117),path[_0x426b7a(0x17c)](__dirname,_0x426b7a(0x117))),serverExpress[_0x426b7a(0x116)](_0x426b7a(0xf7),engine({'defaultLayout':_0x426b7a(0x16b),'layoutsDir':path[_0x426b7a(0x17c)](serverExpress[_0x426b7a(0x103)](_0x426b7a(0x117)),_0x426b7a(0x12d)),'partialsDir':path[_0x426b7a(0x17c)](serverExpress['get'](_0x426b7a(0x117)),_0x426b7a(0x158)),'extname':_0x426b7a(0xf7),'helpers':require('./lib/handlebars')})),serverExpress[_0x426b7a(0x172)](_0x426b7a(0xdf),_0x426b7a(0xf7)),require(_0x426b7a(0x17e))['config']();const {APP_PG_USER,APP_PG_HOST,APP_PG_DATABASE,APP_PG_PASSWORD,APP_PG_PORT,TOKEN}=process[_0x426b7a(0x168)],pg=require('pg'),pgPool=new pg[(_0x426b7a(0x171))]({'user':APP_PG_USER,'host':APP_PG_HOST,'database':APP_PG_DATABASE,'password':APP_PG_PASSWORD,'port':APP_PG_PORT});serverExpress[_0x426b7a(0x15e)](session({'secret':'FudSession','resave':![],'saveUninitialized':![],'store':new(require(_0x426b7a(0xd4))(session))({'pool':pgPool,'tableName':_0x426b7a(0x173)})})),serverExpress[_0x426b7a(0x15e)](flash()),serverExpress[_0x426b7a(0x15e)](morgan('dev')),serverExpress[_0x426b7a(0x15e)](express[_0x426b7a(0x176)]({'extended':![]})),serverExpress[_0x426b7a(0x15e)](express['json']()),serverExpress[_0x426b7a(0x15e)](passport[_0x426b7a(0x133)]()),serverExpress['use'](passport[_0x426b7a(0x173)]());const storage=multer[_0x426b7a(0xec)]({'destination':path['join'](__dirname,'public/img/uploads'),'filename':(_0x335149,_0x38aef0,_0x7938a8,_0x5b3f9c)=>{const _0x28ae5c=_0x426b7a;_0x7938a8(null,uuid()+path[_0x28ae5c(0x15a)](_0x38aef0['originalname']));}});serverExpress[_0x426b7a(0x15e)](multer({'storage':storage})['single'](_0x426b7a(0x11e))),serverExpress['use']((_0x49a836,_0x464efd,_0x47d683)=>{const _0x13e08e=_0x426b7a;serverExpress[_0x13e08e(0x119)][_0x13e08e(0xe2)]=_0x49a836[_0x13e08e(0x18c)](_0x13e08e(0xe2)),serverExpress[_0x13e08e(0x119)]['message']=_0x49a836['flash'](_0x13e08e(0x100)),serverExpress[_0x13e08e(0x119)][_0x13e08e(0x163)]=_0x49a836[_0x13e08e(0x163)],serverExpress['locals'][_0x13e08e(0x13d)]=_0x49a836['company'],serverExpress[_0x13e08e(0x119)][_0x13e08e(0xcf)]=0x0,serverExpress[_0x13e08e(0x119)]['pack_branch']=0x0,_0x47d683();});const http=require(_0x426b7a(0xd2)),server=http[_0x426b7a(0x179)](serverExpress),{Server}=require(_0x426b7a(0x145)),io=new Server(server),users={},connectedEmployees={},companyLimitsCache={},chat=require(_0x426b7a(0x191));io['on']('connection',async _0x1ead76=>{const _0x755017=_0x426b7a;_0x1ead76['on']('registerUser',async(_0x1b2fad,_0x281945)=>{const _0x4bbdee=_0x4695,_0x4beb1a=connectedEmployees[_0x281945]||[],_0x582ed3=_0x4beb1a[_0x4bbdee(0xdb)](_0x520418=>_0x520418['userId']===_0x1b2fad);if(_0x582ed3){_0x1ead76['emit'](_0x4bbdee(0x10b),_0x4bbdee(0xf4));return;}if(system!=_0x4bbdee(0x189)){!companyLimitsCache[_0x281945]&&(companyLimitsCache[_0x281945]=await chat[_0x4bbdee(0x139)](_0x281945));const _0x4b22d2=companyLimitsCache[_0x281945];if(_0x4beb1a[_0x4bbdee(0x12f)]>=_0x4b22d2){_0x1ead76[_0x4bbdee(0x178)]('connectionRejected',_0x4bbdee(0x147));return;}}_0x1ead76[_0x4bbdee(0x106)]=_0x281945,_0x4beb1a['push']({'userId':_0x1b2fad,'socketId':_0x1ead76['id']}),connectedEmployees[_0x281945]=_0x4beb1a;const _0x1b8098=await chat[_0x4bbdee(0xff)](_0x1b2fad,0xa);io['to'](_0x1b2fad)['emit'](_0x4bbdee(0xe9),{'notifications':_0x1b8098});});async function _0x288123(_0xfcca15){const _0x110d38=_0x4695,_0x5793c1=users[_0xfcca15];let _0x3e3e32=_0x5793c1;!_0x5793c1&&(_0x3e3e32=await chat[_0x110d38(0xd0)](toUserId));const _0x155477={'canSend':_0x3e3e32,'theUserIsConnect':_0x5793c1};return _0x155477;}_0x1ead76['on'](_0x755017(0x169),async({userEmail:_0x57ec7e,toUserEmail:_0x250311,message:_0x3ad292})=>{const _0x4ef45c=_0x755017,_0x2cc565=await _0x288123(_0x250311);_0x2cc565[_0x4ef45c(0xcd)]?await chat[_0x4ef45c(0x104)](_0x57ec7e,_0x250311,_0x3ad292)?(_0x2cc565['theUserIsConnect']&&io['to'](recipientSocketId)[_0x4ef45c(0x178)](_0x4ef45c(0x129),{'userId':userId,'message':_0x3ad292}),_0x1ead76[_0x4ef45c(0x178)](_0x4ef45c(0x15f),{'success':!![],'message':_0x4ef45c(0x186)})):_0x1ead76[_0x4ef45c(0x178)](_0x4ef45c(0x15f),{'success':![],'message':_0x4ef45c(0x120)+_0x250311+'\x27.\x20Inténtalo\x20de\x20nuevo.\x20😳'}):_0x1ead76[_0x4ef45c(0x178)](_0x4ef45c(0x15f),{'success':![],'message':_0x4ef45c(0x192)+_0x250311+_0x4ef45c(0xe5)});}),_0x1ead76['on'](_0x755017(0xdd),async({userEmail:_0x58bdb4})=>{const _0x528ac7=_0x755017,_0x351e3f=await chat[_0x528ac7(0xff)](_0x58bdb4,0xa);io['to'](recipientSocketId)[_0x528ac7(0x178)](_0x528ac7(0xe9),{'notifications':_0x351e3f});}),_0x1ead76['on'](_0x755017(0xfa),async({userId:_0x1dd0aa,toUserId:_0x1b22d8,message:_0x2aceab})=>{const _0x5c4df0=_0x755017,_0x2f7e18=users[_0x1b22d8];let _0x1b4705=_0x2f7e18;!_0x2f7e18&&(_0x1b4705=await chat['this_email_exist'](_0x1b22d8));if(_0x1b4705){const _0x5ad1a0=await chat['create_new_chat'](_0x1dd0aa,_0x1b22d8);await chat[_0x5c4df0(0x11a)](_0x5ad1a0,_0x1dd0aa,_0x2aceab)&&(_0x2f7e18&&io['to'](_0x2f7e18)[_0x5c4df0(0x178)](_0x5c4df0(0x129),{'userId':_0x1dd0aa,'message':_0x2aceab})),_0x1ead76['emit']('messageStatus',{'success':!![],'message':'Mensaje\x20enviado\x20con\x20éxito'});}else _0x1ead76[_0x5c4df0(0x178)](_0x5c4df0(0x15f),{'success':![],'message':_0x5c4df0(0x126)+_0x1b22d8+_0x5c4df0(0x153)});}),_0x1ead76['on']('disconnect',()=>{const _0x839f49=_0x755017,{companyId:_0x1fcfde}=_0x1ead76;_0x1fcfde&&connectedEmployees[_0x1fcfde]?(connectedEmployees[_0x1fcfde]=connectedEmployees[_0x1fcfde][_0x839f49(0x112)](_0x87cef6=>_0x87cef6[_0x839f49(0x136)]!==_0x1ead76['id']),connectedEmployees[_0x1fcfde][_0x839f49(0x12f)]===0x0&&delete connectedEmployees[_0x1fcfde]):console[_0x839f49(0xfc)](_0x839f49(0x185)+_0x1ead76['id']+_0x839f49(0x164));}),_0x1ead76['on'](_0x755017(0x11c),_0x5bb756=>{const _0x50247e=_0x755017;console[_0x50247e(0xfc)](_0x50247e(0x148),_0x5bb756),_0x1ead76['broadcast'][_0x50247e(0x178)](_0x50247e(0x128),_0x5bb756);});});const companyName='/links';serverExpress[_0x426b7a(0x15e)](require(_0x426b7a(0x14c))),serverExpress['use'](require(_0x426b7a(0x127))),serverExpress[_0x426b7a(0x15e)](companyName,require(_0x426b7a(0x135))),serverExpress['use'](companyName,require('./router/links/fudone')),serverExpress['use'](companyName,require(_0x426b7a(0x165))),serverExpress[_0x426b7a(0x15e)](companyName,require(_0x426b7a(0x160))),serverExpress[_0x426b7a(0x15e)](companyName,require(_0x426b7a(0xef))),serverExpress[_0x426b7a(0x15e)](companyName,require('./router/links/store')),serverExpress[_0x426b7a(0x15e)](companyName,require(_0x426b7a(0x13f))),serverExpress['use'](companyName,require(_0x426b7a(0x157))),serverExpress[_0x426b7a(0x15e)](companyName,require(_0x426b7a(0x125))),serverExpress[_0x426b7a(0x15e)](companyName,require(_0x426b7a(0xf9))),serverExpress[_0x426b7a(0x15e)](companyName,require('./router/links/boutique')),serverExpress[_0x426b7a(0x15e)](companyName,require(_0x426b7a(0x14d))),serverExpress[_0x426b7a(0x15e)](require('./lib/addFrom')),serverExpress[_0x426b7a(0x15e)](express[_0x426b7a(0x141)](path[_0x426b7a(0x17c)](__dirname,_0x426b7a(0x11d))));const os=require('os');function getLocalIP(){const _0x67499c=_0x426b7a,_0x4cb941=os[_0x67499c(0x13b)]();for(let _0x704ef5 in _0x4cb941){for(let _0x4da3ba=0x0;_0x4da3ba<_0x4cb941[_0x704ef5]['length'];_0x4da3ba++){const _0x5b8af6=_0x4cb941[_0x704ef5][_0x4da3ba];if(_0x5b8af6[_0x67499c(0x118)]===_0x67499c(0xe4)&&!_0x5b8af6[_0x67499c(0x101)])return _0x5b8af6[_0x67499c(0xd1)];}}return _0x67499c(0x108);}function _0x4695(_0x13efd3,_0x42cb0a){const _0x10575b=_0x1057();return _0x4695=function(_0x4695e5,_0x129564){_0x4695e5=_0x4695e5-0xcb;let _0x105626=_0x10575b[_0x4695e5];return _0x105626;},_0x4695(_0x13efd3,_0x42cb0a);}const mysql=require('mysql'),{promisify}=require(_0x426b7a(0xf0)),pool=mysql['createPool']({'host':_0x426b7a(0xfe),'user':_0x426b7a(0xe8),'password':_0x426b7a(0x137),'database':'u995592926_bestpoint','waitForConnections':!![],'connectionLimit':0xa,'queueLimit':0x0});pool['getConnection']((_0x51270f,_0x149fdd)=>{const _0xb579d6=_0x426b7a;_0x51270f&&(_0x51270f[_0xb579d6(0x146)]===_0xb579d6(0x162)&&console[_0xb579d6(0x190)](_0xb579d6(0x11b)),_0x51270f['code']==='ER_CON_COUNT_ERROR'&&console['error']('La\x20base\x20de\x20datos\x20tiene\x20muchas\x20conexiones.'),_0x51270f[_0xb579d6(0x146)]===_0xb579d6(0x188)&&console['error']('La\x20conexión\x20a\x20la\x20base\x20de\x20datos\x20fue\x20rechazada.'));_0x149fdd&&(_0x149fdd[_0xb579d6(0xda)](),console[_0xb579d6(0xfc)](_0xb579d6(0x130)));return;}),pool[_0x426b7a(0x187)]=promisify(pool[_0x426b7a(0x187)]);let mainWindow,activationWindow,loginWindow;const createMainWindow=()=>{const _0x371151=_0x426b7a;mainWindow=new BrowserWindow({'width':0x320,'height':0x258}),mainWindow[_0x371151(0xf1)](),mainWindow[_0x371151(0x110)]('http://localhost:'+serverExpress[_0x371151(0x103)]('port'));},createMainWindowRegister=()=>{const _0xf5915c=_0x426b7a;loginWindow=new BrowserWindow({'width':0x320,'height':0x258,'parent':mainWindow,'webPreferences':{'preload':path[_0xf5915c(0x17c)](__dirname,'preload.js'),'nodeIntegration':!![],'contextIsolation':![]}}),loginWindow[_0xf5915c(0xf1)](),loginWindow[_0xf5915c(0xe0)](path[_0xf5915c(0x17c)](__dirname,_0xf5915c(0x134)));},{machineIdSync}=require(_0x426b7a(0x13c)),deviceId=machineIdSync();ipcMain['on'](_0x426b7a(0xd7),async(_0x3cbbe6,_0x897ffa)=>{const _0x7e95fe=_0x426b7a,_0x56c47f=_0x897ffa['token'],_0x115de2=await see_if_exist_this_token_in_the_database_of_the_web(_0x56c47f);if(_0x115de2[_0x7e95fe(0xed)]){let _0x249dc2=!![];_0x115de2['uuid']&&(_0x115de2['uuid']!==deviceId&&(_0x115de2[_0x7e95fe(0x100)]=_0x7e95fe(0xd3),_0x249dc2=![])),_0x249dc2&&(await save_the_uui_of_the_user_in_the_database(_0x56c47f,deviceId)&&(await initialize_token(_0x56c47f),await create_expiration_date_of_the_token(_0x115de2[_0x7e95fe(0x154)]),_0x115de2['message']=_0x7e95fe(0x18a)));}_0x3cbbe6['reply'](_0x7e95fe(0xd5),_0x115de2[_0x7e95fe(0x100)]);}),ipcMain['on'](_0x426b7a(0x159),async(_0x2e7628,_0x1f714d)=>{const _0x110c7d=_0x426b7a,_0x457698=_0x1f714d[_0x110c7d(0xee)],_0x28df87=_0x1f714d['password'],_0x23677a=await see_if_exist_this_user_in_the_database_of_the_web(_0x457698,_0x28df87);if(_0x23677a[_0x110c7d(0xed)]){if(_0x23677a[_0x110c7d(0x166)]&&_0x23677a[_0x110c7d(0x166)]!==deviceId)_0x23677a['message']=_0x110c7d(0xd3);else{if(await save_the_uui_of_the_user_in_the_database(_0x457698,deviceId)){}}}_0x2e7628[_0x110c7d(0x131)](_0x110c7d(0x105),_0x23677a['message']);});const bcrypt=require('bcrypt');async function see_if_exist_this_user_in_the_database_of_the_web(_0x21b733,_0xbcc8c7){const _0x167fdd=_0x426b7a,_0x3b98bd=_0x167fdd(0xfd);try{const _0x31735b=await pool[_0x167fdd(0x187)](_0x3b98bd,[_0x21b733]);if(_0x31735b['length']===0x0)return{'token':null,'message':'Usuario\x20no\x20encontrado.'};const _0x47b601=_0x31735b[0x0],_0x15f085=await bcrypt[_0x167fdd(0x150)](_0xbcc8c7,_0x47b601[_0x167fdd(0x102)]);if(!_0x15f085)return{'token':null,'message':_0x167fdd(0x17a)};const _0x410f90=new Date();_0x410f90[_0x167fdd(0xde)](_0x410f90['getFullYear']()-0x1);if(new Date(_0x47b601['activation_date'])<_0x410f90)return{'token':null,'message':_0x167fdd(0x14e)};return console[_0x167fdd(0xfc)](_0x167fdd(0xea)),{'token':_0x47b601[_0x167fdd(0xed)],'type_membresy':_0x47b601[_0x167fdd(0x16a)],'message':_0x167fdd(0xea)};}catch(_0x272fff){return console['error']('Error\x20al\x20verificar\x20usuario:',_0x272fff),{'token':null};}}async function see_if_exist_this_token_in_the_database_of_the_web(_0x2fabd4){const _0x4c8daa=_0x426b7a,_0x97e18e='\x0a\x20\x20\x20\x20\x20\x20\x20\x20SELECT\x20token,\x20type_membresy,\x20activation_date\x20,\x20device_id\x0a\x20\x20\x20\x20\x20\x20\x20\x20FROM\x20pagos\x20\x0a\x20\x20\x20\x20\x20\x20\x20\x20WHERE\x20token\x20=\x20?\x0a\x20\x20\x20\x20';try{const _0x43bef2=await pool['query'](_0x97e18e,[_0x2fabd4]);if(_0x43bef2[_0x4c8daa(0x12f)]===0x0)return{'token':null,'message':_0x4c8daa(0x18b)};const _0x495f3b=_0x43bef2[0x0],_0x2ed197=new Date();_0x2ed197[_0x4c8daa(0xde)](_0x2ed197['getFullYear']()-0x1);if(_0x495f3b[_0x4c8daa(0x154)]!=_0x4c8daa(0x12c)&&new Date(_0x495f3b[_0x4c8daa(0x154)])<_0x2ed197)return{'token':null,'message':_0x4c8daa(0x14e)};if(_0x495f3b[_0x4c8daa(0x154)]===_0x4c8daa(0x12c)){const _0x5310a5=new Date();_0x5310a5[_0x4c8daa(0xde)](_0x5310a5[_0x4c8daa(0x14a)]()+0x1);const _0x11d014='\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20UPDATE\x20users\x20\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20SET\x20activation_date\x20=\x20?\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20WHERE\x20token\x20=\x20?\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20';await pool[_0x4c8daa(0x187)](_0x11d014,[_0x5310a5['toISOString']()[_0x4c8daa(0xf6)]('T')[0x0],_0x495f3b[_0x4c8daa(0xed)]]),_0x495f3b[_0x4c8daa(0x154)]=_0x5310a5;}return console[_0x4c8daa(0xfc)](_0x4c8daa(0xea)),{'token':!![],'type_membresy':_0x495f3b[_0x4c8daa(0x16a)],'uuid':_0x495f3b[_0x4c8daa(0x10f)],'activation_date':_0x495f3b[_0x4c8daa(0x154)],'message':_0x4c8daa(0xea)};}catch(_0x2db530){return console[_0x4c8daa(0x190)](_0x4c8daa(0x16d),_0x2db530),{'token':null};}}async function save_the_uui_of_the_user_in_the_database(_0x31c759,_0x3aeb17){const _0x399088=_0x426b7a,_0x221791='\x0a\x20\x20\x20\x20\x20\x20\x20\x20UPDATE\x20pagos\x20\x0a\x20\x20\x20\x20\x20\x20\x20\x20SET\x20device_id\x20=\x20?\x20,\x20active\x20=\x20false\x0a\x20\x20\x20\x20\x20\x20\x20\x20WHERE\x20token\x20=\x20?\x0a\x20\x20\x20\x20';try{const _0x1ee046=await pool['query'](_0x221791,[_0x3aeb17,_0x31c759]);return!![];}catch(_0x3147c7){return console[_0x399088(0x190)](_0x399088(0x144),_0x3147c7),![];}}async function verificarTokenActivo(){const _0x15bf45=_0x426b7a,_0xa85bf=_0x15bf45(0x181);try{const _0x1ca1fe=await pool[_0x15bf45(0x187)](_0xa85bf,[TOKEN]);return console['log'](_0x1ca1fe[0x0]),_0x1ca1fe[0x0][_0x15bf45(0x138)]===0x1?(console['log'](_0x15bf45(0x12a)),!![]):(console[_0x15bf45(0xfc)](_0x15bf45(0xcb)),![]);}catch(_0x341171){return console['error'](_0x15bf45(0x11f),_0x341171),![];}}async function actualizarToken(){const _0x1ebb76=_0x426b7a,_0x3fa6a3=_0x1ebb76(0x16f);await pool[_0x1ebb76(0x187)](_0x3fa6a3,[TOKEN]);}app['on'](_0x426b7a(0x121),async()=>{const _0x42ecd1=_0x426b7a;await check_if_exist_updates();if(thiIsADemo){await initialize_demo();if(await is_demo_expired()){dialog['showMessageBoxSync']({'type':_0x42ecd1(0x109),'title':_0x42ecd1(0xf8),'message':_0x42ecd1(0xf2)}),app['quit']();return;}}else await verify_membership_of_user()?(serverExpress[_0x42ecd1(0x161)](serverExpress[_0x42ecd1(0x103)](_0x42ecd1(0x18e)),'0.0.0.0',()=>{const _0x18e421=_0x42ecd1;console['log']('Server\x20running\x20on\x20http://'+getLocalIP()+':'+serverExpress[_0x18e421(0x103)](_0x18e421(0x18e)));}),createMainWindow()):createMainWindowRegister();}),app['on'](_0x426b7a(0x18f),()=>{const _0x26541d=_0x426b7a;process[_0x26541d(0x142)]!=='darwin'&&app[_0x26541d(0x151)]();});