const _0xe90563=_0xca22;(function(_0x39e221,_0x1c2196){const _0x35a39e=_0xca22,_0x9b9d24=_0x39e221();while(!![]){try{const _0x2751db=-parseInt(_0x35a39e(0x1dd))/0x1+parseInt(_0x35a39e(0x1bf))/0x2+-parseInt(_0x35a39e(0x1c1))/0x3*(-parseInt(_0x35a39e(0x162))/0x4)+-parseInt(_0x35a39e(0x190))/0x5*(-parseInt(_0x35a39e(0x1f3))/0x6)+-parseInt(_0x35a39e(0x1e4))/0x7+parseInt(_0x35a39e(0x195))/0x8*(parseInt(_0x35a39e(0x1e1))/0x9)+-parseInt(_0x35a39e(0x1ca))/0xa*(parseInt(_0x35a39e(0x1cc))/0xb);if(_0x2751db===_0x1c2196)break;else _0x9b9d24['push'](_0x9b9d24['shift']());}catch(_0x3fde91){_0x9b9d24['push'](_0x9b9d24['shift']());}}}(_0x21b8,0x65ecd));const system=require(_0xe90563(0x12e)),thiIsADemo=![],{app,BrowserWindow,dialog,ipcMain}=require(_0xe90563(0x16c)),express=require('express'),morgan=require(_0xe90563(0x1ef)),{engine}=require(_0xe90563(0x19d)),multer=require(_0xe90563(0x1f4)),flash=require(_0xe90563(0x145)),session=require('express-session'),passport=require('passport'),{database}=require(_0xe90563(0x158)),{v4:uuid}=require(_0xe90563(0x165)),path=require(_0xe90563(0x14f)),{RecaptchaV2}=require(_0xe90563(0x182)),nodePersist=require(_0xe90563(0x1f0));nodePersist['init']({'dir':path[_0xe90563(0x186)](__dirname,_0xe90563(0x1e7))});async function initialize_software(){const _0x2a413c=_0xe90563,_0x1d6f6d=await nodePersist[_0x2a413c(0x1e9)](_0x2a413c(0x154));!_0x1d6f6d&&await nodePersist[_0x2a413c(0x1d0)](_0x2a413c(0x154),'false');}async function the_software_have_a_token(){const _0x18d9c8=_0xe90563,_0x4b465c=await nodePersist[_0x18d9c8(0x1e9)](_0x18d9c8(0x154));if(!_0x4b465c)return![];return _0x4b465c!='false';}async function create_expiration_date_of_the_token(_0x9cc913){const _0x3fc351=_0xe90563,_0x1397b8=await nodePersist['get'](_0x3fc351(0x1a1));!_0x1397b8&&await nodePersist['set'](_0x3fc351(0x1a1),_0x9cc913);}function _0x21b8(){const _0x161d2b=['raw','isFile','\x0aENCRYPTION_KEY=','views','addRemote','El\x20token\x20no\x20está\x20activo\x20o\x20no\x20existe.','1192EOziTT','Actualización','Ups,\x20parece\x20que\x20alcanzaste\x20tu\x20límite\x20de\x20dispositivos\x20conectados.\x20Por\x20favor,\x20actualiza\x20tu\x20membresía.','uuid','El\x20usuario\x20\x27','node-machine-id','originalname','type_membresy','removeItem','emit','electron','some','dotenv','edplus.sql','La\x20demo\x20aún\x20está\x20activa.','\x27\x20no\x20existe.\x20🤔','connection','writeFileSync','readFileSync','socket.io','Suscripción\x20expirada.\x20Por\x20favor,\x20vuelve\x20a\x20activar\x20tu\x20membresía.','postgres','ENCRYPTION_KEY=','layouts','userId','user','dev','📦\x20Base\x20de\x20datos\x20EDPLUS\x20creada','../../../.env','./characterDatabase','--hard','maximize','express-recaptcha','config','Token\x20encontrado\x20y\x20activo.','🔄\x20Nueva\x20versión\x20encontrada,\x20actualizando...','join','quit','database','privateNotifications','La\x20demo\x20ha\x20expirado.','Token\x20no\x20encontrado.','message','diskStorage','logfile.txt','toISOString','90OsdJVc','active','expiration_date','company','env','276464VggGbI','axios','Error\x20al\x20verificar\x20usuario:','window-all-closed','trim','IPv4','Reiniciar\x20ahora','Este\x20usuario\x20ya\x20tiene\x20un\x20TOKEN\x20registrado\x20en\x20un\x20equipo.','express-handlebars','image','ready','get_the_first_notification','expirationDateOFTheToken','loadFile','latest','pack_company','catch','login-from-render','this_email_exist','address','Ups,\x20parece\x20que\x20ya\x20estás\x20conectado\x20en\x20otro\x20dispositivo.','Error\x20al\x20agregar\x20el\x20repositorio\x20remoto','📂\x20La\x20base\x20de\x20datos\x20EDPLUS\x20ya\x20existe,\x20no\x20se\x20creó\x20nuevamente.','post','setDate','Ocurrio\x20un\x20error\x20al\x20verificar\x20tu\x20Token\x20en\x20el\x20ultimo\x20paso,\x20intentalo\x20otra\x20vez.','relaunch','Contraseña\x20incorrecta.','log','loadURL','\x0a\x0a\x0a','./lib/addFrom','setFullYear','\x0a\x20\x20\x20\x20\x20\x20\x20\x20SELECT\x20*\x20FROM\x20pagos\x20\x0a\x20\x20\x20\x20\x20\x20\x20\x20WHERE\x20token\x20=\x20?\x0a\x20\x20\x20\x20','hashedPassword','stack','extname','disconnect','127.0.0.1','HEAD','info','Fecha\x20de\x20instalación\x20existente:','900906jOQEjt','Hubo\x20un\x20error\x20al\x20hacer\x20la\x20solicitud.','7824fZMybs','device_id','utf8','Mensaje\x20enviado\x20con\x20éxito','platform','answer-from-login-render-token','newNotification','origin','networkInterfaces','10pWtDRW','filter','4586109liabUu','reset','https://github.com/EduardoMartinez68/VERSIONES_PLUS','flash','set','randomBytes','map','rowCount','privateMessage','Fecha\x20de\x20instalación\x20guardada:','partials','reply','pack_branch','Pool','session','hash','appendFileSync','726418vrsCPq','forEach','hex','success','117ihriUl','token','/links','2079413jtHlPQ','view\x20engine','answer_get_my_deviceId','data','installDemo','get','update_data_of_the_token_in_this_drive','warning','http://localhost:','create_new_chat','Este\x20email\x20\x27','morgan','node-persist','messageStatus','locals','60330TuMaia','multer','Datos\x20actualizados\x20con\x20éxito.\x20Cierra\x20y\x20vuelve\x20a\x20abrir\x20el\x20programa\x20😄','username','activation_date','Usuario\x20autenticado\x20con\x20éxito.','toString','installDate','0000-00-00','endsWith','No\x20se\x20encontró\x20la\x20fecha\x20de\x20instalación','getFullYear','\x0a\x20\x20\x20\x20\x20\x20\x20\x20UPDATE\x20pagos\x20\x0a\x20\x20\x20\x20\x20\x20\x20\x20SET\x20active\x20=\x20false\x0a\x20\x20\x20\x20\x20\x20\x20\x20WHERE\x20token\x20=\x20?\x0a\x20\x20\x20\x20','simple-git','get_information_of_the_user.php','broadcast','createServer','Nueva\x20notificación:','login-from-render-token','0.0.0.0','./lib/handlebars','split','✅\x20ENCRYPTION_KEY\x20generado\x20y\x20guardado\x20en\x20.env','getTheFirstTenNotifications','Repositorio\x20remoto\x20configurado\x20correctamente','SELECT\x201\x20FROM\x20pg_database\x20WHERE\x20datname\x20=\x20\x27edplus\x27','./lib/system','getDate','error','./lib/passport','existsSync','connectionRejected','see_if_exist_this_token_in_the_database_of_the_web.php','includes','update_activation_date.php','use','No\x20pudimos\x20enviar\x20el\x20mensaje\x20al\x20usuario\x20\x27','✅\x20SQL\x20ejecutado\x20correctamente','registerUser','❌\x20Error\x20verificando\x20actualizaciones:','CREATE\x20DATABASE\x20edplus','query','Error\x20al\x20verificar\x20el\x20token:','❌\x20Error\x20ejecutando\x20SQL:','sendMessageToUser','./router/authentication','FudSession','static','fetch','connect-flash','sendNotificationToUser','📥\x20Petición\x20recibida\x20para\x20obtener\x20el\x20deviceId','showMessageBoxSync','preload.js','main','Error\x20verificando\x20actualizaciones:\x20','theUserIsConnect','port','Se\x20ha\x20descargado\x20una\x20nueva\x20versión.\x20Reinicia\x20la\x20aplicación\x20para\x20aplicar\x20los\x20cambios.','path','./services/chat.js','/main','initialize','bcrypt','installToken','get_my_deviceId','.hbs','answer-from-login-render','./keys','https://www.pluspuntodeventa.com/api/','application/json','length'];_0x21b8=function(){return _0x161d2b;};return _0x21b8();}async function token_expired(){const _0x32e792=_0xe90563,_0x5eb2d4=await nodePersist[_0x32e792(0x1e9)](_0x32e792(0x1a1)),_0x27afeb=new Date(_0x5eb2d4),_0x217555=new Date();return _0x217555<_0x27afeb;}function _0xca22(_0x570278,_0x348f91){const _0x21b872=_0x21b8();return _0xca22=function(_0xca2278,_0x3f60b0){_0xca2278=_0xca2278-0x117;let _0x41a102=_0x21b872[_0xca2278];return _0x41a102;},_0xca22(_0x570278,_0x348f91);}async function remove_install_token(){const _0x17e713=_0xe90563;await nodePersist[_0x17e713(0x16a)]('installToken'),await nodePersist['removeItem']('expirationDateOFTheToken'),console['log']('installToken\x20eliminado');}async function initialize_token(_0x5f2738){const _0x5262a8=_0xe90563,_0x5e9c4f=await nodePersist[_0x5262a8(0x1e9)](_0x5262a8(0x154));await nodePersist[_0x5262a8(0x1d0)](_0x5262a8(0x154),_0x5f2738);}async function initialize_demo(){const _0x243566=_0xe90563,_0x3298cf=await nodePersist[_0x243566(0x1e9)](_0x243566(0x1e8));if(!_0x3298cf){const _0x10e2bd=new Date()[_0x243566(0x18f)]();await nodePersist[_0x243566(0x1d0)](_0x243566(0x11b),_0x10e2bd),console[_0x243566(0x1b1)](_0x243566(0x1d5),_0x10e2bd);}else console[_0x243566(0x1b1)](_0x243566(0x1be),_0x3298cf);}async function is_demo_expired(){const _0x206424=_0xe90563,_0x3f7dbc=await nodePersist[_0x206424(0x1e9)](_0x206424(0x1e8));if(!_0x3f7dbc)return console[_0x206424(0x1b1)](_0x206424(0x11e)),![];const _0x4c7ddb=new Date(_0x3f7dbc),_0x233f1d=new Date(),_0x406a5b=_0x233f1d-_0x4c7ddb,_0x5d60cf=_0x406a5b/(0x3e8*0x3c*0x3c*0x18);return _0x5d60cf>0x1e?(console[_0x206424(0x1b1)](_0x206424(0x18a)),!![]):(console[_0x206424(0x1b1)](_0x206424(0x170)),![]);}async function this_software_count_have_a_count(){}async function the_user_have_a_token_active_in_the_database(){}async function verify_membership_of_user(){initialize_software();if(await the_software_have_a_token())return await token_expired();return![];}const simpleGit=require(_0xe90563(0x121)),fs=require('fs'),repoPath=path[_0xe90563(0x186)](__dirname),git=simpleGit(repoPath),repoURL=_0xe90563(0x1ce),remote=_0xe90563(0x1c8);git[_0xe90563(0x160)](remote,repoURL)['then'](()=>{const _0x1c36d7=_0xe90563;console[_0x1c36d7(0x1b1)](_0x1c36d7(0x12c));})[_0xe90563(0x1a5)](_0x10c0da=>{const _0x19fc5c=_0xe90563;console[_0x19fc5c(0x130)](_0x19fc5c(0x1aa),_0x10c0da);});async function check_if_exist_updates(){const _0xd93172=_0xe90563;try{await git[_0xd93172(0x144)](remote);const _0x424628=await git[_0xd93172(0x1b1)]([remote+_0xd93172(0x151),'-1']),_0x110c54=await git['log']([_0xd93172(0x1bc),'-1']);_0x424628['latest'][_0xd93172(0x1db)]!==_0x110c54[_0xd93172(0x1a3)]['hash']?(console[_0xd93172(0x1b1)](_0xd93172(0x185)),await git[_0xd93172(0x15c)]([_0xd93172(0x1cd),_0xd93172(0x180),remote+_0xd93172(0x151)]),await git['pull'](_0xd93172(0x1c8),_0xd93172(0x14a),{'--rebase':null}),dialog[_0xd93172(0x148)]({'type':_0xd93172(0x1bd),'title':_0xd93172(0x163),'message':_0xd93172(0x14e),'buttons':[_0xd93172(0x19b)]}),app[_0xd93172(0x1af)](),app[_0xd93172(0x187)]()):console[_0xd93172(0x1b1)]('✅\x20La\x20aplicación\x20ya\x20está\x20actualizada.');}catch(_0x3c1192){const _0x2fe0bf=path[_0xd93172(0x186)](__dirname,_0xd93172(0x18e));fs[_0xd93172(0x1dc)](_0x2fe0bf,_0xd93172(0x14b)+_0x3c1192[_0xd93172(0x18c)]+'\x0a'+_0x3c1192[_0xd93172(0x1b8)]+'\x0a\x0a',_0xd93172(0x1c3)),console['error'](_0xd93172(0x13b),_0x3c1192),dialog[_0xd93172(0x148)]({'type':_0xd93172(0x1eb),'title':'Error\x20verificando\x20actualizaciones!','message':'Error\x20verificando\x20actualizaciones:\x20'+_0x3c1192[_0xd93172(0x18c)]+'\x0a'+_0x3c1192[_0xd93172(0x1b8)]+'\x0a\x0a'});}}const serverExpress=express();require(_0xe90563(0x131)),require('./lib/editFrom'),serverExpress[_0xe90563(0x1d0)](_0xe90563(0x14d),process['env']['PORT']||0xfa0),serverExpress[_0xe90563(0x1d0)](_0xe90563(0x15f),path[_0xe90563(0x186)](__dirname,_0xe90563(0x15f))),serverExpress['engine'](_0xe90563(0x156),engine({'defaultLayout':'main','layoutsDir':path['join'](serverExpress[_0xe90563(0x1e9)](_0xe90563(0x15f)),_0xe90563(0x179)),'partialsDir':path['join'](serverExpress[_0xe90563(0x1e9)](_0xe90563(0x15f)),_0xe90563(0x1d6)),'extname':_0xe90563(0x156),'helpers':require(_0xe90563(0x128))})),serverExpress[_0xe90563(0x1d0)](_0xe90563(0x1e5),_0xe90563(0x156));const crypto=require('crypto'),envPath=path['resolve'](__dirname,_0xe90563(0x17e));let envContent=fs[_0xe90563(0x132)](envPath)?fs[_0xe90563(0x174)](envPath,_0xe90563(0x1c3)):'';if(!envContent[_0xe90563(0x135)](_0xe90563(0x178))){const newKey=crypto[_0xe90563(0x1d1)](0x20)[_0xe90563(0x11a)](_0xe90563(0x1df));envContent+=_0xe90563(0x15e)+newKey+'\x0a',fs[_0xe90563(0x173)](envPath,envContent),console['log'](_0xe90563(0x12a));}else console[_0xe90563(0x1b1)]('🔐\x20ENCRYPTION_KEY\x20ya\x20existe\x20en\x20.env');require(_0xe90563(0x16e))[_0xe90563(0x183)]();const {APP_PG_USER,APP_PG_HOST,APP_PG_DATABASE,APP_PG_PASSWORD,APP_PG_PORT,TOKEN}=process[_0xe90563(0x194)],pg=require('pg'),adminPool=new pg[(_0xe90563(0x1d9))]({'user':APP_PG_USER,'host':APP_PG_HOST,'password':APP_PG_PASSWORD,'port':APP_PG_PORT,'database':_0xe90563(0x177)}),importSQLFile=async _0x5d70a9=>{const _0x1d65cd=_0xe90563,_0x2432fa=path[_0x1d65cd(0x186)](__dirname,_0x1d65cd(0x188),_0x1d65cd(0x16f)),_0x2ed432=fs['readFileSync'](_0x2432fa,_0x1d65cd(0x1c3)),_0x15e8d7=_0x2ed432[_0x1d65cd(0x129)](/;\s*$/m)[_0x1d65cd(0x1d2)](_0x16b0fb=>_0x16b0fb[_0x1d65cd(0x199)]())['filter'](_0x21cbc4=>_0x21cbc4[_0x1d65cd(0x15b)]>0x0),_0x332526=await _0x5d70a9['connect']();try{for(const _0x314c4c of _0x15e8d7){await _0x332526['query'](_0x314c4c);}console[_0x1d65cd(0x1b1)](_0x1d65cd(0x139));}catch(_0x2afe58){console['error'](_0x1d65cd(0x13f),_0x2afe58[_0x1d65cd(0x18c)]);}finally{_0x332526['release']();}},{create_update_of_the_database}=require(_0xe90563(0x17f)),createDatabase=async()=>{const _0x578887=_0xe90563,_0x230420=await adminPool[_0x578887(0x13d)](_0x578887(0x12d));_0x230420[_0x578887(0x1d3)]===0x0?(await adminPool[_0x578887(0x13d)](_0x578887(0x13c)),importSQLFile(adminPool),console['log'](_0x578887(0x17d))):(console[_0x578887(0x1b1)](_0x578887(0x1ab)),await create_update_of_the_database(adminPool));};createDatabase();const pgPool=new pg[(_0xe90563(0x1d9))]({'user':APP_PG_USER,'host':APP_PG_HOST,'database':APP_PG_DATABASE,'password':APP_PG_PASSWORD,'port':APP_PG_PORT});serverExpress['use'](session({'secret':_0xe90563(0x142),'resave':![],'saveUninitialized':![],'store':new(require('connect-pg-simple')(session))({'pool':pgPool,'tableName':_0xe90563(0x1da)})})),serverExpress[_0xe90563(0x137)](flash()),serverExpress[_0xe90563(0x137)](morgan(_0xe90563(0x17c))),serverExpress['use'](express['urlencoded']({'extended':![]})),serverExpress['use'](express['json']()),serverExpress[_0xe90563(0x137)](passport[_0xe90563(0x152)]()),serverExpress['use'](passport[_0xe90563(0x1da)]());const storage=multer[_0xe90563(0x18d)]({'destination':path[_0xe90563(0x186)](__dirname,'public/img/uploads'),'filename':(_0x58a960,_0x2274db,_0x36a6d9,_0x2d1489)=>{const _0x514f3a=_0xe90563;_0x36a6d9(null,uuid()+path[_0x514f3a(0x1b9)](_0x2274db[_0x514f3a(0x168)]));}});serverExpress['use'](multer({'storage':storage})['single'](_0xe90563(0x19e))),serverExpress['use']((_0x3e89e1,_0x334897,_0x73656d)=>{const _0x5d8328=_0xe90563;serverExpress[_0x5d8328(0x1f2)]['success']=_0x3e89e1['flash'](_0x5d8328(0x1e0)),serverExpress['locals'][_0x5d8328(0x18c)]=_0x3e89e1[_0x5d8328(0x1cf)]('message'),serverExpress[_0x5d8328(0x1f2)][_0x5d8328(0x17b)]=_0x3e89e1['user'],serverExpress[_0x5d8328(0x1f2)]['company']=_0x3e89e1[_0x5d8328(0x193)],serverExpress[_0x5d8328(0x1f2)][_0x5d8328(0x1a4)]=0x0,serverExpress[_0x5d8328(0x1f2)][_0x5d8328(0x1d8)]=0x0,_0x73656d();});const http=require('http'),server=http[_0xe90563(0x124)](serverExpress),{Server}=require(_0xe90563(0x175)),io=new Server(server),users={},connectedEmployees={},companyLimitsCache={},chat=require(_0xe90563(0x150));io['on'](_0xe90563(0x172),async _0x279159=>{const _0x2c6226=_0xe90563;_0x279159['on'](_0x2c6226(0x13a),async(_0x10eb9b,_0x310c1c)=>{const _0x55fe36=_0x2c6226,_0xaea95c=connectedEmployees[_0x310c1c]||[],_0x17fa72=_0xaea95c[_0x55fe36(0x16d)](_0x483c8e=>_0x483c8e[_0x55fe36(0x17a)]===_0x10eb9b);if(_0x17fa72){_0x279159['emit'](_0x55fe36(0x133),_0x55fe36(0x1a9));return;}if(system!='desktop'){!companyLimitsCache[_0x310c1c]&&(companyLimitsCache[_0x310c1c]=await chat['get_max_employee_of_this_company'](_0x310c1c));const _0x283f5b=companyLimitsCache[_0x310c1c];if(_0xaea95c[_0x55fe36(0x15b)]>=_0x283f5b){_0x279159[_0x55fe36(0x16b)](_0x55fe36(0x133),_0x55fe36(0x164));return;}}_0x279159['companyId']=_0x310c1c,_0xaea95c['push']({'userId':_0x10eb9b,'socketId':_0x279159['id']}),connectedEmployees[_0x310c1c]=_0xaea95c;const _0x1d30ba=await chat[_0x55fe36(0x1a0)](_0x10eb9b,0xa);io['to'](_0x10eb9b)[_0x55fe36(0x16b)](_0x55fe36(0x189),{'notifications':_0x1d30ba});});async function _0x289c57(_0x4a4c59){const _0x429d4e=_0x2c6226,_0x577f92=users[_0x4a4c59];let _0x4fc012=_0x577f92;!_0x577f92&&(_0x4fc012=await chat[_0x429d4e(0x1a7)](toUserId));const _0x27f6bb={'canSend':_0x4fc012,'theUserIsConnect':_0x577f92};return _0x27f6bb;}_0x279159['on'](_0x2c6226(0x146),async({userEmail:_0x3f6290,toUserEmail:_0x41afe9,message:_0x42598b})=>{const _0x3f953a=_0x2c6226,_0x58a144=await _0x289c57(_0x41afe9);_0x58a144['canSend']?await chat['create_notification'](_0x3f6290,_0x41afe9,_0x42598b)?(_0x58a144[_0x3f953a(0x14c)]&&io['to'](recipientSocketId)[_0x3f953a(0x16b)]('privateMessage',{'userId':userId,'message':_0x42598b}),_0x279159[_0x3f953a(0x16b)](_0x3f953a(0x1f1),{'success':!![],'message':'Mensaje\x20enviado\x20con\x20éxito.\x20👌'})):_0x279159[_0x3f953a(0x16b)]('messageStatus',{'success':![],'message':_0x3f953a(0x138)+_0x41afe9+'\x27.\x20Inténtalo\x20de\x20nuevo.\x20😳'}):_0x279159[_0x3f953a(0x16b)](_0x3f953a(0x1f1),{'success':![],'message':_0x3f953a(0x166)+_0x41afe9+_0x3f953a(0x171)});}),_0x279159['on'](_0x2c6226(0x12b),async({userEmail:_0x4ab270})=>{const _0x59bcd8=_0x2c6226,_0x2a9f17=await chat[_0x59bcd8(0x1a0)](_0x4ab270,0xa);io['to'](recipientSocketId)[_0x59bcd8(0x16b)](_0x59bcd8(0x189),{'notifications':_0x2a9f17});}),_0x279159['on'](_0x2c6226(0x140),async({userId:_0x4192ac,toUserId:_0x3fb984,message:_0x12695a})=>{const _0x440f20=_0x2c6226,_0xccc088=users[_0x3fb984];let _0x59c03b=_0xccc088;!_0xccc088&&(_0x59c03b=await chat[_0x440f20(0x1a7)](_0x3fb984));if(_0x59c03b){const _0x5e2228=await chat[_0x440f20(0x1ed)](_0x4192ac,_0x3fb984);await chat['send_new_message'](_0x5e2228,_0x4192ac,_0x12695a)&&(_0xccc088&&io['to'](_0xccc088)[_0x440f20(0x16b)](_0x440f20(0x1d4),{'userId':_0x4192ac,'message':_0x12695a})),_0x279159[_0x440f20(0x16b)](_0x440f20(0x1f1),{'success':!![],'message':_0x440f20(0x1c4)});}else _0x279159[_0x440f20(0x16b)](_0x440f20(0x1f1),{'success':![],'message':_0x440f20(0x1ee)+_0x3fb984+'\x27\x20no\x20existe\x20🤔'});}),_0x279159['on'](_0x2c6226(0x1ba),()=>{const _0x3e5ddc=_0x2c6226,{companyId:_0x3450c0}=_0x279159;_0x3450c0&&connectedEmployees[_0x3450c0]?(connectedEmployees[_0x3450c0]=connectedEmployees[_0x3450c0][_0x3e5ddc(0x1cb)](_0x1f6bdd=>_0x1f6bdd['socketId']!==_0x279159['id']),connectedEmployees[_0x3450c0][_0x3e5ddc(0x15b)]===0x0&&delete connectedEmployees[_0x3450c0]):console[_0x3e5ddc(0x1b1)]('Socket\x20'+_0x279159['id']+'\x20desconectado,\x20pero\x20no\x20estaba\x20asociado\x20a\x20ninguna\x20empresa.');}),_0x279159['on']('sendNotification',_0x5a680d=>{const _0x1a6631=_0x2c6226;console[_0x1a6631(0x1b1)](_0x1a6631(0x125),_0x5a680d),_0x279159[_0x1a6631(0x123)]['emit'](_0x1a6631(0x1c7),_0x5a680d);});});const companyName=_0xe90563(0x1e3);serverExpress[_0xe90563(0x137)](require('./router')),serverExpress['use'](require(_0xe90563(0x141))),serverExpress[_0xe90563(0x137)](companyName,require('./router/links'));const routesPath=path[_0xe90563(0x186)](__dirname,'router/links');fs['readdirSync'](routesPath)[_0xe90563(0x1de)](_0x469f0a=>{const _0x4bcbfa=_0xe90563,_0x5d8f45=path[_0x4bcbfa(0x186)](routesPath,_0x469f0a);fs['statSync'](_0x5d8f45)[_0x4bcbfa(0x15d)]()&&_0x469f0a[_0x4bcbfa(0x11d)]('.js')&&serverExpress[_0x4bcbfa(0x137)](companyName,require(_0x5d8f45));}),serverExpress[_0xe90563(0x137)](require(_0xe90563(0x1b4))),serverExpress[_0xe90563(0x137)](require(_0xe90563(0x1b4))),serverExpress[_0xe90563(0x137)](express[_0xe90563(0x143)](path[_0xe90563(0x186)](__dirname,'public')));const os=require('os');function getLocalIP(){const _0x127f7e=_0xe90563,_0x3b0413=os[_0x127f7e(0x1c9)]();for(let _0xb5cd39 in _0x3b0413){for(let _0x18c447=0x0;_0x18c447<_0x3b0413[_0xb5cd39][_0x127f7e(0x15b)];_0x18c447++){const _0x1928bf=_0x3b0413[_0xb5cd39][_0x18c447];if(_0x1928bf['family']===_0x127f7e(0x19a)&&!_0x1928bf['internal'])return _0x1928bf[_0x127f7e(0x1a8)];}}return _0x127f7e(0x1bb);}const axios=require(_0xe90563(0x196));async function get_answer_of_my_api(_0x472ee9,_0x24205a){const _0x439afe=_0xe90563,_0x20757a=path['join'](__dirname,_0x439afe(0x18e));fs[_0x439afe(0x1dc)](_0x20757a,'ENTRE',_0x439afe(0x1c3));try{const _0x19d6bc=await axios[_0x439afe(0x1ac)](_0x439afe(0x159)+_0x472ee9,_0x24205a,{'headers':{'Content-Type':_0x439afe(0x15a)}});return fs[_0x439afe(0x1dc)](_0x20757a,_0x439afe(0x14b)+_0x19d6bc[_0x439afe(0x1e7)]+_0x439afe(0x1b3),_0x439afe(0x1c3)),_0x19d6bc;}catch(_0x1d99c1){return fs[_0x439afe(0x1dc)](_0x20757a,_0x439afe(0x14b)+_0x1d99c1[_0x439afe(0x18c)]+'\x0a'+_0x1d99c1[_0x439afe(0x1b8)]+'\x0a\x0a',_0x439afe(0x1c3)),{'success':![],'message':_0x439afe(0x1c0)};}}let mainWindow,activationWindow,loginWindow;const createMainWindow=()=>{const _0x56afd4=_0xe90563;mainWindow=new BrowserWindow({'width':0x320,'height':0x258}),mainWindow[_0x56afd4(0x181)](),mainWindow[_0x56afd4(0x1b2)](_0x56afd4(0x1ec)+serverExpress[_0x56afd4(0x1e9)](_0x56afd4(0x14d)));},createMainWindowRegister=()=>{const _0xc64374=_0xe90563;loginWindow=new BrowserWindow({'width':0x320,'height':0x258,'parent':mainWindow,'webPreferences':{'preload':path[_0xc64374(0x186)](__dirname,_0xc64374(0x149)),'nodeIntegration':!![],'contextIsolation':![]}}),loginWindow['maximize'](),loginWindow[_0xc64374(0x1a2)](path[_0xc64374(0x186)](__dirname,'activation.html'));},{machineIdSync}=require(_0xe90563(0x167)),deviceId=machineIdSync();ipcMain['on'](_0xe90563(0x155),async _0x3d4b60=>{const _0x5cfb0d=_0xe90563;console[_0x5cfb0d(0x1b1)](_0x5cfb0d(0x147)),_0x3d4b60[_0x5cfb0d(0x1d7)](_0x5cfb0d(0x1e6),deviceId);}),ipcMain['on'](_0xe90563(0x1ea),async(_0x2c7c15,_0x503ec5)=>{const _0x145187=_0xe90563,_0x256c14=_0x503ec5['dataToken'];await initialize_token(_0x256c14[_0x145187(0x1e2)]),await create_expiration_date_of_the_token(_0x256c14[_0x145187(0x192)]);const _0x4a3658=_0x145187(0x1f5);_0x2c7c15[_0x145187(0x1d7)](_0x145187(0x1ea),_0x4a3658);}),ipcMain['on'](_0xe90563(0x126),async(_0x5d8f0b,_0x373220)=>{const _0x5772fe=_0xe90563,_0x3347cf=_0x373220[_0x5772fe(0x1e2)],_0xb40691=await see_if_exist_this_token_in_the_database_of_the_web(_0x3347cf);if(_0xb40691[_0x5772fe(0x1e2)]){let _0x1a36ec=!![];_0xb40691['uuid']&&(_0xb40691[_0x5772fe(0x165)]!==deviceId&&(_0xb40691[_0x5772fe(0x18c)]=_0x5772fe(0x19c),_0x1a36ec=![])),_0x1a36ec&&(await save_the_uui_of_the_user_in_the_database(_0x3347cf,deviceId)&&(await initialize_token(_0x3347cf),await create_expiration_date_of_the_token(_0xb40691[_0x5772fe(0x118)]),_0xb40691['message']=_0x5772fe(0x1f5)));}_0x5d8f0b[_0x5772fe(0x1d7)](_0x5772fe(0x1c6),_0xb40691[_0x5772fe(0x18c)]);}),ipcMain['on'](_0xe90563(0x1a6),async(_0x4a6e7e,_0x2e2121)=>{const _0x33429f=_0xe90563,_0x2082e0=_0x2e2121[_0x33429f(0x117)],_0xbc8e48=_0x2e2121['password'],_0x5456da=await see_if_exist_this_user_in_the_database_of_the_web(_0x2082e0,_0xbc8e48);if(_0x5456da['token']){if(_0x5456da['uuid']&&_0x5456da['uuid']!==deviceId)_0x5456da[_0x33429f(0x18c)]=_0x33429f(0x19c);else{if(await save_the_uui_of_the_user_in_the_database(_0x2082e0,deviceId)){}}}_0x4a6e7e[_0x33429f(0x1d7)](_0x33429f(0x157),_0x5456da[_0x33429f(0x18c)]);});const bcrypt=require(_0xe90563(0x153));async function see_if_exist_this_user_in_the_database_of_the_web(_0x1df748,_0x3cea0f){const _0x2bf8bd=_0xe90563;try{const _0x347907=await get_answer_of_my_api(_0x2bf8bd(0x122),{'email':_0x1df748});if(!_0x347907['data'][_0x2bf8bd(0x1e0)])return{'token':null,'message':'Usuario\x20no\x20encontrado.'};const _0x3868bb=_0x347907[_0x2bf8bd(0x1e7)],_0x15c1f0=await bcrypt['compare'](_0x3cea0f,_0x3868bb[_0x2bf8bd(0x1b7)]);if(!_0x15c1f0)return{'token':null,'message':_0x2bf8bd(0x1b0)};const _0x42bc1a=await get_answer_of_my_api('get_data_of_the_token_with_the_user_id.php',{'userId':_0x3868bb['id']});if(_0x42bc1a[_0x2bf8bd(0x1e7)][_0x2bf8bd(0x1e0)])return{'token':null,'message':'Este\x20usuario\x20no\x20tiene\x20ningun\x20Token\x20activo.'};const _0x336dd5=_0x42bc1a[_0x2bf8bd(0x1e7)],_0x8ade1c=new Date();_0x8ade1c[_0x2bf8bd(0x1b5)](_0x8ade1c['getFullYear']()-0x1);if(new Date(_0x3868bb['activation_date'])<_0x8ade1c)return{'token':null,'message':_0x2bf8bd(0x176)};return console[_0x2bf8bd(0x1b1)](_0x2bf8bd(0x119)),{'token':_0x336dd5[_0x2bf8bd(0x1e2)],'type_membresy':_0x336dd5[_0x2bf8bd(0x169)],'message':_0x2bf8bd(0x119)};}catch(_0xda1fae){return console[_0x2bf8bd(0x130)](_0x2bf8bd(0x197),_0xda1fae),{'token':null};}}async function see_if_exist_this_token_in_the_database_of_the_web(_0xe68786){const _0x2179d9=_0xe90563;try{const _0x430b08=await get_answer_of_my_api(_0x2179d9(0x134),{'token':_0xe68786});if(!_0x430b08[_0x2179d9(0x1e7)]['success'])return{'token':null,'message':_0x2179d9(0x18b)};const _0x29e01e=_0x430b08[_0x2179d9(0x1e7)],_0x353af7=new Date();_0x29e01e[_0x2179d9(0x169)]==0x0?_0x353af7[_0x2179d9(0x1ad)](_0x353af7['getDate']()-0x1e):_0x353af7[_0x2179d9(0x1b5)](_0x353af7[_0x2179d9(0x11f)]()-0x1);if(_0x29e01e[_0x2179d9(0x118)]!=_0x2179d9(0x11c)&&new Date(_0x29e01e[_0x2179d9(0x118)])<_0x353af7)return{'token':null,'message':_0x2179d9(0x176)};if(_0x29e01e[_0x2179d9(0x118)]===_0x2179d9(0x11c)){const _0x121671=new Date();_0x29e01e[_0x2179d9(0x169)]==0x0?_0x121671[_0x2179d9(0x1ad)](_0x353af7[_0x2179d9(0x12f)]()+0x1e):_0x121671[_0x2179d9(0x1b5)](_0x121671['getFullYear']()+0x1);const _0x48eb0f=await get_answer_of_my_api(_0x2179d9(0x136),{'suscripcion':_0x121671['toISOString']()[_0x2179d9(0x129)]('T')[0x0],'token':_0xe68786});return _0x48eb0f[_0x2179d9(0x1e7)][_0x2179d9(0x1e0)]?(_0x29e01e[_0x2179d9(0x118)]=_0x121671,console['log'](_0x2179d9(0x119)),{'token':!![],'type_membresy':_0x29e01e[_0x2179d9(0x169)],'uuid':_0x29e01e[_0x2179d9(0x1c2)],'activation_date':_0x29e01e['activation_date'],'message':_0x2179d9(0x119)}):{'token':null,'message':_0x2179d9(0x1ae)};}}catch(_0x29d783){return console[_0x2179d9(0x130)](_0x2179d9(0x197),_0x29d783),{'token':null,'message':_0x29d783};}}async function save_the_uui_of_the_user_in_the_database(_0x2baea6,_0x236cbf){const _0x3d045e=_0xe90563;try{const _0x4916fa=await get_answer_of_my_api('see_if_exist_this_token_in_the_database_of_the_web.php',{'token':_0x2baea6,'deviceId':_0x236cbf});return _0x4916fa['data'][_0x3d045e(0x1e0)];}catch(_0x4942bb){return console[_0x3d045e(0x130)]('Error\x20al\x20actualizar\x20el\x20UUID\x20del\x20dispositivo:',_0x4942bb),![];}}async function verificarTokenActivo(){const _0x311d50=_0xe90563,_0x37a2e1=_0x311d50(0x1b6);try{const _0x2780eb=await pool[_0x311d50(0x13d)](_0x37a2e1,[TOKEN]);return console['log'](_0x2780eb[0x0]),_0x2780eb[0x0][_0x311d50(0x191)]===0x1?(console[_0x311d50(0x1b1)](_0x311d50(0x184)),!![]):(console[_0x311d50(0x1b1)](_0x311d50(0x161)),![]);}catch(_0x57c325){return console[_0x311d50(0x130)](_0x311d50(0x13e),_0x57c325),![];}}async function actualizarToken(){const _0x5afccd=_0xe90563,_0x2b6979=_0x5afccd(0x120);await pool['query'](_0x2b6979,[TOKEN]);}app['on'](_0xe90563(0x19f),async()=>{const _0x15f040=_0xe90563;await check_if_exist_updates();if(thiIsADemo){await initialize_demo();if(await is_demo_expired()){dialog[_0x15f040(0x148)]({'type':'warning','title':'Demo\x20Expirada','message':'Tu\x20demo\x20de\x2030\x20días\x20ha\x20expirado.\x20Por\x20favor,\x20compra\x20la\x20versión\x20completa\x20y\x20sigue\x20creciendo\x20con\x20ED\x20PLUS\x20🚀.'}),app['quit']();return;}}else await verify_membership_of_user()?(serverExpress['listen'](serverExpress['get']('port'),_0x15f040(0x127),()=>{const _0x34c561=_0x15f040;console[_0x34c561(0x1b1)]('Server\x20running\x20on\x20http://'+getLocalIP()+':'+serverExpress[_0x34c561(0x1e9)](_0x34c561(0x14d)));}),createMainWindow()):createMainWindowRegister();}),app['on'](_0xe90563(0x198),()=>{const _0x31e2a7=_0xe90563;process[_0x31e2a7(0x1c5)]!=='darwin'&&app['quit']();});