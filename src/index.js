function _0x3c3e(_0x3cf8da,_0x20133e){const _0x5e2691=_0x5e26();return _0x3c3e=function(_0x3c3ea4,_0xc44cd5){_0x3c3ea4=_0x3c3ea4-0x1a2;let _0x349154=_0x5e2691[_0x3c3ea4];return _0x349154;},_0x3c3e(_0x3cf8da,_0x20133e);}const _0x182457=_0x3c3e;(function(_0x283b06,_0x36db8f){const _0x1cad6b=_0x3c3e,_0x54f50e=_0x283b06();while(!![]){try{const _0x4e73b8=parseInt(_0x1cad6b(0x1d1))/0x1*(parseInt(_0x1cad6b(0x204))/0x2)+-parseInt(_0x1cad6b(0x1ce))/0x3+-parseInt(_0x1cad6b(0x213))/0x4+-parseInt(_0x1cad6b(0x1a7))/0x5+parseInt(_0x1cad6b(0x1d8))/0x6*(parseInt(_0x1cad6b(0x1c9))/0x7)+parseInt(_0x1cad6b(0x1e7))/0x8*(parseInt(_0x1cad6b(0x216))/0x9)+parseInt(_0x1cad6b(0x1d9))/0xa;if(_0x4e73b8===_0x36db8f)break;else _0x54f50e['push'](_0x54f50e['shift']());}catch(_0x2b08fc){_0x54f50e['push'](_0x54f50e['shift']());}}}(_0x5e26,0x89cde));const system=require(_0x182457(0x20e)),express=require('express'),morgan=require('morgan'),{engine}=require(_0x182457(0x1e4)),multer=require('multer'),flash=require(_0x182457(0x1f7)),session=require(_0x182457(0x208)),passport=require('passport'),{database}=require(_0x182457(0x1e6)),{v4:uuid}=require('uuid'),path=require(_0x182457(0x1f4)),{RecaptchaV2}=require('express-recaptcha'),serverExpress=express();require(_0x182457(0x1ca)),require('./lib/editFrom'),serverExpress[_0x182457(0x1f3)](_0x182457(0x1c8),process[_0x182457(0x1af)][_0x182457(0x214)]||0xfa0),serverExpress['set'](_0x182457(0x1c5),path['join'](__dirname,'views')),serverExpress[_0x182457(0x20d)](_0x182457(0x1ec),engine({'defaultLayout':'main','layoutsDir':path[_0x182457(0x1eb)](serverExpress[_0x182457(0x1fa)](_0x182457(0x1c5)),_0x182457(0x1da)),'partialsDir':path[_0x182457(0x1eb)](serverExpress[_0x182457(0x1fa)](_0x182457(0x1c5)),_0x182457(0x1a2)),'extname':'.hbs','helpers':require(_0x182457(0x20a))})),serverExpress[_0x182457(0x1f3)](_0x182457(0x1cd),_0x182457(0x1ec)),require(_0x182457(0x215))[_0x182457(0x1f0)]();const {APP_PG_USER,APP_PG_HOST,APP_PG_DATABASE,APP_PG_PASSWORD,APP_PG_PORT}=process[_0x182457(0x1af)],pg=require('pg'),pgPool=new pg[(_0x182457(0x1d3))]({'user':APP_PG_USER,'host':APP_PG_HOST,'database':APP_PG_DATABASE,'password':APP_PG_PASSWORD,'port':APP_PG_PORT});serverExpress[_0x182457(0x1c4)](session({'secret':'FudSession','resave':![],'saveUninitialized':![],'store':new(require(_0x182457(0x1dd))(session))({'pool':pgPool,'tableName':_0x182457(0x20c)})})),serverExpress[_0x182457(0x1c4)](flash()),serverExpress['use'](morgan(_0x182457(0x1b5))),serverExpress[_0x182457(0x1c4)](express['urlencoded']({'extended':![]})),serverExpress[_0x182457(0x1c4)](express['json']()),serverExpress[_0x182457(0x1c4)](passport[_0x182457(0x1c0)]()),serverExpress[_0x182457(0x1c4)](passport[_0x182457(0x20c)]());const storage=multer[_0x182457(0x201)]({'destination':path[_0x182457(0x1eb)](__dirname,_0x182457(0x1ef)),'filename':(_0x31e0ed,_0x440655,_0x4fdeab,_0x37f656)=>{const _0x27e5fa=_0x182457;_0x4fdeab(null,uuid()+path['extname'](_0x440655[_0x27e5fa(0x1a9)]));}});serverExpress[_0x182457(0x1c4)](multer({'storage':storage})['single'](_0x182457(0x1b4))),serverExpress[_0x182457(0x1c4)]((_0x58d4d7,_0x52b712,_0x35a6b5)=>{const _0x190826=_0x182457;serverExpress['locals'][_0x190826(0x1b1)]=_0x58d4d7[_0x190826(0x1ed)](_0x190826(0x1b1)),serverExpress[_0x190826(0x1c7)][_0x190826(0x1a3)]=_0x58d4d7[_0x190826(0x1ed)](_0x190826(0x1a3)),serverExpress[_0x190826(0x1c7)][_0x190826(0x1e5)]=_0x58d4d7[_0x190826(0x1e5)],serverExpress[_0x190826(0x1c7)][_0x190826(0x1fc)]=_0x58d4d7[_0x190826(0x1fc)],serverExpress[_0x190826(0x1c7)]['pack_company']=0x0,serverExpress[_0x190826(0x1c7)][_0x190826(0x1d0)]=0x0,_0x35a6b5();});const http=require(_0x182457(0x211)),serverSocket=http[_0x182457(0x203)](serverExpress),{Server}=require(_0x182457(0x1dc)),io=new Server(serverSocket),users={},connectedEmployees={},companyLimitsCache={},orderKitchen={},chat=require(_0x182457(0x1a6));serverSocket['listen'](serverExpress[_0x182457(0x1fa)](_0x182457(0x1c8)),()=>{const _0x2e8f28=_0x182457;console[_0x2e8f28(0x1cc)](_0x2e8f28(0x1a5)+serverExpress[_0x2e8f28(0x1fa)](_0x2e8f28(0x1c8)));}),io['on'](_0x182457(0x210),async _0x55dd23=>{const _0x4a268d=_0x182457;console['log'](_0x4a268d(0x1f6)),_0x55dd23['on'](_0x4a268d(0x1d5),async(_0x576a49,_0x245561)=>{const _0x1f84bb=_0x4a268d,_0x574233=connectedEmployees[_0x245561]||[],_0x2d3b7b=_0x574233[_0x1f84bb(0x1e9)](_0x2bce8f=>_0x2bce8f[_0x1f84bb(0x1e3)]===_0x576a49);if(_0x2d3b7b){_0x55dd23[_0x1f84bb(0x1e8)]('connectionRejected',_0x1f84bb(0x1a8));return;}if(system!=_0x1f84bb(0x205)){!companyLimitsCache[_0x245561]&&(companyLimitsCache[_0x245561]=await chat[_0x1f84bb(0x1ac)](_0x245561));const _0xad9e38=companyLimitsCache[_0x245561];if(_0x574233[_0x1f84bb(0x1ee)]>=_0xad9e38){_0x55dd23[_0x1f84bb(0x1e8)](_0x1f84bb(0x1b8),_0x1f84bb(0x1bc));return;}}_0x55dd23['companyId']=_0x245561,_0x574233[_0x1f84bb(0x1c1)]({'userId':_0x576a49,'socketId':_0x55dd23['id']}),connectedEmployees[_0x245561]=_0x574233;const _0x5a25da=await chat[_0x1f84bb(0x1ff)](_0x576a49,0xa);io['to'](_0x576a49)['emit'](_0x1f84bb(0x1f1),{'notifications':_0x5a25da});});async function _0x44bc5a(_0x158c49){const _0x311569=users[_0x158c49];let _0x54d3b2=_0x311569;!_0x311569&&(_0x54d3b2=await chat['this_email_exist'](toUserId));const _0x5f5877={'canSend':_0x54d3b2,'theUserIsConnect':_0x311569};return _0x5f5877;}_0x55dd23['on'](_0x4a268d(0x1b3),async({userEmail:_0x4161e7,toUserEmail:_0x5114d9,message:_0x4c78b0})=>{const _0x1288da=_0x4a268d,_0x3ca99b=await _0x44bc5a(_0x5114d9);_0x3ca99b[_0x1288da(0x1ae)]?await chat[_0x1288da(0x1b0)](_0x4161e7,_0x5114d9,_0x4c78b0)?(_0x3ca99b[_0x1288da(0x1b7)]&&io['to'](recipientSocketId)[_0x1288da(0x1e8)](_0x1288da(0x1e0),{'userId':userId,'message':_0x4c78b0}),_0x55dd23['emit'](_0x1288da(0x1e2),{'success':!![],'message':'Mensaje\x20enviado\x20con\x20√©xito.\x20üëå'})):_0x55dd23[_0x1288da(0x1e8)](_0x1288da(0x1e2),{'success':![],'message':_0x1288da(0x1f2)+_0x5114d9+_0x1288da(0x1c2)}):_0x55dd23['emit'](_0x1288da(0x1e2),{'success':![],'message':'El\x20usuario\x20\x27'+_0x5114d9+'\x27\x20no\x20existe.\x20ü§î'});}),_0x55dd23['on'](_0x4a268d(0x1a4),async({userEmail:_0x53a156})=>{const _0x2fc18e=_0x4a268d,_0x4cc9f5=await chat[_0x2fc18e(0x1ff)](_0x53a156,0xa);io['to'](recipientSocketId)[_0x2fc18e(0x1e8)](_0x2fc18e(0x1f1),{'notifications':_0x4cc9f5});}),_0x55dd23['on'](_0x4a268d(0x202),async({userId:_0x1d5704,toUserId:_0x5cd07b,message:_0x13ca95})=>{const _0xfee5fe=_0x4a268d,_0x17b5b7=users[_0x5cd07b];let _0x546a9a=_0x17b5b7;!_0x17b5b7&&(_0x546a9a=await chat[_0xfee5fe(0x212)](_0x5cd07b));if(_0x546a9a){const _0x43216b=await chat[_0xfee5fe(0x20f)](_0x1d5704,_0x5cd07b);await chat['send_new_message'](_0x43216b,_0x1d5704,_0x13ca95)&&(_0x17b5b7&&io['to'](_0x17b5b7)[_0xfee5fe(0x1e8)]('privateMessage',{'userId':_0x1d5704,'message':_0x13ca95})),_0x55dd23[_0xfee5fe(0x1e8)]('messageStatus',{'success':!![],'message':_0xfee5fe(0x209)});}else _0x55dd23[_0xfee5fe(0x1e8)]('messageStatus',{'success':![],'message':_0xfee5fe(0x1d6)+_0x5cd07b+_0xfee5fe(0x1df)});}),_0x55dd23['on'](_0x4a268d(0x1e1),()=>{const _0x14d310=_0x4a268d,{companyId:_0x43c3c3}=_0x55dd23;_0x43c3c3&&connectedEmployees[_0x43c3c3]?(connectedEmployees[_0x43c3c3]=connectedEmployees[_0x43c3c3][_0x14d310(0x1f5)](_0x56ead7=>_0x56ead7['socketId']!==_0x55dd23['id']),connectedEmployees[_0x43c3c3][_0x14d310(0x1ee)]===0x0&&delete connectedEmployees[_0x43c3c3]):console[_0x14d310(0x1cc)](_0x14d310(0x1d4)+_0x55dd23['id']+_0x14d310(0x1cb));}),_0x55dd23['on'](_0x4a268d(0x1fe),_0x48f37b=>{const _0x26c8bf=_0x4a268d;console[_0x26c8bf(0x1cc)](_0x26c8bf(0x1f8),_0x48f37b),_0x55dd23[_0x26c8bf(0x1f9)][_0x26c8bf(0x1e8)]('newNotification',_0x48f37b);}),_0x55dd23['on'](_0x4a268d(0x206),_0x532b4c=>{const _0x22129a=_0x4a268d;_0x55dd23[_0x22129a(0x1e8)](_0x22129a(0x1cf),{'orderKitchen':orderKitchen});}),_0x55dd23['on'](_0x4a268d(0x1b2),_0xf291c8=>{const _0x5e4534=_0x4a268d,_0x440320=JSON[_0x5e4534(0x1d7)](_0xf291c8);_0x440320['id']=orderKitchen['length']+0x1,orderKitchen[_0x5e4534(0x1c1)](_0x440320);});});const companyName=_0x182457(0x1ba);serverExpress[_0x182457(0x1c4)](require(_0x182457(0x207))),serverExpress[_0x182457(0x1c4)](require(_0x182457(0x1bb))),serverExpress[_0x182457(0x1c4)](companyName,require(_0x182457(0x1ad))),serverExpress[_0x182457(0x1c4)](companyName,require('./router/links/fudone')),serverExpress[_0x182457(0x1c4)](companyName,require(_0x182457(0x1de))),serverExpress[_0x182457(0x1c4)](companyName,require(_0x182457(0x1bd))),serverExpress[_0x182457(0x1c4)](companyName,require(_0x182457(0x1b6))),serverExpress[_0x182457(0x1c4)](companyName,require(_0x182457(0x1b9))),serverExpress[_0x182457(0x1c4)](companyName,require('./router/links/delivery')),serverExpress[_0x182457(0x1c4)](companyName,require(_0x182457(0x1ab))),serverExpress[_0x182457(0x1c4)](companyName,require(_0x182457(0x1c3))),serverExpress[_0x182457(0x1c4)](companyName,require('./router/links/desktop')),serverExpress[_0x182457(0x1c4)](companyName,require(_0x182457(0x1d2))),serverExpress[_0x182457(0x1c4)](companyName,require(_0x182457(0x1fd))),serverExpress[_0x182457(0x1c4)](companyName,require(_0x182457(0x1c6))),serverExpress[_0x182457(0x1c4)](require(_0x182457(0x1be))),serverExpress[_0x182457(0x1c4)](express['static'](path[_0x182457(0x1eb)](__dirname,_0x182457(0x217))));function _0x5e26(){const _0x24eeba=['0.0.0.0','session','engine','./lib/system','create_new_chat','connection','http','this_email_exist','1966600SgDJMl','PORT','dotenv','126ywxKcu','public','partials','message','getTheFirstTenNotifications','Server\x20running\x20on\x20port\x20','./services/chat.js','1467475arZbRA','Ups,\x20parece\x20que\x20ya\x20est√°s\x20conectado\x20en\x20otro\x20dispositivo.','originalname','listen','./router/links/app','get_max_employee_of_this_company','./router/links','canSend','env','create_notification','success','saveANewOrder','sendNotificationToUser','image','dev','./router/links/subscription','theUserIsConnect','connectionRejected','./router/links/store','/links','./router/authentication','Ups,\x20parece\x20que\x20alcanzaste\x20tu\x20l√≠mite\x20de\x20dispositivos\x20conectados.\x20Por\x20favor,\x20actualiza\x20tu\x20membres√≠a.','./router/links/branch','./lib/addFrom','networkInterfaces','initialize','push','\x27.\x20Int√©ntalo\x20de\x20nuevo.\x20üò≥','./router/links/CRM','use','views','./router/links/orders','locals','port','63KbfHzM','./lib/passport','\x20desconectado,\x20pero\x20no\x20estaba\x20asociado\x20a\x20ninguna\x20empresa.','log','view\x20engine','3318339COInOg','getAllTheOrders','pack_branch','463TFJaXg','./router/links/boutique','Pool','Socket\x20','registerUser','Este\x20email\x20\x27','parse','188646hBMMoq','6696690dOZxQM','layouts','127.0.0.1','socket.io','connect-pg-simple','./router/links/ceo','\x27\x20no\x20existe\x20ü§î','privateMessage','disconnect','messageStatus','userId','express-handlebars','user','./keys','296416XXqtTK','emit','some','internal','join','.hbs','flash','length','public/img/uploads','config','privateNotifications','No\x20pudimos\x20enviar\x20el\x20mensaje\x20al\x20usuario\x20\x27','set','path','filter','Un\x20usuario\x20se\x20ha\x20conectado','connect-flash','Nueva\x20notificaci√≥n:','broadcast','get','IPv4','company','./router/links/cashCut','sendNotification','get_the_first_notification','family','diskStorage','sendMessageToUser','createServer','4252iSHnSW','desktop','sendAllTheOrders','./router','express-session','Mensaje\x20enviado\x20con\x20√©xito','./lib/handlebars'];_0x5e26=function(){return _0x24eeba;};return _0x5e26();}const os=require('os');function getLocalIP(){const _0xf7bdfe=_0x182457,_0x143d89=os[_0xf7bdfe(0x1bf)]();for(let _0x248144 in _0x143d89){for(let _0x4880b3=0x0;_0x4880b3<_0x143d89[_0x248144][_0xf7bdfe(0x1ee)];_0x4880b3++){const _0x46260f=_0x143d89[_0x248144][_0x4880b3];if(_0x46260f[_0xf7bdfe(0x200)]===_0xf7bdfe(0x1fb)&&!_0x46260f[_0xf7bdfe(0x1ea)])return _0x46260f['address'];}}return _0xf7bdfe(0x1db);}serverExpress[_0x182457(0x1aa)](serverExpress[_0x182457(0x1fa)]('port'),_0x182457(0x20b),()=>{const _0x1c9d0f=_0x182457;console['log']('Server\x20running\x20on\x20http://'+getLocalIP()+':'+serverExpress[_0x1c9d0f(0x1fa)](_0x1c9d0f(0x1c8)));});